<!DOCTYPE html>

<HTML><head><TITLE>Manpage of PERF\-KVM</TITLE>
<meta charset="utf-8">
<link rel="stylesheet" href="/css/main.css" type="text/css">
</head>
<body>
 <header class="site-header">
 <div class="wrap"> <div class="site-title"><a href="/manpages/index.html">linux manpages</a></div>
 <div class="site-description">{"type":"documentation"}</div>
 </div>
 </header>
 <div class="page-content"><div class="wrap">
<H1>PERF\-KVM</H1>
Section: Misc. Reference Manual Pages (1)<BR>Updated: 10/16/2012<BR><A HREF="#index">Index</A>
<A HREF="/manpages/index.html">Return to Main Contents</A><HR>











<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

perf-kvm - Tool to trace/measure kvm guest os
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<P>
<PRE>
<I>perf kvm</I> [--host] [--guest] [--guestmount=&lt;path&gt;
        [--guestkallsyms=&lt;path&gt; --guestmodules=&lt;path&gt; | --guestvmlinux=&lt;path&gt;]]
        {top|record|report|diff|buildid-list}
<I>perf kvm</I> [--host] [--guest] [--guestkallsyms=&lt;path&gt; --guestmodules=&lt;path&gt;
        | --guestvmlinux=&lt;path&gt;] {top|record|report|diff|buildid-list}
</PRE>

<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

<P>
There are a couple of variants of perf kvm:
<P>
<DL COMPACT><DT><DD>



<PRE>
'perf kvm [options] top &lt;command&gt;' to generates and displays
a performance counter profile of guest os in realtime
of an arbitrary workload.
</PRE>

</DL>




<P>
<DL COMPACT><DT><DD>



<PRE>
'perf kvm record &lt;command&gt;' to record the performance counter profile
of an arbitrary workload and save it into a perf data file. If both
--host and --guest are input, the perf data file name is perf.data.kvm.
If there is  no --host but --guest, the file name is perf.data.guest.
If there is no --guest but --host, the file name is perf.data.host.
</PRE>

</DL>




<P>
<DL COMPACT><DT><DD>



<PRE>
'perf kvm report' to display the performance counter profile information
recorded via perf kvm record.
</PRE>

</DL>




<P>
<DL COMPACT><DT><DD>



<PRE>
'perf kvm diff' to displays the performance difference amongst two perf.data
files captured via perf record.
</PRE>

</DL>




<P>
<DL COMPACT><DT><DD>



<PRE>
'perf kvm buildid-list' to  display the buildids found in a perf data file,
so that other tools can be used to fetch packages with matching symbol tables
for use by perf report.
</PRE>

</DL>




<A NAME="lbAE">&nbsp;</A>
<H2>OPTIONS</H2>

<P>

-i, --input=
<DL COMPACT><DT><DD>
Input file name.
</DL>

<P>

-o, --output
<DL COMPACT><DT><DD>
Output file name.
</DL>

<P>

--host=
<DL COMPACT><DT><DD>
Collect host side performance profile.
</DL>

<P>

--guest=
<DL COMPACT><DT><DD>
Collect guest side performance profile.
</DL>

<P>

--guestmount=&lt;path&gt;
<DL COMPACT><DT><DD>
Guest os root file system mount directory. Users mounts guest os root directories under &lt;path&gt; by a specific filesystem access method, typically, sshfs. For example, start 2 guest os. The onecqs pid is 8888 and the othercqs is 9999. #mkdir
/guestmount; cd/guestmount #sshfs -o allow_other,direct_io -p 5551 localhost:/ 8888/ #sshfs -o allow_other,direct_io -p 5552 localhost:/ 9999/ #perf kvm --host --guest --guestmount=~/guestmount top
</DL>

<P>

--guestkallsyms=&lt;path&gt;
<DL COMPACT><DT><DD>
Guest os /proc/kallsyms file copy.
<I>perf</I>
kvm' reads it to get guest kernel symbols. Users copy it out from guest os.
</DL>

<P>

--guestmodules=&lt;path&gt;
<DL COMPACT><DT><DD>
Guest os /proc/modules file copy.
<I>perf</I>
kvm' reads it to get guest kernel module information. Users copy it out from guest os.
</DL>

<P>

--guestvmlinux=&lt;path&gt;
<DL COMPACT><DT><DD>
Guest os kernel vmlinux.
</DL>

<A NAME="lbAF">&nbsp;</A>
<H2>SEE ALSO</H2>

<P>
<B><A HREF="/manpages/index.html?1+perf-top">perf-top</A></B>(1), <B><A HREF="http://localhost/cgi-bin/man/man2html?1+perf-record">perf-record</A></B>(1), <B><A HREF="http://localhost/cgi-bin/man/man2html?1+perf-report">perf-report</A></B>(1), <B><A HREF="http://localhost/cgi-bin/man/man2html?1+perf-diff">perf-diff</A></B>(1), <B><A HREF="http://localhost/cgi-bin/man/man2html?1+perf-buildid-list">perf-buildid-list</A></B>(1)
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">OPTIONS</A><DD>
<DT><A HREF="#lbAF">SEE ALSO</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/manpages/index.html">man2html</A>,
using the manual pages.<BR>
Time: 05:29:07 GMT, December 24, 2015
</div></div>
</body>
</HTML>
