<!DOCTYPE html>

<HTML><head><TITLE>Manpage of SSH-KEYGEN</TITLE>
<meta charset="utf-8">
<link rel="stylesheet" href="/css/main.css" type="text/css">
</head>
<body>
 <header class="site-header">
 <div class="wrap"> <div class="site-title"><a href="/manpages/index.html">linux manpages</a></div>
 <div class="site-description">{"type":"programming"}</div>
 </div>
 </header>
 <div class="page-content"><div class="wrap">
<H1>SSH-KEYGEN</H1>
Section: User Commands  (1)<BR><A HREF="#index">Index</A>
<A HREF="/manpages/index.html">Return to Main Contents</A><HR>
<BR>BSD mandoc<BR>
<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>



<B>ssh-keygen</B>

 - authentication key generation, management and conversion

<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<B>ssh-keygen</B>

-words

[-<B>q</B>

]

[-<B>b </B><I>bits</I>



]

-<B>t </B><I>type</I>



[-<B>N </B><I>new_passphrase</I>



]

[-<B>C </B><I>comment</I>



]

[-<B>f </B><I>output_keyfile</I>



]

<BR><B>ssh-keygen</B>



-<B>p</B>

[-<B>P </B><I>old_passphrase</I>



]

[-<B>N </B><I>new_passphrase</I>



]

[-<B>f </B><I>keyfile</I>



]

<BR><B>ssh-keygen</B>

-<B>i</B>

[-<B>f </B><I>input_keyfile</I>



]

<BR><B>ssh-keygen</B>

-<B>e</B>

[-<B>f </B><I>input_keyfile</I>



]

<BR><B>ssh-keygen</B>

-<B>y</B>

[-<B>f </B><I>input_keyfile</I>



]

<BR><B>ssh-keygen</B>

-<B>c</B>

[-<B>P </B><I>passphrase</I>



]

[-<B>C </B><I>comment</I>



]

[-<B>f </B><I>keyfile</I>



]

<BR><B>ssh-keygen</B>

-<B>l</B>

[-<B>f </B><I>input_keyfile</I>



]

<BR><B>ssh-keygen</B>

-<B>B</B>

[-<B>f </B><I>input_keyfile</I>



]

<BR><B>ssh-keygen</B>

-<B>D </B><I>reader</I>



<BR><B>ssh-keygen</B>

-<B>F </B><I>hostname</I>



[-<B>f </B><I>known_hosts_file</I>



]

[-<B>l</B>

]

<BR><B>ssh-keygen</B>

-<B>H</B>

[-<B>f </B><I>known_hosts_file</I>



]

<BR><B>ssh-keygen</B>

-<B>R </B><I>hostname</I>



[-<B>f </B><I>known_hosts_file</I>



]

<BR><B>ssh-keygen</B>

-<B>U </B><I>reader</I>



[-<B>f </B><I>input_keyfile</I>



]

<BR><B>ssh-keygen</B>

-<B>r </B><I>hostname</I>



[-<B>f </B><I>input_keyfile</I>



]

[-<B>g</B>

]

<BR><B>ssh-keygen</B>

-<B>G </B><I>output_file</I>



[-<B>v</B>

]

[-<B>b </B><I>bits</I>



]

[-<B>M </B><I>memory</I>



]

[-<B>S </B><I>start_point</I>



]

<BR><B>ssh-keygen</B>

-<B>T </B><I>output_file</I>



-<B>f </B><I>input_file</I>



[-<B>v</B>

]

[-<B>a </B><I>num_trials</I>



]

[-<B>W </B><I>generator</I>



]

<BR><B>ssh-keygen</B>

[-<B>n</B>

]

[-<B>D </B><I>smartcard</I>



]

<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

<B>ssh-keygen</B>


generates, manages and converts authentication keys for
<A HREF="/manpages/index.html?1+ssh">ssh</A>(1).


<B>ssh-keygen</B>


can create RSA keys for use by SSH protocol version 1 and RSA or DSA
keys for use by SSH protocol version 2.
The type of key to be generated is specified with the
-<B>t</B>

option.
If invoked without any arguments,
<B>ssh-keygen</B>


will generate an RSA key for use in SSH protocol 2 connections.
<P>

<B>ssh-keygen</B>


is also used to generate groups for use in Diffie-Hellman group
exchange (DH-GEX).
See the
Sx MODULI GENERATION

section for details.
<P>

Normally each user wishing to use SSH
with RSA or DSA authentication runs this once to create the authentication
key in
~/.ssh/identity

 
~/.ssh/id_dsa

or
~/.ssh/id_rsa

 
Additionally, the system administrator may use this to generate host keys,
as seen in
/etc/rc

 
<P>

Normally this program generates the key and asks for a file in which
to store the private key.
The public key is stored in a file with the same name but
``.pub''

appended.
The program also asks for a passphrase.
The passphrase may be empty to indicate no passphrase
(host keys must have an empty passphrase), or it may be a string of
arbitrary length.
A passphrase is similar to a password, except it can be a phrase with a
series of words, punctuation, numbers, whitespace, or any string of
characters you want.
Good passphrases are 10-30 characters long, are
not simple sentences or otherwise easily guessable (English
prose has only 1-2 bits of entropy per character, and provides very bad
passphrases), and contain a mix of upper and lowercase letters,
numbers, and non-alphanumeric characters.
The passphrase can be changed later by using the
-<B>p</B>

option.
<P>

There is no way to recover a lost passphrase.
If the passphrase is
lost or forgotten, a new key must be generated and copied to the
corresponding public key to other machines.
<P>

For RSA1 keys,
there is also a comment field in the key file that is only for
convenience to the user to help identify the key.
The comment can tell what the key is for, or whatever is useful.
The comment is initialized to
``<A HREF="mailto:user@host">user@host</A>''

when the key is created, but can be changed using the
-<B>c</B>

option.
<P>

After a key is generated, instructions below detail where the keys
should be placed to be activated.
<P>

The options are as follows:
<DL COMPACT>
<P>

<DT><B>-a </B><I>trials</I>




<DD>
Specifies the number of primality tests to perform when screening DH-GEX
candidates using the
-<B>T</B>

command.
<DT><B>-B</B>


<DD>
Show the bubblebabble digest of specified private or public key file.
<DT><B>-b </B><I>bits</I>




<DD>
Specifies the number of bits in the key to create.
For RSA keys, the minimum size is 768 bits and the default is 2048 bits.
Generally, 2048 bits is considered sufficient.
DSA keys must be exactly 1024 bits as specified by FIPS 186-2.
<DT><B>-C </B><I>comment</I>




<DD>
Provides a new comment.
<DT><B>-c</B>


<DD>
Requests changing the comment in the private and public key files.
This operation is only supported for RSA1 keys.
The program will prompt for the file containing the private keys, for
the passphrase if the key has one, and for the new comment.
<DT><B>-D </B><I>reader</I>




<DD>
Download the RSA public key stored in the smartcard in
<I>reader</I>

 
<DT><B>-e</B>


<DD>
This option will read a private or public OpenSSH key file and
print the key in
RFC 4716 SSH Public Key File Format
to stdout.
This option allows exporting keys for use by several commercial
SSH implementations.
<DT><B>-F </B><I>hostname</I>




<DD>
Search for the specified
<I>hostname</I>

in a
known_hosts

file, listing any occurrences found.
This option is useful to find hashed host names or addresses and may also be
used in conjunction with the
-<B>H</B>

option to print found keys in a hashed format.
<DT><B>-f </B><I>filename</I>




<DD>
Specifies the filename of the key file.
<DT><B>-G </B><I>output_file</I>




<DD>
Generate candidate primes for DH-GEX.
These primes must be screened for
safety (using the
-<B>T</B>

option) before use.
<DT><B>-g</B>


<DD>
Use generic DNS format when printing fingerprint resource records using the
-<B>r</B>

command.
<DT><B>-H</B>


<DD>
Hash a
known_hosts

file.
This replaces all hostnames and addresses with hashed representations
within the specified file; the original content is moved to a file with
a .old suffix.
These hashes may be used normally by
<B>ssh</B>

and
<B>sshd</B>

 
but they do not reveal identifying information should the file's contents
be disclosed.
This option will not modify existing hashed hostnames and is therefore safe
to use on files that mix hashed and non-hashed names.
<DT><B>-i</B>


<DD>
This option will read an unencrypted private (or public) key file
in SSH2-compatible format and print an OpenSSH compatible private
(or public) key to stdout.
<B>ssh-keygen</B>


also reads the
RFC 4716 SSH Public Key File Format.
This option allows importing keys from several commercial
SSH implementations.
<DT><B>-l</B>


<DD>
Show fingerprint of specified public key file.
Private RSA1 keys are also supported.
For RSA and DSA keys
<B>ssh-keygen</B>


tries to find the matching public key file and prints its fingerprint.
If combined with
-<B>v</B>

 
an ASCII art representation of the key is supplied with the fingerprint.
<DT><B>-M </B><I>memory</I>




<DD>
Specify the amount of memory to use (in megabytes) when generating
candidate moduli for DH-GEX.
<DT><B>-n</B>


<DD>
Extract the public key from smartcard.
<DT><B>-N </B><I>new_passphrase</I>




<DD>
Provides the new passphrase.
<DT><B>-P </B><I>passphrase</I>




<DD>
Provides the (old) passphrase.
<DT><B>-p</B>


<DD>
Requests changing the passphrase of a private key file instead of
creating a new private key.
The program will prompt for the file
containing the private key, for the old passphrase, and twice for the
new passphrase.
<DT><B>-q</B>


<DD>
Silence
<B>ssh-keygen</B>

 
Used by
/etc/rc

when creating a new key.
<DT><B>-R </B><I>hostname</I>




<DD>
Removes all keys belonging to
<I>hostname</I>

from a
known_hosts

file.
This option is useful to delete hashed hosts (see the
-<B>H</B>

option above).
<DT><B>-r </B><I>hostname</I>




<DD>
Print the SSHFP fingerprint resource record named
<I>hostname</I>

for the specified public key file.
<DT><B>-S </B><I>start</I>




<DD>
Specify start point (in hex) when generating candidate moduli for DH-GEX.
<DT><B>-T </B><I>output_file</I>




<DD>
Test DH group exchange candidate primes (generated using the
-<B>G</B>

option) for safety.
<DT><B>-t </B><I>type</I>




<DD>
Specifies the type of key to create.
The possible values are
``rsa1''

for protocol version 1 and
``rsa''

or
``dsa''

for protocol version 2.
<DT><B>-U </B><I>reader</I>




<DD>
Upload an existing RSA private key into the smartcard in
<I>reader</I>

 
<DT><B>-v</B>


<DD>
Verbose mode.
Causes
<B>ssh-keygen</B>


to print debugging messages about its progress.
This is helpful for debugging moduli generation.
Multiple
-<B>v</B>

options increase the verbosity.
The maximum is 3.
<DT><B>-W </B><I>generator</I>




<DD>
Specify desired generator when testing candidate moduli for DH-GEX.
<DT><B>-y</B>


<DD>
This option will read a private
OpenSSH format file and print an OpenSSH public key to stdout.
</DL>
<P>

<A NAME="lbAE">&nbsp;</A>
<H2>MODULI GENERATION</H2>

<B>ssh-keygen</B>


may be used to generate groups for the Diffie-Hellman Group Exchange
(DH-GEX) protocol.
Generating these groups is a two-step process: first, candidate
primes are generated using a fast, but memory intensive process.
These candidate primes are then tested for suitability (a CPU-intensive
process).
<P>

Generation of primes is performed using the
-<B>G</B>

option.
The desired length of the primes may be specified by the
-<B>b</B>

option.
For example:
<P>


<BLOCKQUOTE><TT># ssh-keygen -G moduli-2048.candidates -b 2048</TT></BLOCKQUOTE>
<P>

By default, the search for primes begins at a random point in the
desired length range.
This may be overridden using the
-<B>S</B>

option, which specifies a different start point (in hex).
<P>

Once a set of candidates have been generated, they must be tested for
suitability.
This may be performed using the
-<B>T</B>

option.
In this mode
<B>ssh-keygen</B>


will read candidates from standard input (or a file specified using the
-<B>f</B>

option).
For example:
<P>


<BLOCKQUOTE><TT># ssh-keygen -T moduli-2048 -f moduli-2048.candidates</TT></BLOCKQUOTE>
<P>

By default, each candidate will be subjected to 100 primality tests.
This may be overridden using the
-<B>a</B>

option.
The DH generator value will be chosen automatically for the
prime under consideration.
If a specific generator is desired, it may be requested using the
-<B>W</B>

option.
Valid generator values are 2, 3, and 5.
<P>

Screened DH groups may be installed in
/etc/ssh/moduli

 
It is important that this file contains moduli of a range of bit lengths and
that both ends of a connection share common moduli.
<A NAME="lbAF">&nbsp;</A>
<H2>FILES</H2>

<DL COMPACT>
<P>

<DT><B>~/.ssh/identity

</B>
<DD>
Contains the protocol version 1 RSA authentication identity of the user.
This file should not be readable by anyone but the user.
It is possible to
specify a passphrase when generating the key; that passphrase will be
used to encrypt the private part of this file using 3DES.
This file is not automatically accessed by
<B>ssh-keygen</B>


but it is offered as the default file for the private key.
<A HREF="/manpages/index.html?1+ssh">ssh</A>(1)


will read this file when a login attempt is made.
<DT><B>~/.ssh/identity.pub

</B>
<DD>
Contains the protocol version 1 RSA public key for authentication.
The contents of this file should be added to
~/.ssh/authorized_keys

on all machines
where the user wishes to log in using RSA authentication.
There is no need to keep the contents of this file secret.
<DT><B>~/.ssh/id_dsa

</B>
<DD>
Contains the protocol version 2 DSA authentication identity of the user.
This file should not be readable by anyone but the user.
It is possible to
specify a passphrase when generating the key; that passphrase will be
used to encrypt the private part of this file using 3DES.
This file is not automatically accessed by
<B>ssh-keygen</B>


but it is offered as the default file for the private key.
<A HREF="/manpages/index.html?1+ssh">ssh</A>(1)


will read this file when a login attempt is made.
<DT><B>~/.ssh/id_dsa.pub

</B>
<DD>
Contains the protocol version 2 DSA public key for authentication.
The contents of this file should be added to
~/.ssh/authorized_keys

on all machines
where the user wishes to log in using public key authentication.
There is no need to keep the contents of this file secret.
<DT><B>~/.ssh/id_rsa

</B>
<DD>
Contains the protocol version 2 RSA authentication identity of the user.
This file should not be readable by anyone but the user.
It is possible to
specify a passphrase when generating the key; that passphrase will be
used to encrypt the private part of this file using 3DES.
This file is not automatically accessed by
<B>ssh-keygen</B>


but it is offered as the default file for the private key.
<A HREF="/manpages/index.html?1+ssh">ssh</A>(1)


will read this file when a login attempt is made.
<DT><B>~/.ssh/id_rsa.pub

</B>
<DD>
Contains the protocol version 2 RSA public key for authentication.
The contents of this file should be added to
~/.ssh/authorized_keys

on all machines
where the user wishes to log in using public key authentication.
There is no need to keep the contents of this file secret.
<DT><B>/etc/ssh/moduli

</B>
<DD>
Contains Diffie-Hellman groups used for DH-GEX.
The file format is described in
<A HREF="/manpages/index.html?5+moduli">moduli</A>(5).


</DL>
<P>

<A NAME="lbAG">&nbsp;</A>
<H2>ENVIRONMENT</H2>

<DL COMPACT>
<P>

<P>

<DT><B>SSH_USE_STRONG_RNG

</B>
<DD>
The reseeding of the OpenSSL random generator is usually done from
<B>/dev/urandom</B>

 
If the 
<B>SSH_USE_STRONG_RNG</B>

environment variable is set to value other than
<B>0</B>

the OpenSSL random generator is reseeded from
<B>/dev/random</B>

 
The number of bytes read is defined by the SSH_USE_STRONG_RNG value. 
Minimum is 6 bytes.
This setting is not recommended on the computers without the hardware
random generator because insufficient entropy causes the connection to 
be blocked until enough entropy is available.
</DL>
<P>

<A NAME="lbAH">&nbsp;</A>
<H2>SEE ALSO</H2>

<A HREF="/manpages/index.html?1+ssh">ssh</A>(1),


ssh-add1,


ssh-agent1,


<A HREF="/manpages/index.html?5+moduli">moduli</A>(5),


<A HREF="/manpages/index.html?8+sshd">sshd</A>(8)


<DL COMPACT><DT><DD>
<I>RFC 4716</I>
<I>&quot;The Secure Shell (SSH) Public Key File Format&quot;</I>
2006
</DL>

<A NAME="lbAI">&nbsp;</A>
<H2>AUTHORS</H2>

OpenSSH is a derivative of the original and free
ssh 1.2.12 release by Tatu Ylonen.
Aaron Campbell, Bob Beck, Markus Friedl, Niels Provos,
Theo de Raadt and Dug Song
removed many bugs, re-added newer features and
created OpenSSH.
Markus Friedl contributed the support for SSH
protocol versions 1.5 and 2.0.
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">MODULI GENERATION</A><DD>
<DT><A HREF="#lbAF">FILES</A><DD>
<DT><A HREF="#lbAG">ENVIRONMENT</A><DD>
<DT><A HREF="#lbAH">SEE ALSO</A><DD>
<DT><A HREF="#lbAI">AUTHORS</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/manpages/index.html">man2html</A>,
using the manual pages.<BR>
Time: 05:29:11 GMT, December 24, 2015
</div></div>
</body>
</HTML>
