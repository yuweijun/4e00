<!DOCTYPE html>

<HTML><head><TITLE>Manpage of QEMU</TITLE>
<meta charset="utf-8">
<link rel="stylesheet" href="/css/main.css" type="text/css">
</head>
<body>
 <header class="site-header">
 <div class="wrap"> <div class="site-title"><a href="/manpages/index.html">linux man pages</a></div>
 <div class="site-description">{"type":"programming"}</div>
 </div>
 </header>
 <div class="page-content">
<H1>QEMU</H1>
Section:   (1)<BR>Updated: 2012-09-05<BR><A HREF="#index">Index</A>
<A HREF="/manpages/index.html">Return to Main Contents</A><HR>






<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

qemu-doc - QEMU Emulator User Documentation
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<A NAME="ixAAC"></A>
usage: qemu [options] [<I>disk_image</I>]
<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

<A NAME="ixAAD"></A>
The <FONT SIZE="-1">QEMU</FONT> <FONT SIZE="-1">PC</FONT> System emulator simulates the
following peripherals:
<DL COMPACT>
<DT>-<DD>
i440FX host <FONT SIZE="-1">PCI</FONT> bridge and <FONT SIZE="-1">PIIX3</FONT> <FONT SIZE="-1">PCI</FONT> to <FONT SIZE="-1">ISA</FONT> bridge
<DT>-<DD>
Cirrus <FONT SIZE="-1">CLGD</FONT> 5446 <FONT SIZE="-1">PCI</FONT> <FONT SIZE="-1">VGA</FONT> card or dummy <FONT SIZE="-1">VGA</FONT> card with Bochs <FONT SIZE="-1">VESA</FONT>
extensions (hardware level, including all non standard modes).
<DT>-<DD>
<FONT SIZE="-1">PS/2</FONT> mouse and keyboard
<DT>-<DD>
2 <FONT SIZE="-1">PCI</FONT> <FONT SIZE="-1">IDE</FONT> interfaces with hard disk and CD-ROM support
<DT>-<DD>
Floppy disk
<DT>-<DD>
<FONT SIZE="-1">PCI</FONT> and <FONT SIZE="-1">ISA</FONT> network adapters
<DT>-<DD>
Serial ports
<DT>-<DD>
Creative SoundBlaster 16 sound card
<DT>-<DD>
<FONT SIZE="-1">ENSONIQ</FONT> AudioPCI <FONT SIZE="-1">ES1370</FONT> sound card
<DT>-<DD>
Intel 82801AA <FONT SIZE="-1">AC97</FONT> Audio compatible sound card
<DT>-<DD>
Intel <FONT SIZE="-1">HD</FONT> Audio Controller and <FONT SIZE="-1">HDA</FONT> codec
<DT>-<DD>
Adlib(<FONT SIZE="-1">OPL2</FONT>) - Yamaha <FONT SIZE="-1">YM3812</FONT> compatible chip
<DT>-<DD>
Gravis Ultrasound <FONT SIZE="-1">GF1</FONT> sound card
<DT>-<DD>
<FONT SIZE="-1">CS4231A</FONT> compatible sound card
<DT>-<DD>
<FONT SIZE="-1">PCI</FONT> <FONT SIZE="-1">UHCI</FONT> <FONT SIZE="-1">USB</FONT> controller and a virtual <FONT SIZE="-1">USB</FONT> hub.
</DL>
<P>

<FONT SIZE="-1">SMP</FONT> is supported with up to 255 CPUs.
<P>

Note that adlib, gus and cs4231a are only available when <FONT SIZE="-1">QEMU</FONT> was
configured with --audio-card-list option containing the name(s) of
required card(s).
<P>

<FONT SIZE="-1">QEMU</FONT> uses the <FONT SIZE="-1">PC</FONT> <FONT SIZE="-1">BIOS</FONT> from the Bochs project and the Plex86/Bochs <FONT SIZE="-1">LGPL</FONT>
<FONT SIZE="-1">VGA</FONT> <FONT SIZE="-1">BIOS</FONT>.
<P>

<FONT SIZE="-1">QEMU</FONT> uses <FONT SIZE="-1">YM3812</FONT> emulation by Tatsuyuki Satoh.
<P>

<FONT SIZE="-1">QEMU</FONT> uses <FONT SIZE="-1">GUS</FONT> emulation(<FONT SIZE="-1">GUSEMU32</FONT> &lt;<B><A HREF="http://www.deinmeister.de/gusemu/">http://www.deinmeister.de/gusemu/</A></B>&gt;)
by Tibor ``<FONT SIZE="-1">TS</FONT>'' SchA~Xtz.
<P>

Not that, by default, <FONT SIZE="-1">GUS</FONT> shares <FONT SIZE="-1"><I><A HREF="/manpages/index.html?7+IRQ">IRQ</A></I></FONT><I></I>(7) with parallel ports and so
qemu must be told to not have parallel ports to have working <FONT SIZE="-1">GUS</FONT>
<P>



<PRE>
        qemu dos.img -soundhw gus -parallel none

</PRE>


<P>

Alternatively:
<P>



<PRE>
        qemu dos.img -device gus,irq=5

</PRE>


<P>

Or some other unclaimed <FONT SIZE="-1">IRQ</FONT>.
<P>

<FONT SIZE="-1">CS4231A</FONT> is the chip used in Windows Sound System and <FONT SIZE="-1">GUSMAX</FONT> products
<A NAME="lbAE">&nbsp;</A>
<H2>OPTIONS</H2>

<A NAME="ixAAE"></A>
<I>disk_image</I> is a raw hard disk image for <FONT SIZE="-1">IDE</FONT> hard disk 0. Some
targets do not need a disk image.
<P>

Standard options:
<DL COMPACT>
<DT><B>-h</B><DD>
<A NAME="ixAAF"></A>
Display help and exit
<DT><B>-version</B><DD>
<A NAME="ixAAG"></A>
Display version information and exit
<DT><B>-M</B> <I>machine</I><DD>
<A NAME="ixAAH"></A>
Select the emulated <I>machine</I> (<TT>&quot;-M ?&quot;</TT> for list)
<DT><B>-cpu</B> <I>model</I><DD>
<A NAME="ixAAI"></A>
Select <FONT SIZE="-1">CPU</FONT> model (-cpu ? for list and additional feature selection)
<DT><B>-smp</B> <I>n</I><B>[,cores=</B><I>cores</I><B>][,threads=</B><I>threads</I><B>][,sockets=</B><I>sockets</I><B>][,maxcpus=</B><I>maxcpus</I><B>]</B><DD>
<A NAME="ixAAJ"></A>
Simulate an <FONT SIZE="-1">SMP</FONT> system with <I>n</I> CPUs. On the <FONT SIZE="-1">PC</FONT> target, up to 255
CPUs are supported. On Sparc32 target, Linux limits the number of usable CPUs
to 4.
For the <FONT SIZE="-1">PC</FONT> target, the number of <I>cores</I> per socket, the number
of <I>threads</I> per cores and the total number of <I>sockets</I> can be
specified. Missing values will be computed. If any on the three values is
given, the total number of CPUs <I>n</I> can be omitted. <I>maxcpus</I>
specifies the maximum number of hotpluggable CPUs.
<DT><B>-numa</B> <I>opts</I><DD>
<A NAME="ixAAK"></A>
Simulate a multi node <FONT SIZE="-1">NUMA</FONT> system. If mem and cpus are omitted, resources
are split equally.
<DT><B>-fda</B> <I>file</I><DD>
<A NAME="ixAAL"></A>

<DT><B>-fdb</B> <I>file</I><DD>
<A NAME="ixAAM"></A>

Use <I>file</I> as floppy disk 0/1 image. You can
use the host floppy by using <I>/dev/fd0</I> as filename.
<DT><B>-hda</B> <I>file</I><DD>
<A NAME="ixAAN"></A>

<DT><B>-hdb</B> <I>file</I><DD>
<A NAME="ixAAO"></A>
<DT><B>-hdc</B> <I>file</I><DD>
<A NAME="ixAAP"></A>
<DT><B>-hdd</B> <I>file</I><DD>
<A NAME="ixAAQ"></A>

Use <I>file</I> as hard disk 0, 1, 2 or 3 image.
<DT><B>-cdrom</B> <I>file</I><DD>
<A NAME="ixAAR"></A>
Use <I>file</I> as CD-ROM image (you cannot use <B>-hdc</B> and
<B>-cdrom</B> at the same time). You can use the host CD-ROM by
using <I>/dev/cdrom</I> as filename.
<DT><B>-drive</B> <I>option</I><B>[,</B><I>option</I><B>[,</B><I>option</I><B>[,...]]]</B><DD>
<A NAME="ixAAS"></A>
Define a new drive. Valid options are:
<DL COMPACT><DT><DD>
<DL COMPACT>
<DT><B>file=</B><I>file</I><DD>
<A NAME="ixAAT"></A>
This option defines which disk image to use with
this drive. If the filename contains comma, you must double it
(for instance, ``file=my,,file'' to use file ``my,file'').
<DT><B>if=</B><I>interface</I><DD>
<A NAME="ixAAU"></A>
This option defines on which type on interface the drive is connected.
Available types are: ide, scsi, sd, mtd, floppy, pflash, virtio.
<DT><B>bus=</B><I>bus</I><B>,unit=</B><I>unit</I><DD>
<A NAME="ixAAV"></A>
These options define where is connected the drive by defining the bus number and
the unit id.
<DT><B>index=</B><I>index</I><DD>
<A NAME="ixAAW"></A>
This option defines where is connected the drive by using an index in the list
of available connectors of a given interface type.
<DT><B>media=</B><I>media</I><DD>
<A NAME="ixAAX"></A>
This option defines the type of the media: disk or cdrom.
<DT><B>cyls=</B><I>c</I><B>,heads=</B><I>h</I><B>,secs=</B><I>s</I><B>[,trans=</B><I>t</I><B>]</B><DD>
<A NAME="ixAAY"></A>
These options have the same definition as they have in <B>-hdachs</B>.
<DT><B>snapshot=</B><I>snapshot</I><DD>
<A NAME="ixAAZ"></A>
<I>snapshot</I> is ``on'' or ``off'' and allows to enable snapshot for given drive (see <B>-snapshot</B>).
<DT><B>cache=</B><I>cache</I><DD>
<A NAME="ixABA"></A>
<I>cache</I> is ``none'', ``writeback'', ``unsafe'', or ``writethrough'' and controls how the host cache is used to access block data.
<DT><B>aio=</B><I>aio</I><DD>
<A NAME="ixABB"></A>
<I>aio</I> is ``threads'', or ``native'' and selects between pthread based disk I/O and native Linux <FONT SIZE="-1">AIO</FONT>.
<DT><B>format=</B><I>format</I><DD>
<A NAME="ixABC"></A>
Specify which disk <I>format</I> will be used rather than detecting
the format.  Can be used to specifiy format=raw to avoid interpreting
an untrusted format header.
<DT><B>serial=</B><I>serial</I><DD>
<A NAME="ixABD"></A>
This option specifies the serial number to assign to the device.
<DT><B>addr=</B><I>addr</I><DD>
<A NAME="ixABE"></A>
Specify the controller's <FONT SIZE="-1">PCI</FONT> address (if=virtio only).
<DT><B>copy-on-read=</B><I>copy-on-read</I><DD>
<A NAME="ixABF"></A>
<I>copy-on-read</I> is ``on'' or ``off'' and enables whether to copy read backing
file sectors into the image file.
</DL>
</DL>

<DL COMPACT><DT><DD>


<P>


By default, writethrough caching is used for all block device.  This means that
the host page cache will be used to read and write data but write notification
will be sent to the guest only when the data has been reported as written by
the storage subsystem.


<P>


Writeback caching will report data writes as completed as soon as the data is
present in the host page cache.  This is safe as long as you trust your host.
If your host crashes or loses power, then the guest may experience data
corruption.  When using the <B>-snapshot</B> option, writeback caching is
used by default.


<P>


The host page cache can be avoided entirely with <B>cache=none</B>.  This will
attempt to do disk <FONT SIZE="-1">IO</FONT> directly to the guests memory.  <FONT SIZE="-1">QEMU</FONT> may still perform
an internal copy of the data.


<P>


Some block drivers perform badly with <B>cache=writethrough</B>, most notably,
qcow2.  If performance is more important than correctness,
<B>cache=writeback</B> should be used with qcow2.


<P>


In case you don't care about data integrity over host failures, use
cache=unsafe. This option tells qemu that it never needs to write any data
to the disk but can instead keeps things in cache. If anything goes wrong,
like your host losing power, the disk storage getting disconnected accidently,
etc. you're image will most probably be rendered unusable.


<P>


Copy-on-read avoids accessing the same backing file sectors repeatedly and is
useful when the backing file is over a slow network.  By default copy-on-read
is off.


<P>


Instead of <B>-cdrom</B> you can use:


<P>




<PRE>
        qemu -drive file=file,index=2,media=cdrom

</PRE>




<P>


Instead of <B>-hda</B>, <B>-hdb</B>, <B>-hdc</B>, <B>-hdd</B>, you can
use:


<P>




<PRE>
        qemu -drive file=file,index=0,media=disk
        qemu -drive file=file,index=1,media=disk
        qemu -drive file=file,index=2,media=disk
        qemu -drive file=file,index=3,media=disk

</PRE>




<P>


You can connect a <FONT SIZE="-1">CDROM</FONT> to the slave of ide0:


<P>




<PRE>
        qemu -drive file=file,if=ide,index=1,media=cdrom

</PRE>




<P>


If you don't specify the ``file='' argument, you define an empty drive:


<P>




<PRE>
        qemu -drive if=ide,index=1,media=cdrom

</PRE>




<P>


You can connect a <FONT SIZE="-1">SCSI</FONT> disk with unit <FONT SIZE="-1">ID</FONT> 6 on the bus #0:


<P>




<PRE>
        qemu -drive file=file,if=scsi,bus=0,unit=6

</PRE>




<P>


Instead of <B>-fda</B>, <B>-fdb</B>, you can use:


<P>




<PRE>
        qemu -drive file=file,index=0,if=floppy
        qemu -drive file=file,index=1,if=floppy

</PRE>




<P>


By default, <I>interface</I> is ``ide'' and <I>index</I> is automatically
incremented:


<P>




<PRE>
        qemu -drive file=a -drive file=b&quot;

</PRE>




<P>


is interpreted like:


<P>




<PRE>
        qemu -hda a -hdb b

</PRE>


</DL>

<DT><B>-global</B> <I>driver</I><B>.</B><I>prop</I><B>=</B><I>value</I><DD>
<A NAME="ixABG"></A>
Set default value of <I>driver</I>'s property <I>prop</I> to <I>value</I>, e.g.:


<P>




<PRE>
        qemu -global ide-drive.physical_block_size=4096 -drive file=file,if=ide,index=0,media=disk

</PRE>




<P>


In particular, you can use this to set driver properties for devices which are
created automatically by the machine model. To create a device which is not
created automatically and set properties on it, use -<B>device</B>.
<DT><B>-mtdblock</B> <I>file</I><DD>
<A NAME="ixABH"></A>
Use <I>file</I> as on-board Flash memory image.
<DT><B>-sd</B> <I>file</I><DD>
<A NAME="ixABI"></A>
Use <I>file</I> as SecureDigital card image.
<DT><B>-pflash</B> <I>file</I><DD>
<A NAME="ixABJ"></A>
Use <I>file</I> as a parallel flash image.
<DT><B>-boot [order=</B><I>drives</I><B>][,once=</B><I>drives</I><B>][,menu=on|off]</B><DD>
<A NAME="ixABK"></A>
Specify boot order <I>drives</I> as a string of drive letters. Valid
drive letters depend on the target achitecture. The x86 <FONT SIZE="-1">PC</FONT> uses: a, b
(floppy 1 and 2), c (first hard disk), d (first CD-ROM), n-p (Etherboot
from network adapter 1-4), hard disk boot is the default. To apply a
particular boot order only on the first startup, specify it via
<B>once</B>.


<P>


Interactive boot menus/prompts can be enabled via <B>menu=on</B> as far
as firmware/BIOS supports them. The default is non-interactive boot.


<P>




<PRE>
        # try to boot from network first, then from hard disk
        qemu -boot order=nc
        # boot from CD-ROM first, switch back to default order after reboot
        qemu -boot once=d

</PRE>




<P>


Note: The legacy format '-boot <I>drives</I>' is still supported but its
use is discouraged as it may be removed from future versions.
<DT><B>-snapshot</B><DD>
<A NAME="ixABL"></A>
Write to temporary files instead of disk image files. In this case,
the raw disk image you use is not written back. You can however force
the write back by pressing <B>C-a s</B>.
<DT><B>-m</B> <I>megs</I><DD>
<A NAME="ixABM"></A>
Set virtual <FONT SIZE="-1">RAM</FONT> size to <I>megs</I> megabytes. Default is 128 MiB.  Optionally,
a suffix of ``M'' or ``G'' can be used to signify a value in megabytes or
gigabytes respectively.
<DT><B>-redhat-disable-KSM</B><DD>
<A NAME="ixABN"></A>
Disable <FONT SIZE="-1">KSM</FONT> on the virtual <FONT SIZE="-1">RAM</FONT>.
<DT><B>-k</B> <I>language</I><DD>
<A NAME="ixABO"></A>
Use keyboard layout <I>language</I> (for example <TT>&quot;fr&quot;</TT> for
French). This option is only needed where it is not easy to get raw <FONT SIZE="-1">PC</FONT>
keycodes (e.g. on Macs, with some X11 servers or with a <FONT SIZE="-1">VNC</FONT>
display). You don't normally need to use it on PC/Linux or PC/Windows
hosts.


<P>


The available layouts are:


<P>




<PRE>
        ar  de-ch  es  fo     fr-ca  hu  ja  mk     no  pt-br  sv
        da  en-gb  et  fr     fr-ch  is  lt  nl     pl  ru     th
        de  en-us  fi  fr-be  hr     it  lv  nl-be  pt  sl     tr

</PRE>




<P>


The default is <TT>&quot;en-us&quot;</TT>.
<DT><B>-audio-help</B><DD>
<A NAME="ixABP"></A>
Will show the audio subsystem help: list of drivers, tunable
parameters.
<DT><B>-soundhw</B> <I>card1</I><B>[,</B><I>card2</I><B>,...] or -soundhw all</B><DD>
<A NAME="ixABQ"></A>
Enable audio and selected sound hardware. Use ? to print all
available sound hardware.


<P>




<PRE>
        qemu -soundhw sb16,adlib disk.img
        qemu -soundhw es1370 disk.img
        qemu -soundhw ac97 disk.img
        qemu -soundhw hda disk.img
        qemu -soundhw all disk.img
        qemu -soundhw ?

</PRE>




<P>


Note that Linux's i810_audio <FONT SIZE="-1">OSS</FONT> kernel (for <FONT SIZE="-1">AC97</FONT>) module might
require manually specifying clocking.


<P>




<PRE>
        modprobe i810_audio clocking=48000

</PRE>


</DL>
<P>

<FONT SIZE="-1">USB</FONT> options:
<DL COMPACT>
<DT><B>-usb</B><DD>
<A NAME="ixABR"></A>
Enable the <FONT SIZE="-1">USB</FONT> driver (will be the default soon)
<DT><B>-usbdevice</B> <I>devname</I><DD>
<A NAME="ixABS"></A>
Add the <FONT SIZE="-1">USB</FONT> device <I>devname</I>.
<DL COMPACT><DT><DD>
<DL COMPACT>
<DT><B>mouse</B><DD>
<A NAME="ixABT"></A>
Virtual Mouse. This will override the <FONT SIZE="-1">PS/2</FONT> mouse emulation when activated.
<DT><B>tablet</B><DD>
<A NAME="ixABU"></A>
Pointer device that uses absolute coordinates (like a touchscreen). This
means qemu is able to report the mouse position without having to grab the
mouse. Also overrides the <FONT SIZE="-1">PS/2</FONT> mouse emulation when activated.
<DT><B>disk:[format=</B><I>format</I><B>]:</B><I>file</I><DD>
<A NAME="ixABV"></A>
Mass storage device based on file. The optional <I>format</I> argument
will be used rather than detecting the format. Can be used to specifiy
<TT>&quot;format=raw&quot;</TT> to avoid interpreting an untrusted format header.
<DT><B>host:</B><I>bus</I><B>.</B><I>addr</I><DD>
<A NAME="ixABW"></A>
Pass through the host device identified by <I>bus</I>.<I>addr</I> (Linux only).
<DT><B>host:</B><I>vendor_id</I><B>:</B><I>product_id</I><DD>
<A NAME="ixABX"></A>
Pass through the host device identified by <I>vendor_id</I>:<I>product_id</I>
(Linux only).
<DT><B>serial:[vendorid=</B><I>vendor_id</I><B>][,productid=</B><I>product_id</I><B>]:</B><I>dev</I><DD>
<A NAME="ixABY"></A>
Serial converter to host character device <I>dev</I>, see <TT>&quot;-serial&quot;</TT> for the
available devices.
<DT><B>braille</B><DD>
<A NAME="ixABZ"></A>
Braille device.  This will use BrlAPI to display the braille output on a real
or fake device.
<DT><B>net:</B><I>options</I><DD>
<A NAME="ixACA"></A>
Network adapter that supports <FONT SIZE="-1">CDC</FONT> ethernet and <FONT SIZE="-1">RNDIS</FONT> protocols.
</DL>
</DL>

<DL COMPACT><DT><DD>
</DL>

<DT><B>-device</B> <I>driver</I><B>[,</B><I>prop</I><B>[=</B><I>value</I><B>][,...]]</B><DD>
<A NAME="ixACB"></A>
Add device <I>driver</I>.  <I>prop</I>=<I>value</I> sets driver
properties.  Valid properties depend on the driver.  To get help on
possible drivers and properties, use <TT>&quot;-device ?&quot;</TT> and
<TT>&quot;-device </TT>driver<TT>,?&quot;</TT>.
<DT><B>-name</B> <I>name</I><DD>
<A NAME="ixACC"></A>
Sets the <I>name</I> of the guest.
This name will be displayed in the <FONT SIZE="-1">SDL</FONT> window caption.
The <I>name</I> will also be used for the <FONT SIZE="-1">VNC</FONT> server.
Also optionally set the top visible process name in Linux.
<DT><B>-uuid</B> <I>uuid</I><DD>
<A NAME="ixACD"></A>
Set system <FONT SIZE="-1">UUID</FONT>.
</DL>
<P>

Display options:
<DL COMPACT>
<DT><B>-nographic</B><DD>
<A NAME="ixACE"></A>
Normally, <FONT SIZE="-1">QEMU</FONT> uses <FONT SIZE="-1">SDL</FONT> to display the <FONT SIZE="-1">VGA</FONT> output. With this option,
you can totally disable graphical output so that <FONT SIZE="-1">QEMU</FONT> is a simple
command line application. The emulated serial port is redirected on
the console. Therefore, you can still use <FONT SIZE="-1">QEMU</FONT> to debug a Linux kernel
with a serial console.
<DT><B>-curses</B><DD>
<A NAME="ixACF"></A>
Normally, <FONT SIZE="-1">QEMU</FONT> uses <FONT SIZE="-1">SDL</FONT> to display the <FONT SIZE="-1">VGA</FONT> output.  With this option,
<FONT SIZE="-1">QEMU</FONT> can display the <FONT SIZE="-1">VGA</FONT> output when in text mode using a
curses/ncurses interface.  Nothing is displayed in graphical mode.
<DT><B>-no-frame</B><DD>
<A NAME="ixACG"></A>
Do not use decorations for <FONT SIZE="-1">SDL</FONT> windows and start them using the whole
available screen space. This makes the using <FONT SIZE="-1">QEMU</FONT> in a dedicated desktop
workspace more convenient.
<DT><B>-alt-grab</B><DD>
<A NAME="ixACH"></A>
Use Ctrl-Alt-Shift to grab mouse (instead of Ctrl-Alt).
<DT><B>-ctrl-grab</B><DD>
<A NAME="ixACI"></A>
Use Right-Ctrl to grab mouse (instead of Ctrl-Alt).
<DT><B>-no-quit</B><DD>
<A NAME="ixACJ"></A>
Disable <FONT SIZE="-1">SDL</FONT> window close capability.
<DT><B>-sdl</B><DD>
<A NAME="ixACK"></A>
Enable <FONT SIZE="-1">SDL</FONT>.
<DT><B>-spice</B> <I>option</I><B>[,</B><I>option</I><B>[,...]]</B><DD>
<A NAME="ixACL"></A>
Enable the spice remote desktop protocol. Valid options are
<DL COMPACT><DT><DD>
<DL COMPACT>
<DT><B>port=&lt;nr&gt;</B><DD>
<A NAME="ixACM"></A>
Set the <FONT SIZE="-1">TCP</FONT> port spice is listening on for plaintext channels.
<DT><B>addr=&lt;addr&gt;</B><DD>
<A NAME="ixACN"></A>
Set the <FONT SIZE="-1">IP</FONT> address spice is listening on.  Default is any address.
<DT><B>ipv4</B><DD>
<A NAME="ixACO"></A>

<DT><B>ipv6</B><DD>
<A NAME="ixACP"></A>

Force using the specified <FONT SIZE="-1">IP</FONT> version.
<DT><B>password=&lt;secret&gt;</B><DD>
<A NAME="ixACQ"></A>
Set the password you need to authenticate.
<DT><B>disable-ticketing</B><DD>
<A NAME="ixACR"></A>
Allow client connects without authentication.
<DT><B>disable-copy-paste</B><DD>
<A NAME="ixACS"></A>
Disable copy paste between the client and the guest.
<DT><B>tls-port=&lt;nr&gt;</B><DD>
<A NAME="ixACT"></A>
Set the <FONT SIZE="-1">TCP</FONT> port spice is listening on for encrypted channels.
<DT><B>x509-dir=&lt;dir&gt;</B><DD>
<A NAME="ixACU"></A>
Set the x509 file directory. Expects same filenames as -vnc <TT>$display</TT>,x509=$dir
<DT><B>x509-key-file=&lt;file&gt;</B><DD>
<A NAME="ixACV"></A>

<DT><B>x509-key-password=&lt;file&gt;</B><DD>
<A NAME="ixACW"></A>
<DT><B>x509-cert-file=&lt;file&gt;</B><DD>
<A NAME="ixACX"></A>
<DT><B>x509-cacert-file=&lt;file&gt;</B><DD>
<A NAME="ixACY"></A>
<DT><B>x509-dh-key-file=&lt;file&gt;</B><DD>
<A NAME="ixACZ"></A>

The x509 file names can also be configured individually.
<DT><B>tls-ciphers=&lt;list&gt;</B><DD>
<A NAME="ixADA"></A>
Specify which ciphers to use.
<DT><B>tls-channel=[main|display|cursor|inputs|record|playback]</B><DD>
<A NAME="ixADB"></A>

<DT><B>plaintext-channel=[main|display|cursor|inputs|record|playback]</B><DD>
<A NAME="ixADC"></A>

Force specific channel to be used with or without <FONT SIZE="-1">TLS</FONT> encryption.  The
options can be specified multiple times to configure multiple
channels.  The special name ``default'' can be used to set the default
mode.  For channels which are not explicitly forced into one mode the
spice client is allowed to pick tls/plaintext as he pleases.
<DT><B>image-compression=[auto_glz|auto_lz|quic|glz|lz|off]</B><DD>
<A NAME="ixADD"></A>
Configure image compression (lossless).
Default is auto_glz.
<DT><B>jpeg-wan-compression=[auto|never|always]</B><DD>
<A NAME="ixADE"></A>

<DT><B>zlib-glz-wan-compression=[auto|never|always]</B><DD>
<A NAME="ixADF"></A>

Configure wan image compression (lossy for slow links).
Default is auto.
<DT><B>streaming-video=[off|all|filter]</B><DD>
<A NAME="ixADG"></A>
Configure video stream detection.  Default is filter.
<DT><B>agent-mouse=[on|off]</B><DD>
<A NAME="ixADH"></A>
Enable/disable passing mouse events via vdagent.  Default is on.
<DT><B>playback-compression=[on|off]</B><DD>
<A NAME="ixADI"></A>
Enable/disable audio stream compression (using celt 0.5.1).  Default is on.
</DL>
</DL>

<DL COMPACT><DT><DD>
</DL>

<DT><B>-portrait</B><DD>
<A NAME="ixADJ"></A>
Rotate graphical output 90 deg left (only <FONT SIZE="-1">PXA</FONT> <FONT SIZE="-1">LCD</FONT>).
<DT><B>-vga</B> <I>type</I><DD>
<A NAME="ixADK"></A>
Select type of <FONT SIZE="-1">VGA</FONT> card to emulate. Valid values for <I>type</I> are
<DL COMPACT><DT><DD>
<DL COMPACT>
<DT><B>cirrus</B><DD>
<A NAME="ixADL"></A>
Cirrus Logic <FONT SIZE="-1">GD5446</FONT> Video card. All Windows versions starting from
Windows 95 should recognize and use this graphic card. For optimal
performances, use 16 bit color depth in the guest and the host <FONT SIZE="-1">OS</FONT>.
(This one is the default)
<DT><B>std</B><DD>
<A NAME="ixADM"></A>
Standard <FONT SIZE="-1">VGA</FONT> card with Bochs <FONT SIZE="-1">VBE</FONT> extensions.  If your guest <FONT SIZE="-1">OS</FONT>
supports the <FONT SIZE="-1">VESA</FONT> 2.0 <FONT SIZE="-1">VBE</FONT> extensions (e.g. Windows <FONT SIZE="-1">XP</FONT>) and if you want
to use high resolution modes (&gt;= 1280x1024x16) then you should use
this option.
<DT><B>vmware</B><DD>
<A NAME="ixADN"></A>
VMWare SVGA-II compatible adapter. Use it if you have sufficiently
recent XFree86/XOrg server or Windows guest with a driver for this
card.
<DT><B>qxl</B><DD>
<A NAME="ixADO"></A>
<FONT SIZE="-1">QXL</FONT> paravirtual graphic card.  It is <FONT SIZE="-1">VGA</FONT> compatible (including <FONT SIZE="-1">VESA</FONT>
2.0 <FONT SIZE="-1">VBE</FONT> support).  Works best with qxl guest drivers installed though.
Recommended choice when using the spice protocol.
<DT><B>none</B><DD>
<A NAME="ixADP"></A>
Disable <FONT SIZE="-1">VGA</FONT> card.
</DL>
</DL>

<DL COMPACT><DT><DD>
</DL>

<DT><B>-full-screen</B><DD>
<A NAME="ixADQ"></A>
Start in full screen.
<DT><B>-vnc</B> <I>display</I><B>[,</B><I>option</I><B>[,</B><I>option</I><B>[,...]]]</B><DD>
<A NAME="ixADR"></A>
Normally, <FONT SIZE="-1">QEMU</FONT> uses <FONT SIZE="-1">SDL</FONT> to display the <FONT SIZE="-1">VGA</FONT> output.  With this option,
you can have <FONT SIZE="-1">QEMU</FONT> listen on <FONT SIZE="-1">VNC</FONT> display <I>display</I> and redirect the <FONT SIZE="-1">VGA</FONT>
display over the <FONT SIZE="-1">VNC</FONT> session.  It is very useful to enable the usb
tablet device when using this option (option <B>-usbdevice
tablet</B>). When using the <FONT SIZE="-1">VNC</FONT> display, you must use the <B>-k</B>
parameter to set the keyboard layout if you are not using en-us. Valid
syntax for the <I>display</I> is
<DL COMPACT><DT><DD>
<DL COMPACT>
<DT><I>host</I><B>:</B><I>d</I><DD>
<A NAME="ixADS"></A>
<FONT SIZE="-1">TCP</FONT> connections will only be allowed from <I>host</I> on display <I>d</I>.
By convention the <FONT SIZE="-1">TCP</FONT> port is 5900+<I>d</I>. Optionally, <I>host</I> can
be omitted in which case the server will accept connections from any host.
<DT><B>unix:</B><I>path</I><DD>
<A NAME="ixADT"></A>
Connections will be allowed over <FONT SIZE="-1">UNIX</FONT> domain sockets where <I>path</I> is the
location of a unix socket to listen for connections on.
<DT><B>none</B><DD>
<A NAME="ixADU"></A>
<FONT SIZE="-1">VNC</FONT> is initialized but not started. The monitor <TT>&quot;change&quot;</TT> command
can be used to later start the <FONT SIZE="-1">VNC</FONT> server.
</DL>
</DL>

<DL COMPACT><DT><DD>


<P>


Following the <I>display</I> value there may be one or more <I>option</I> flags
separated by commas. Valid options are
<DL COMPACT>
<DT><B>reverse</B><DD>
<A NAME="ixADV"></A>
Connect to a listening <FONT SIZE="-1">VNC</FONT> client via a ``reverse'' connection. The
client is specified by the <I>display</I>. For reverse network
connections (<I>host</I>:<I>d</I>,<TT>&quot;reverse&quot;</TT>), the <I>d</I> argument
is a <FONT SIZE="-1">TCP</FONT> port number, not a display number.
<DT><B>password</B><DD>
<A NAME="ixADW"></A>
Require that password based authentication is used for client connections.
The password must be set separately using the <TT>&quot;change&quot;</TT> command in the
<B>pcsys_monitor</B>
<DT><B>tls</B><DD>
<A NAME="ixADX"></A>
Require that client use <FONT SIZE="-1">TLS</FONT> when communicating with the <FONT SIZE="-1">VNC</FONT> server. This
uses anonymous <FONT SIZE="-1">TLS</FONT> credentials so is susceptible to a man-in-the-middle
attack. It is recommended that this option be combined with either the
<B>x509</B> or <B>x509verify</B> options.
<DT><B>x509=</B><I>/path/to/certificate/dir</I><DD>
<A NAME="ixADY"></A>
Valid if <B>tls</B> is specified. Require that x509 credentials are used
for negotiating the <FONT SIZE="-1">TLS</FONT> session. The server will send its x509 certificate
to the client. It is recommended that a password be set on the <FONT SIZE="-1">VNC</FONT> server
to provide authentication of the client when this is used. The path following
this option specifies where the x509 certificates are to be loaded from.
See the <B>vnc_security</B> section for details on generating certificates.
<DT><B>x509verify=</B><I>/path/to/certificate/dir</I><DD>
<A NAME="ixADZ"></A>
Valid if <B>tls</B> is specified. Require that x509 credentials are used
for negotiating the <FONT SIZE="-1">TLS</FONT> session. The server will send its x509 certificate
to the client, and request that the client send its own x509 certificate.
The server will validate the client's certificate against the <FONT SIZE="-1">CA</FONT> certificate,
and reject clients when validation fails. If the certificate authority is
trusted, this is a sufficient authentication mechanism. You may still wish
to set a password on the <FONT SIZE="-1">VNC</FONT> server as a second authentication layer. The
path following this option specifies where the x509 certificates are to
be loaded from. See the <B>vnc_security</B> section for details on generating
certificates.
<DT><B>sasl</B><DD>
<A NAME="ixAEA"></A>
Require that the client use <FONT SIZE="-1">SASL</FONT> to authenticate with the <FONT SIZE="-1">VNC</FONT> server.
The exact choice of authentication method used is controlled from the
system / user's <FONT SIZE="-1">SASL</FONT> configuration file for the 'qemu' service. This
is typically found in /etc/sasl2/qemu.conf. If running <FONT SIZE="-1">QEMU</FONT> as an
unprivileged user, an environment variable <FONT SIZE="-1">SASL_CONF_PATH</FONT> can be used
to make it search alternate locations for the service config.
While some <FONT SIZE="-1">SASL</FONT> auth methods can also provide data encryption (eg <FONT SIZE="-1">GSSAPI</FONT>),
it is recommended that <FONT SIZE="-1">SASL</FONT> always be combined with the 'tls' and
'x509' settings to enable use of <FONT SIZE="-1">SSL</FONT> and server certificates. This
ensures a data encryption preventing compromise of authentication
credentials. See the <B>vnc_security</B> section for details on using
<FONT SIZE="-1">SASL</FONT> authentication.
<DT><B>acl</B><DD>
<A NAME="ixAEB"></A>
Turn on access control lists for checking of the x509 client certificate
and <FONT SIZE="-1">SASL</FONT> party. For x509 certs, the <FONT SIZE="-1">ACL</FONT> check is made against the
certificate's distinguished name. This is something that looks like
<TT>&quot;C=GB,O=ACME,L=Boston,CN=bob&quot;</TT>. For <FONT SIZE="-1">SASL</FONT> party, the <FONT SIZE="-1">ACL</FONT> check is
made against the username, which depending on the <FONT SIZE="-1">SASL</FONT> plugin, may
include a realm component, eg <TT>&quot;bob&quot;</TT> or <TT>&quot;<A HREF="mailto:bob@EXAMPLE.COM">bob@EXAMPLE.COM</A>&quot;</TT>.
When the <B>acl</B> flag is set, the initial access list will be
empty, with a <TT>&quot;deny&quot;</TT> policy. Thus no one will be allowed to
use the <FONT SIZE="-1">VNC</FONT> server until the ACLs have been loaded. This can be
achieved using the <TT>&quot;acl&quot;</TT> monitor command.
<DT><B>share=[allow-exclusive|force-shared|ignore]</B><DD>
<A NAME="ixAEC"></A>
Set display sharing policy.  'allow-exclusive' allows clients to ask
for exclusive access.  As suggested by the rfb spec this is
implemented by dropping other connections.  Connecting multiple
clients in parallel requires all clients asking for a shared session
(vncviewer: -shared switch).  This is the default.  'force-shared'
disables exclusive client access.  Useful for shared desktop sessions,
where you don't want someone forgetting specify -shared disconnect
everybody else.  'ignore' completely ignores the shared flag and
allows everybody connect unconditionally.  Doesn't conform to the rfb
spec but is traditional qemu behavior.
</DL>
</DL>

<DL COMPACT><DT><DD>
</DL>

</DL>
<P>

i386 target only:
<DL COMPACT>
<DT><B>-win2k-hack</B><DD>
<A NAME="ixAED"></A>
Use it when installing Windows 2000 to avoid a disk full bug. After
Windows 2000 is installed, you no longer need this option (this option
slows down the <FONT SIZE="-1">IDE</FONT> transfers).
<DT><B>-no-fd-bootchk</B><DD>
<A NAME="ixAEE"></A>
Disable boot signature checking for floppy disks in Bochs <FONT SIZE="-1">BIOS</FONT>. It may
be needed to boot from old floppy disks.
<DT><B>-no-acpi</B><DD>
<A NAME="ixAEF"></A>
Disable <FONT SIZE="-1">ACPI</FONT> (Advanced Configuration and Power Interface) support. Use
it if your guest <FONT SIZE="-1">OS</FONT> complains about <FONT SIZE="-1">ACPI</FONT> problems (<FONT SIZE="-1">PC</FONT> target machine
only).
<DT><B>-no-hpet</B><DD>
<A NAME="ixAEG"></A>
Disable <FONT SIZE="-1">HPET</FONT> support.
<DT><B>-balloon none</B><DD>
<A NAME="ixAEH"></A>
Disable balloon device.
<DT><B>-balloon virtio[,addr=</B><I>addr</I><B>]</B><DD>
<A NAME="ixAEI"></A>
Enable virtio balloon device (default), optionally with <FONT SIZE="-1">PCI</FONT> address
<I>addr</I>.
<DT><B>-acpitable [sig=</B><I>str</I><B>][,rev=</B><I>n</I><B>][,oem_id=</B><I>str</I><B>][,oem_table_id=</B><I>str</I><B>][,oem_rev=</B><I>n</I><B>] [,asl_compiler_id=</B><I>str</I><B>][,asl_compiler_rev=</B><I>n</I><B>][,data=</B><I>file1</I><B>[:</B><I>file2</I><B>]...]</B><DD>
<A NAME="ixAEJ"></A>
Add <FONT SIZE="-1">ACPI</FONT> table with specified header fields and context from specified files.
<DT><B>-smbios file=</B><I>binary</I><DD>
<A NAME="ixAEK"></A>
Load <FONT SIZE="-1">SMBIOS</FONT> entry from binary file.
<DT><B>-smbios type=0[,vendor=</B><I>str</I><B>][,version=</B><I>str</I><B>][,date=</B><I>str</I><B>][,release=</B><I>%d.%d</I><B>]</B><DD>


<A NAME="ixAEL"></A>
Specify <FONT SIZE="-1">SMBIOS</FONT> type 0 fields
<DT><B>-smbios type=1[,manufacturer=</B><I>str</I><B>][,product=</B><I>str</I><B>][,version=</B><I>str</I><B>][,serial=</B><I>str</I><B>][,uuid=</B><I>uuid</I><B>][,sku=</B><I>str</I><B>][,family=</B><I>str</I><B>]</B><DD>
<A NAME="ixAEM"></A>
Specify <FONT SIZE="-1">SMBIOS</FONT> type 1 fields
</DL>
<P>

Network options:
<DL COMPACT>
<DT><B>-net nic[,vlan=</B><I>n</I><B>][,macaddr=</B><I>mac</I><B>][,model=</B><I>type</I><B>][,name=</B><I>name</I><B>][,addr=</B><I>addr</I><B>][,vectors=</B><I>v</I><B>]</B><DD>
<A NAME="ixAEN"></A>
Create a new Network Interface Card and connect it to <FONT SIZE="-1">VLAN</FONT> <I>n</I> (<I>n</I>
= 0 is the default). The <FONT SIZE="-1">NIC</FONT> is an e1000 by default on the <FONT SIZE="-1">PC</FONT>
target. Optionally, the <FONT SIZE="-1">MAC</FONT> address can be changed to <I>mac</I>, the
device address set to <I>addr</I> (<FONT SIZE="-1">PCI</FONT> cards only),
and a <I>name</I> can be assigned for use in monitor commands.
Optionally, for <FONT SIZE="-1">PCI</FONT> cards, you can specify the number <I>v</I> of MSI-X vectors
that the card should have; this option currently only affects virtio cards; set
<I>v</I> = 0 to disable MSI-X. If no <B>-net</B> option is specified, a single
<FONT SIZE="-1">NIC</FONT> is created.  Qemu can emulate several different models of network card.
Valid values for <I>type</I> are
<TT>&quot;virtio&quot;</TT>, <TT>&quot;i82551&quot;</TT>, <TT>&quot;i82557b&quot;</TT>, <TT>&quot;i82559er&quot;</TT>,
<TT>&quot;ne2k_pci&quot;</TT>, <TT>&quot;ne2k_isa&quot;</TT>, <TT>&quot;pcnet&quot;</TT>, <TT>&quot;rtl8139&quot;</TT>,
<TT>&quot;e1000&quot;</TT>, <TT>&quot;smc91c111&quot;</TT>, <TT>&quot;lance&quot;</TT> and <TT>&quot;mcf_fec&quot;</TT>.
Not all devices are supported on all targets.  Use -net nic,model=?
for a list of available devices for your target.
<DT><B>-net user[,</B><I>option</I><B>][,</B><I>option</I><B>][,...]</B><DD>
<A NAME="ixAEO"></A>
Use the user mode network stack which requires no administrator
privilege to run. Valid options are:
<DL COMPACT><DT><DD>
<DL COMPACT>
<DT><B>vlan=</B><I>n</I><DD>
<A NAME="ixAEP"></A>
Connect user mode stack to <FONT SIZE="-1">VLAN</FONT> <I>n</I> (<I>n</I> = 0 is the default).
<DT><B>name=</B><I>name</I><DD>
<A NAME="ixAEQ"></A>
Assign symbolic name for use in monitor commands.
<DT><B>net=</B><I>addr</I><B>[/</B><I>mask</I><B>]</B><DD>
<A NAME="ixAER"></A>
Set <FONT SIZE="-1">IP</FONT> network address the guest will see. Optionally specify the netmask,
either in the form a.b.c.d or as number of valid top-most bits. Default is
10.0.2.0/8.
<DT><B>host=</B><I>addr</I><DD>
<A NAME="ixAES"></A>
Specify the guest-visible address of the host. Default is the 2nd <FONT SIZE="-1">IP</FONT> in the
guest network, i.e. x.x.x.2.
<DT><B>restrict=y|yes|n|no</B><DD>
<A NAME="ixAET"></A>
If this options is enabled, the guest will be isolated, i.e. it will not be
able to contact the host and no guest <FONT SIZE="-1">IP</FONT> packets will be routed over the host
to the outside. This option does not affect explicitly set forwarding rule.
<DT><B>hostname=</B><I>name</I><DD>
<A NAME="ixAEU"></A>
Specifies the client hostname reported by the builtin <FONT SIZE="-1">DHCP</FONT> server.
<DT><B>dhcpstart=</B><I>addr</I><DD>
<A NAME="ixAEV"></A>
Specify the first of the 16 IPs the built-in <FONT SIZE="-1">DHCP</FONT> server can assign. Default
is the 16th to 31st <FONT SIZE="-1">IP</FONT> in the guest network, i.e. x.x.x.16 to x.x.x.31.
<DT><B>dns=</B><I>addr</I><DD>
<A NAME="ixAEW"></A>
Specify the guest-visible address of the virtual nameserver. The address must
be different from the host address. Default is the 3rd <FONT SIZE="-1">IP</FONT> in the guest network,
i.e. x.x.x.3.
<DT><B>tftp=</B><I>dir</I><DD>
<A NAME="ixAEX"></A>
When using the user mode network stack, activate a built-in <FONT SIZE="-1">TFTP</FONT>
server. The files in <I>dir</I> will be exposed as the root of a <FONT SIZE="-1">TFTP</FONT> server.
The <FONT SIZE="-1">TFTP</FONT> client on the guest must be configured in binary mode (use the command
<TT>&quot;bin&quot;</TT> of the Unix <FONT SIZE="-1">TFTP</FONT> client).
<DT><B>bootfile=</B><I>file</I><DD>
<A NAME="ixAEY"></A>
When using the user mode network stack, broadcast <I>file</I> as the <FONT SIZE="-1">BOOTP</FONT>
filename. In conjunction with <B>tftp</B>, this can be used to network boot
a guest from a local directory.


<P>


Example (using pxelinux):


<P>




<PRE>
        qemu -hda linux.img -boot n -net user,tftp=/path/to/tftp/files,bootfile=/pxelinux.0

</PRE>


<DT><B>smb=</B><I>dir</I><B>[,smbserver=</B><I>addr</I><B>]</B><DD>
<A NAME="ixAEZ"></A>
When using the user mode network stack, activate a built-in <FONT SIZE="-1">SMB</FONT>
server so that Windows OSes can access to the host files in <I>dir</I>
transparently. The <FONT SIZE="-1">IP</FONT> address of the <FONT SIZE="-1">SMB</FONT> server can be set to <I>addr</I>. By
default the 4th <FONT SIZE="-1">IP</FONT> in the guest network is used, i.e. x.x.x.4.


<P>


In the guest Windows <FONT SIZE="-1">OS</FONT>, the line:


<P>




<PRE>
        10.0.2.4 smbserver

</PRE>




<P>


must be added in the file <I>C:\WINDOWS\LMHOSTS</I> (for windows 9x/Me)
or <I>C:\WINNT\SYSTEM32\DRIVERS\ETC\LMHOSTS</I> (Windows <FONT SIZE="-1">NT/2000</FONT>).


<P>


Then <I>dir</I> can be accessed in <I>\\smbserver\qemu</I>.


<P>


Note that a <FONT SIZE="-1">SAMBA</FONT> server must be installed on the host <FONT SIZE="-1">OS</FONT> in
<I>/usr/sbin/smbd</I>. <FONT SIZE="-1">QEMU</FONT> was tested successfully with smbd versions from
Red Hat 9, Fedora Core 3 and OpenSUSE 11.x.
<DT><B>hostfwd=[tcp|udp]:[</B><I>hostaddr</I><B>]:</B><I>hostport</I><B>-[</B><I>guestaddr</I><B>]:</B><I>guestport</I><DD>
<A NAME="ixAFA"></A>
Redirect incoming <FONT SIZE="-1">TCP</FONT> or <FONT SIZE="-1">UDP</FONT> connections to the host port <I>hostport</I> to
the guest <FONT SIZE="-1">IP</FONT> address <I>guestaddr</I> on guest port <I>guestport</I>. If
<I>guestaddr</I> is not specified, its value is x.x.x.15 (default first address
given by the built-in <FONT SIZE="-1">DHCP</FONT> server). By specifying <I>hostaddr</I>, the rule can
be bound to a specific host interface. If no connection type is set, <FONT SIZE="-1">TCP</FONT> is
used. This option can be given multiple times.


<P>


For example, to redirect host X11 connection from screen 1 to guest
screen 0, use the following:


<P>




<PRE>
        # on the host
        qemu -net user,hostfwd=tcp:127.0.0.1:6001-:6000 [...]
        # this host xterm should open in the guest X11 server
        xterm -display :1

</PRE>




<P>


To redirect telnet connections from host port 5555 to telnet port on
the guest, use the following:


<P>




<PRE>
        # on the host
        qemu -net user,hostfwd=tcp:5555::23 [...]
        telnet localhost 5555

</PRE>




<P>


Then when you use on the host <TT>&quot;telnet localhost 5555&quot;</TT>, you
connect to the guest telnet server.
<DT><B>guestfwd=[tcp]:</B><I>server</I><B>:</B><I>port</I><B>-</B><I>dev</I><DD>
<A NAME="ixAFB"></A>
Forward guest <FONT SIZE="-1">TCP</FONT> connections to the <FONT SIZE="-1">IP</FONT> address <I>server</I> on port <I>port</I>
to the character device <I>dev</I>. This option can be given multiple times.
</DL>
</DL>

<DL COMPACT><DT><DD>


<P>


Note: Legacy stand-alone options -tftp, -bootp, -smb and -redir are still
processed and applied to -net user. Mixing them with the new configuration
syntax gives undefined results. Their use for new applications is discouraged
as they will be removed from future versions.
</DL>

<DT><B>-net tap[,vlan=</B><I>n</I><B>][,name=</B><I>name</I><B>][,fd=</B><I>h</I><B>][,ifname=</B><I>name</I><B>][,script=</B><I>file</I><B>][,downscript=</B><I>dfile</I><B>]</B><DD>
<A NAME="ixAFC"></A>
Connect the host <FONT SIZE="-1">TAP</FONT> network interface <I>name</I> to <FONT SIZE="-1">VLAN</FONT> <I>n</I>, use
the network script <I>file</I> to configure it and the network script
<I>dfile</I> to deconfigure it. If <I>name</I> is not provided, the <FONT SIZE="-1">OS</FONT>
automatically provides one. <B>fd</B>=<I>h</I> can be used to specify
the handle of an already opened host <FONT SIZE="-1">TAP</FONT> interface. The default network
configure script is <I>/etc/qemu-ifup</I> and the default network
deconfigure script is <I>/etc/qemu-ifdown</I>. Use <B>script=no</B>
or <B>downscript=no</B> to disable script execution. Example:


<P>




<PRE>
        qemu linux.img -net nic -net tap

</PRE>




<P>


More complicated example (two NICs, each one connected to a <FONT SIZE="-1">TAP</FONT> device)


<P>




<PRE>
        qemu linux.img -net nic,vlan=0 -net tap,vlan=0,ifname=tap0 \
        -net nic,vlan=1 -net tap,vlan=1,ifname=tap1

</PRE>


<DT><B>-net socket[,vlan=</B><I>n</I><B>][,name=</B><I>name</I><B>][,fd=</B><I>h</I><B>][,listen=[</B><I>host</I><B>]:</B><I>port</I><B>][,connect=</B><I>host</I><B>:</B><I>port</I><B>]</B><DD>
<A NAME="ixAFD"></A>
Connect the <FONT SIZE="-1">VLAN</FONT> <I>n</I> to a remote <FONT SIZE="-1">VLAN</FONT> in another <FONT SIZE="-1">QEMU</FONT> virtual
machine using a <FONT SIZE="-1">TCP</FONT> socket connection. If <B>listen</B> is
specified, <FONT SIZE="-1">QEMU</FONT> waits for incoming connections on <I>port</I>
(<I>host</I> is optional). <B>connect</B> is used to connect to
another <FONT SIZE="-1">QEMU</FONT> instance using the <B>listen</B> option. <B>fd</B>=<I>h</I>
specifies an already opened <FONT SIZE="-1">TCP</FONT> socket.


<P>


Example:


<P>




<PRE>
        # launch a first QEMU instance
        qemu linux.img -net nic,macaddr=52:54:00:12:34:56 \
        -net socket,listen=:1234
        # connect the VLAN 0 of this instance to the VLAN 0
        # of the first instance
        qemu linux.img -net nic,macaddr=52:54:00:12:34:57 \
        -net socket,connect=127.0.0.1:1234

</PRE>


<DT><B>-net socket[,vlan=</B><I>n</I><B>][,name=</B><I>name</I><B>][,fd=</B><I>h</I><B>][,mcast=</B><I>maddr</I><B>:</B><I>port</I><B>]</B><DD>
<A NAME="ixAFE"></A>
Create a <FONT SIZE="-1">VLAN</FONT> <I>n</I> shared with another <FONT SIZE="-1">QEMU</FONT> virtual
machines using a <FONT SIZE="-1">UDP</FONT> multicast socket, effectively making a bus for
every <FONT SIZE="-1">QEMU</FONT> with same multicast address <I>maddr</I> and <I>port</I>.
<FONT SIZE="-1">NOTES:</FONT>
<DL COMPACT><DT><DD>
<DL COMPACT>
<DT>1.<DD>
Several <FONT SIZE="-1">QEMU</FONT> can be running on different hosts and share same bus (assuming
correct multicast setup for these hosts).
<DT>2.<DD>
mcast support is compatible with User Mode Linux (argument <B>eth</B><I>N</I><B>=mcast</B>), see
&lt;<B><A HREF="http://user-mode-linux.sf.net">http://user-mode-linux.sf.net</A></B>&gt;.
<DT>3.<DD>
Use <B>fd=h</B> to specify an already opened <FONT SIZE="-1">UDP</FONT> multicast socket.
</DL>
</DL>

<DL COMPACT><DT><DD>


<P>


Example:


<P>




<PRE>
        # launch one QEMU instance
        qemu linux.img -net nic,macaddr=52:54:00:12:34:56 \
        -net socket,mcast=230.0.0.1:1234
        # launch another QEMU instance on same &quot;bus&quot;
        qemu linux.img -net nic,macaddr=52:54:00:12:34:57 \
        -net socket,mcast=230.0.0.1:1234
        # launch yet another QEMU instance on same &quot;bus&quot;
        qemu linux.img -net nic,macaddr=52:54:00:12:34:58 \
        -net socket,mcast=230.0.0.1:1234

</PRE>




<P>


Example (User Mode Linux compat.):


<P>




<PRE>
        # launch QEMU instance (note mcast address selected
        # is UML's default)
        qemu linux.img -net nic,macaddr=52:54:00:12:34:56 \
        -net socket,mcast=239.192.168.1:1102
        # launch UML
        /path/to/linux ubd0=/path/to/root_fs eth0=mcast

</PRE>


</DL>

<DT><B>-net vde[,vlan=</B><I>n</I><B>][,name=</B><I>name</I><B>][,sock=</B><I>socketpath</I><B>][,port=</B><I>n</I><B>][,group=</B><I>groupname</I><B>][,mode=</B><I>octalmode</I><B>]</B><DD>
<A NAME="ixAFF"></A>
Connect <FONT SIZE="-1">VLAN</FONT> <I>n</I> to <FONT SIZE="-1">PORT</FONT> <I>n</I> of a vde switch running on host and
listening for incoming connections on <I>socketpath</I>. Use <FONT SIZE="-1">GROUP</FONT> <I>groupname</I>
and <FONT SIZE="-1">MODE</FONT> <I>octalmode</I> to change default ownership and permissions for
communication port. This option is available only if <FONT SIZE="-1">QEMU</FONT> has been compiled
with vde support enabled.


<P>


Example:


<P>




<PRE>
        # launch vde switch
        vde_switch -F -sock /tmp/myswitch
        # launch QEMU instance
        qemu linux.img -net nic -net vde,sock=/tmp/myswitch

</PRE>


<DT><B>-net dump[,vlan=</B><I>n</I><B>][,file=</B><I>file</I><B>][,len=</B><I>len</I><B>]</B><DD>
<A NAME="ixAFG"></A>
Dump network traffic on <FONT SIZE="-1">VLAN</FONT> <I>n</I> to file <I>file</I> (<I>qemu-vlan0.pcap</I> by default).
At most <I>len</I> bytes (64k by default) per packet are stored. The file format is
libpcap, so it can be analyzed with tools such as tcpdump or Wireshark.
<DT><B>-net none</B><DD>
<A NAME="ixAFH"></A>
Indicate that no network devices should be configured. It is used to
override the default configuration (<B>-net nic -net user</B>) which
is activated if no <B>-net</B> options are provided.
</DL>
<P>

Character device options:
<P>

The general form of a character device option is:
<DL COMPACT>
<DT><B>-chardev</B> <I>backend</I> <B>,id=</B><I>id</I> <B>[,</B><I>options</I><B>]</B><DD>
<A NAME="ixAFI"></A>
Backend is one of:
<B>null</B>,
<B>socket</B>,
<B>udp</B>,
<B>msmouse</B>,
<B>vc</B>,
<B>file</B>,
<B>pipe</B>,
<B>console</B>,
<B>serial</B>,
<B>pty</B>,
<B>stdio</B>,
<B>braille</B>,
<B>tty</B>,
<B>parport</B>
<B>spicevmc</B>.
The specific backend will determine the applicable options.


<P>


All devices must have an id, which can be any string up to 127 characters long.
It is used to uniquely identify this device in other command line directives.


<P>


Options to each backend are described below.
<DT><B>-chardev null ,id=</B><I>id</I><DD>
<A NAME="ixAFJ"></A>
A void device. This device will not emit any data, and will drop any data it
receives. The null backend does not take any options.
<DT><B>-chardev socket ,id=</B><I>id</I> <B>[</B><I></I><FONT SIZE="-1"><I>TCP</I></FONT><I> options</I> <B>or</B> <I>unix options</I><B>] [,server] [,nowait] [,telnet]</B><DD>
<A NAME="ixAFK"></A>
Create a two-way stream socket, which can be either a <FONT SIZE="-1">TCP</FONT> or a unix socket. A
unix socket will be created if <B>path</B> is specified. Behaviour is
undefined if <FONT SIZE="-1">TCP</FONT> options are specified for a unix socket.


<P>


<B>server</B> specifies that the socket shall be a listening socket.


<P>


<B>nowait</B> specifies that <FONT SIZE="-1">QEMU</FONT> should not block waiting for a client to
connect to a listening socket.


<P>


<B>telnet</B> specifies that traffic on the socket should interpret telnet
escape sequences.


<P>


<FONT SIZE="-1">TCP</FONT> and unix socket options are given below:
<DL COMPACT><DT><DD>
<DL COMPACT>
<DT><B></B><FONT SIZE="-1"><B>TCP</B></FONT><B> options: port=</B><I>host</I> <B>[,host=</B><I>host</I><B>] [,to=</B><I>to</I><B>] [,ipv4] [,ipv6] [,nodelay]</B><DD>
<A NAME="ixAFL"></A>
<B>host</B> for a listening socket specifies the local address to be bound.
For a connecting socket species the remote host to connect to. <B>host</B> is
optional for listening sockets. If not specified it defaults to <TT>0.0.0.0</TT>.


<P>


<B>port</B> for a listening socket specifies the local port to be bound. For a
connecting socket specifies the port on the remote host to connect to.
<B>port</B> can be given as either a port number or a service name.
<B>port</B> is required.


<P>


<B>to</B> is only relevant to listening sockets. If it is specified, and
<B>port</B> cannot be bound, <FONT SIZE="-1">QEMU</FONT> will attempt to bind to subsequent ports up
to and including <B>to</B> until it succeeds. <B>to</B> must be specified
as a port number.


<P>


<B>ipv4</B> and <B>ipv6</B> specify that either IPv4 or IPv6 must be used.
If neither is specified the socket may use either protocol.


<P>


<B>nodelay</B> disables the Nagle algorithm.
<DT><B>unix options: path=</B><I>path</I><DD>
<A NAME="ixAFM"></A>
<B>path</B> specifies the local path of the unix socket. <B>path</B> is
required.
</DL>
</DL>

<DL COMPACT><DT><DD>
</DL>

<DT><B>-chardev udp ,id=</B><I>id</I> <B>[,host=</B><I>host</I><B>] ,port=</B><I>port</I> <B>[,localaddr=</B><I>localaddr</I><B>] [,localport=</B><I>localport</I><B>] [,ipv4] [,ipv6]</B><DD>
<A NAME="ixAFN"></A>
Sends all traffic from the guest to a remote host over <FONT SIZE="-1">UDP</FONT>.


<P>


<B>host</B> specifies the remote host to connect to. If not specified it
defaults to <TT>&quot;localhost&quot;</TT>.


<P>


<B>port</B> specifies the port on the remote host to connect to. <B>port</B>
is required.


<P>


<B>localaddr</B> specifies the local address to bind to. If not specified it
defaults to <TT>0.0.0.0</TT>.


<P>


<B>localport</B> specifies the local port to bind to. If not specified any
available local port will be used.


<P>


<B>ipv4</B> and <B>ipv6</B> specify that either IPv4 or IPv6 must be used.
If neither is specified the device may use either protocol.
<DT><B>-chardev msmouse ,id=</B><I>id</I><DD>
<A NAME="ixAFO"></A>
Forward <FONT SIZE="-1">QEMU</FONT>'s emulated msmouse events to the guest. <B>msmouse</B> does not
take any options.
<DT><B>-chardev vc ,id=</B><I>id</I> <B>[[,width=</B><I>width</I><B>] [,height=</B><I>height</I><B>]] [[,cols=</B><I>cols</I><B>] [,rows=</B><I>rows</I><B>]]</B><DD>
<A NAME="ixAFP"></A>
Connect to a <FONT SIZE="-1">QEMU</FONT> text console. <B>vc</B> may optionally be given a specific
size.


<P>


<B>width</B> and <B>height</B> specify the width and height respectively of
the console, in pixels.


<P>


<B>cols</B> and <B>rows</B> specify that the console be sized to fit a text
console with the given dimensions.
<DT><B>-chardev file ,id=</B><I>id</I> <B>,path=</B><I>path</I><DD>
<A NAME="ixAFQ"></A>
Log all traffic received from the guest to a file.


<P>


<B>path</B> specifies the path of the file to be opened. This file will be
created if it does not already exist, and overwritten if it does. <B>path</B>
is required.
<DT><B>-chardev pipe ,id=</B><I>id</I> <B>,path=</B><I>path</I><DD>
<A NAME="ixAFR"></A>
Create a two-way connection to the guest. The behaviour differs slightly between
Windows hosts and other hosts:


<P>


On Windows, a single duplex pipe will be created at
<I>\\.pipe\</I>path<I></I>.


<P>


On other hosts, 2 pipes will be created called <I></I>path<I>.in</I> and
<I></I>path<I>.out</I>. Data written to <I></I>path<I>.in</I> will be
received by the guest. Data written by the guest can be read from
<I></I>path<I>.out</I>. <FONT SIZE="-1">QEMU</FONT> will not create these fifos, and requires them to
be present.


<P>


<B>path</B> forms part of the pipe path as described above. <B>path</B> is
required.
<DT><B>-chardev console ,id=</B><I>id</I><DD>
<A NAME="ixAFS"></A>
Send traffic from the guest to <FONT SIZE="-1">QEMU</FONT>'s standard output. <B>console</B> does not
take any options.


<P>


<B>console</B> is only available on Windows hosts.
<DT><B>-chardev serial ,id=</B><I>id</I> <B>,path=</B><B>path</B><DD>
<A NAME="ixAFT"></A>
Send traffic from the guest to a serial device on the host.


<P>


<B>serial</B> is
only available on Windows hosts.


<P>


<B>path</B> specifies the name of the serial device to open.
<DT><B>-chardev pty ,id=</B><I>id</I><DD>
<A NAME="ixAFU"></A>
Create a new pseudo-terminal on the host and connect to it. <B>pty</B> does
not take any options.


<P>


<B>pty</B> is not available on Windows hosts.
<DT><B>-chardev stdio ,id=</B><I>id</I><DD>
<A NAME="ixAFV"></A>
Connect to standard input and standard output of the qemu process.
<B>stdio</B> does not take any options. <B>stdio</B> is not available on
Windows hosts.
<DT><B>-chardev braille ,id=</B><I>id</I><DD>
<A NAME="ixAFW"></A>
Connect to a local BrlAPI server. <B>braille</B> does not take any options.
<DT><B>-chardev tty ,id=</B><I>id</I> <B>,path=</B><I>path</I><DD>
<A NAME="ixAFX"></A>
Connect to a local tty device.


<P>


<B>tty</B> is only available on Linux, Sun, FreeBSD, NetBSD, OpenBSD and
DragonFlyBSD hosts.


<P>


<B>path</B> specifies the path to the tty. <B>path</B> is required.
<DT><B>-chardev parport ,id=</B><I>id</I> <B>,path=</B><I>path</I><DD>
<A NAME="ixAFY"></A>
<B>parport</B> is only available on Linux, FreeBSD and DragonFlyBSD hosts.


<P>


Connect to a local parallel port.


<P>


<B>path</B> specifies the path to the parallel port device. <B>path</B> is
required.


<P>


#if defined(<FONT SIZE="-1">CONFIG_SPICE</FONT>)
<DT><B>-chardev spicevmc ,id=</B><I>id</I> <B>,debug=</B><I>debug</I><B>, name=</B><I>name</I><DD>
<A NAME="ixAFZ"></A>
<B>debug</B> debug level for spicevmc


<P>


<B>name</B> name of spice channel to connect to


<P>


Connect to a spice virtual machine channel, such as vdiport.
#endif
</DL>
<P>

Bluetooth(R) options:
<DL COMPACT>
<DT><B>-bt hci[...]</B><DD>
<A NAME="ixAGA"></A>
Defines the function of the corresponding Bluetooth <FONT SIZE="-1">HCI</FONT>.  -bt options
are matched with the HCIs present in the chosen machine type.  For
example when emulating a machine with only one <FONT SIZE="-1">HCI</FONT> built into it, only
the first <TT>&quot;-bt hci[...]&quot;</TT> option is valid and defines the <FONT SIZE="-1">HCI</FONT>'s
logic.  The Transport Layer is decided by the machine type.  Currently
the machines <TT>&quot;n800&quot;</TT> and <TT>&quot;n810&quot;</TT> have one <FONT SIZE="-1">HCI</FONT> and all other
machines have none.


<P>


The following three types are recognized:
<DL COMPACT><DT><DD>
<DL COMPACT>
<DT><B>-bt hci,null</B><DD>
<A NAME="ixAGB"></A>
(default) The corresponding Bluetooth <FONT SIZE="-1">HCI</FONT> assumes no internal logic
and will not respond to any <FONT SIZE="-1">HCI</FONT> commands or emit events.
<DT><B>-bt hci,host[:</B><I>id</I><B>]</B><DD>
<A NAME="ixAGC"></A>
(<TT>&quot;bluez&quot;</TT> only) The corresponding <FONT SIZE="-1">HCI</FONT> passes commands / events
to / from the physical <FONT SIZE="-1">HCI</FONT> identified by the name <I>id</I> (default:
<TT>&quot;hci0&quot;</TT>) on the computer running <FONT SIZE="-1">QEMU</FONT>.  Only available on <TT>&quot;bluez&quot;</TT>
capable systems like Linux.
<DT><B>-bt hci[,vlan=</B><I>n</I><B>]</B><DD>
<A NAME="ixAGD"></A>
Add a virtual, standard <FONT SIZE="-1">HCI</FONT> that will participate in the Bluetooth
scatternet <I>n</I> (default <TT>0</TT>).  Similarly to <B>-net</B>
VLANs, devices inside a bluetooth network <I>n</I> can only communicate
with other devices in the same network (scatternet).
</DL>
</DL>

<DL COMPACT><DT><DD>
</DL>

<DT><B>-bt vhci[,vlan=</B><I>n</I><B>]</B><DD>
<A NAME="ixAGE"></A>
(Linux-host only) Create a <FONT SIZE="-1">HCI</FONT> in scatternet <I>n</I> (default 0) attached
to the host bluetooth stack instead of to the emulated target.  This
allows the host and target machines to participate in a common scatternet
and communicate.  Requires the Linux <TT>&quot;vhci&quot;</TT> driver installed.  Can
be used as following:


<P>




<PRE>
        qemu [...OPTIONS...] -bt hci,vlan=5 -bt vhci,vlan=5

</PRE>


<DT><B>-bt device:</B><I>dev</I><B>[,vlan=</B><I>n</I><B>]</B><DD>
<A NAME="ixAGF"></A>
Emulate a bluetooth device <I>dev</I> and place it in network <I>n</I>
(default <TT>0</TT>).  <FONT SIZE="-1">QEMU</FONT> can only emulate one type of bluetooth devices
currently:
<DL COMPACT><DT><DD>
<DL COMPACT>
<DT><B>keyboard</B><DD>
<A NAME="ixAGG"></A>
Virtual wireless keyboard implementing the <FONT SIZE="-1">HIDP</FONT> bluetooth profile.
</DL>
</DL>

<DL COMPACT><DT><DD>
</DL>

</DL>
<P>

Linux/Multiboot boot specific:
<P>

When using these options, you can use a given Linux or Multiboot
kernel without installing it in the disk image. It can be useful
for easier testing of various kernels.
<DL COMPACT>
<DT><B>-kernel</B> <I>bzImage</I><DD>
<A NAME="ixAGH"></A>
Use <I>bzImage</I> as kernel image. The kernel can be either a Linux kernel
or in multiboot format.
<DT><B>-append</B> <I>cmdline</I><DD>
<A NAME="ixAGI"></A>
Use <I>cmdline</I> as kernel command line
<DT><B>-initrd</B> <I>file</I><DD>
<A NAME="ixAGJ"></A>
Use <I>file</I> as initial ram disk.
<DT><B>-initrd </B><I>file1</I> <B>arg=foo,</B><I>file2</I><B></B><DD>


<A NAME="ixAGK"></A>
This syntax is only available with multiboot.


<P>


Use <I>file1</I> and <I>file2</I> as modules and pass arg=foo as parameter to the
first module.
</DL>
<P>

Debug/Expert options:
<DL COMPACT>
<DT><B>-serial</B> <I>dev</I><DD>
<A NAME="ixAGL"></A>
Redirect the virtual serial port to host character device
<I>dev</I>. The default device is <TT>&quot;vc&quot;</TT> in graphical mode and
<TT>&quot;stdio&quot;</TT> in non graphical mode.


<P>


This option can be used several times to simulate up to 4 serial
ports.


<P>


Use <TT>&quot;-serial none&quot;</TT> to disable all serial ports.


<P>


Available character devices are:
<DL COMPACT><DT><DD>
<DL COMPACT>
<DT><B>vc[:</B><I>W</I><B>x</B><I>H</I><B>]</B><DD>
<A NAME="ixAGM"></A>
Virtual console. Optionally, a width and height can be given in pixel with


<P>




<PRE>
        vc:800x600

</PRE>




<P>


It is also possible to specify width or height in characters:


<P>




<PRE>
        vc:80Cx24C

</PRE>


<DT><B>pty</B><DD>
<A NAME="ixAGN"></A>
[Linux only] Pseudo <FONT SIZE="-1">TTY</FONT> (a new <FONT SIZE="-1">PTY</FONT> is automatically allocated)
<DT><B>none</B><DD>
<A NAME="ixAGO"></A>
No device is allocated.
<DT><B>null</B><DD>
<A NAME="ixAGP"></A>
void device
<DT><B>/dev/XXX</B><DD>
<A NAME="ixAGQ"></A>
[Linux only] Use host tty, e.g. <I>/dev/ttyS0</I>. The host serial port
parameters are set according to the emulated ones.
<DT><B>/dev/parport</B><I>N</I><DD>
<A NAME="ixAGR"></A>
[Linux only, parallel port only] Use host parallel port
<I>N</I>. Currently <FONT SIZE="-1">SPP</FONT> and <FONT SIZE="-1">EPP</FONT> parallel port features can be used.
<DT><B>file:</B><I>filename</I><DD>
<A NAME="ixAGS"></A>
Write output to <I>filename</I>. No character can be read.
<DT><B>stdio</B><DD>
<A NAME="ixAGT"></A>
[Unix only] standard input/output
<DT><B>pipe:</B><I>filename</I><DD>
<A NAME="ixAGU"></A>
name pipe <I>filename</I>
<DT><B></B><FONT SIZE="-1"><B>COM</B></FONT><B></B><I>n</I><DD>
<A NAME="ixAGV"></A>
[Windows only] Use host serial port <I>n</I>
<DT><B>udp:[</B><I>remote_host</I><B>]:</B><I>remote_port</I><B>[@[</B><I>src_ip</I><B>]:</B><I>src_port</I><B>]</B><DD>
<A NAME="ixAGW"></A>
This implements <FONT SIZE="-1">UDP</FONT> Net Console.
When <I>remote_host</I> or <I>src_ip</I> are not specified
they default to <TT>0.0.0.0</TT>.
When not using a specified <I>src_port</I> a random port is automatically chosen.


<P>


If you just want a simple readonly console you can use <TT>&quot;netcat&quot;</TT> or
<TT>&quot;nc&quot;</TT>, by starting qemu with: <TT>&quot;-serial udp::4555&quot;</TT> and nc as:
<TT>&quot;nc -u -l -p 4555&quot;</TT>. Any time qemu writes something to that port it
will appear in the netconsole session.


<P>


If you plan to send characters back via netconsole or you want to stop
and start qemu a lot of times, you should have qemu use the same
source port each time by using something like <TT>&quot;-serial
udp::<A HREF="mailto:4555@4556">4555@4556</A>&quot;</TT> to qemu. Another approach is to use a patched
version of netcat which can listen to a <FONT SIZE="-1">TCP</FONT> port and send and receive
characters via udp.  If you have a patched version of netcat which
activates telnet remote echo and single char transfer, then you can
use the following options to step up a netcat redirector to allow
telnet on port 5555 to access the qemu port.
<DL COMPACT><DT><DD>
<DL COMPACT>
<DT>Qemu Options:<DD>


<A NAME="ixAGX"></A>
-serial udp::<A HREF="mailto:4555@4556">4555@4556</A>
<DT>netcat options:<DD>


<A NAME="ixAGY"></A>
-u -P 4555 -L 0.0.0.0:4556 -t -p 5555 -I -T
<DT>telnet options:<DD>


<A NAME="ixAGZ"></A>
localhost 5555
</DL>
</DL>

<DL COMPACT><DT><DD>
</DL>

<DT><B>tcp:[</B><I>host</I><B>]:</B><I>port</I><B>[,</B><I>server</I><B>][,nowait][,nodelay]</B><DD>
<A NAME="ixAHA"></A>
The <FONT SIZE="-1">TCP</FONT> Net Console has two modes of operation.  It can send the serial
I/O to a location or wait for a connection from a location.  By default
the <FONT SIZE="-1">TCP</FONT> Net Console is sent to <I>host</I> at the <I>port</I>.  If you use
the <I>server</I> option <FONT SIZE="-1">QEMU</FONT> will wait for a client socket application
to connect to the port before continuing, unless the <TT>&quot;nowait&quot;</TT>
option was specified.  The <TT>&quot;nodelay&quot;</TT> option disables the Nagle buffering
algorithm.  If <I>host</I> is omitted, 0.0.0.0 is assumed. Only
one <FONT SIZE="-1">TCP</FONT> connection at a time is accepted. You can use <TT>&quot;telnet&quot;</TT> to
connect to the corresponding character device.
<DL COMPACT><DT><DD>
<DL COMPACT>
<DT>Example to send tcp console to 192.168.0.2 port 4444<DD>


<A NAME="ixAHB"></A>
-serial tcp:192.168.0.2:4444
<DT>Example to listen and wait on port 4444 for connection<DD>


<A NAME="ixAHC"></A>
-serial tcp::4444,server
<DT>Example to not wait and listen on ip 192.168.0.100 port 4444<DD>


<A NAME="ixAHD"></A>
-serial tcp:192.168.0.100:4444,server,nowait
</DL>
</DL>

<DL COMPACT><DT><DD>
</DL>

<DT><B>telnet:</B><I>host</I><B>:</B><I>port</I><B>[,server][,nowait][,nodelay]</B><DD>
<A NAME="ixAHE"></A>
The telnet protocol is used instead of raw tcp sockets.  The options
work the same as if you had specified <TT>&quot;-serial tcp&quot;</TT>.  The
difference is that the port acts like a telnet server or client using
telnet option negotiation.  This will also allow you to send the
<FONT SIZE="-1">MAGIC_SYSRQ</FONT> sequence if you use a telnet that supports sending the break
sequence.  Typically in unix telnet you do it with Control-] and then
type ``send break'' followed by pressing the enter key.
<DT><B>unix:</B><I>path</I><B>[,server][,nowait]</B><DD>
<A NAME="ixAHF"></A>
A unix domain socket is used instead of a tcp socket.  The option works the
same as if you had specified <TT>&quot;-serial tcp&quot;</TT> except the unix domain socket
<I>path</I> is used for connections.
<DT><B>mon:</B><I>dev_string</I><DD>
<A NAME="ixAHG"></A>
This is a special option to allow the monitor to be multiplexed onto
another serial port.  The monitor is accessed with key sequence of
<B>Control-a</B> and then pressing <B>c</B>. See monitor access
<B>pcsys_keys</B> in the -nographic section for more keys.
<I>dev_string</I> should be any one of the serial devices specified
above.  An example to multiplex the monitor onto a telnet server
listening on port 4444 would be:
<DL COMPACT><DT><DD>
<DL COMPACT>
<DT>-serial mon:telnet::4444,server,nowait<DD>


<A NAME="ixAHH"></A>
</DL>
</DL>

<DL COMPACT><DT><DD>
</DL>


<DT><B>braille</B><DD>
<A NAME="ixAHI"></A>

Braille device.  This will use BrlAPI to display the braille output on a real
or fake device.
<DT><B>msmouse</B><DD>
<A NAME="ixAHJ"></A>
Three button serial mouse. Configure the guest to use Microsoft protocol.
</DL>
</DL>

<DL COMPACT><DT><DD>
</DL>

<DT><B>-parallel</B> <I>dev</I><DD>
<A NAME="ixAHK"></A>
Redirect the virtual parallel port to host device <I>dev</I> (same
devices as the serial port). On Linux hosts, <I>/dev/parportN</I> can
be used to use hardware devices connected on the corresponding host
parallel port.


<P>


This option can be used several times to simulate up to 3 parallel
ports.


<P>


Use <TT>&quot;-parallel none&quot;</TT> to disable all parallel ports.
<DT><B>-monitor</B> <I>dev</I><DD>
<A NAME="ixAHL"></A>
Redirect the monitor to host device <I>dev</I> (same devices as the
serial port).
The default device is <TT>&quot;vc&quot;</TT> in graphical mode and <TT>&quot;stdio&quot;</TT> in
non graphical mode.
<DT><B>-mon chardev=[name][,mode=readline|control][,default]</B><DD>
<A NAME="ixAHM"></A>
Setup monitor on chardev <I>name</I>.
<DT><B>-debugcon</B> <I>dev</I><DD>
<A NAME="ixAHN"></A>
Redirect the debug console to host device <I>dev</I> (same devices as the
serial port).  The debug console is an I/O port which is typically port
0xe9; writing to that I/O port sends output to this device.
The default device is <TT>&quot;vc&quot;</TT> in graphical mode and <TT>&quot;stdio&quot;</TT> in
non graphical mode.
<DT><B>-pidfile</B> <I>file</I><DD>
<A NAME="ixAHO"></A>
Store the <FONT SIZE="-1">QEMU</FONT> process <FONT SIZE="-1">PID</FONT> in <I>file</I>. It is useful if you launch <FONT SIZE="-1">QEMU</FONT>
from a script.
<DT><B>-singlestep</B><DD>
<A NAME="ixAHP"></A>
Run the emulation in single step mode.
<DT><B>-S</B><DD>
<A NAME="ixAHQ"></A>
Do not start <FONT SIZE="-1">CPU</FONT> at startup (you must type 'c' in the monitor).
<DT><B>-gdb</B> <I>dev</I><DD>
<A NAME="ixAHR"></A>
Wait for gdb connection on device <I>dev</I>. Typical
connections will likely be TCP-based, but also <FONT SIZE="-1">UDP</FONT>, pseudo <FONT SIZE="-1">TTY</FONT>, or even
stdio are reasonable use case. The latter is allowing to start qemu from
within gdb and establish the connection via a pipe:


<P>




<PRE>
        (gdb) target remote | exec qemu -gdb stdio ...

</PRE>


<DT><B>-s</B><DD>
<A NAME="ixAHS"></A>
Shorthand for -gdb tcp::1234, i.e. open a gdbserver on <FONT SIZE="-1">TCP</FONT> port 1234.
<DT><B>-d</B><DD>
<A NAME="ixAHT"></A>
Output log in /tmp/qemu.log
<DT><B>-hdachs</B> <I>c</I><B>,</B><I>h</I><B>,</B><I>s</I><B>,[,</B><I>t</I><B>]</B><DD>
<A NAME="ixAHU"></A>
Force hard disk 0 physical geometry (1 &lt;= <I>c</I> &lt;= 16383, 1 &lt;=
<I>h</I> &lt;= 16, 1 &lt;= <I>s</I> &lt;= 63) and optionally force the <FONT SIZE="-1">BIOS</FONT>
translation mode (<I>t</I>=none, lba or auto). Usually <FONT SIZE="-1">QEMU</FONT> can guess
all those parameters. This option is useful for old MS-DOS disk
images.
<DT><B>-L</B>  <I>path</I><DD>
<A NAME="ixAHV"></A>
Set the directory for the <FONT SIZE="-1">BIOS</FONT>, <FONT SIZE="-1">VGA</FONT> <FONT SIZE="-1">BIOS</FONT> and keymaps.
<DT><B>-bios</B> <I>file</I><DD>
<A NAME="ixAHW"></A>
Set the filename for the <FONT SIZE="-1">BIOS</FONT>.
<DT><B>-enable-kvm</B><DD>
<A NAME="ixAHX"></A>
Enable <FONT SIZE="-1">KVM</FONT> full virtualization support. This option is only available
if <FONT SIZE="-1">KVM</FONT> support is enabled when compiling.
<DT><B>-no-reboot</B><DD>
<A NAME="ixAHY"></A>
Exit instead of rebooting.
<DT><B>-no-shutdown</B><DD>
<A NAME="ixAHZ"></A>
Don't exit <FONT SIZE="-1">QEMU</FONT> on guest shutdown, but instead only stop the emulation.
This allows for instance switching to monitor to commit changes to the
disk image.
<DT><B>-loadvm</B> <I>file</I><DD>
<A NAME="ixAIA"></A>
Start right away with a saved state (<TT>&quot;loadvm&quot;</TT> in monitor)
<DT><B>-daemonize</B><DD>
<A NAME="ixAIB"></A>
Daemonize the <FONT SIZE="-1">QEMU</FONT> process after initialization.  <FONT SIZE="-1">QEMU</FONT> will not detach from
standard <FONT SIZE="-1">IO</FONT> until it is ready to receive connections on any of its devices.
This option is a useful way for external programs to launch <FONT SIZE="-1">QEMU</FONT> without having
to cope with initialization race conditions.
<DT><B>-option-rom</B> <I>file</I><DD>
<A NAME="ixAIC"></A>
Load the contents of <I>file</I> as an option <FONT SIZE="-1">ROM</FONT>.
This option is useful to load things like EtherBoot.
<DT><B>-clock</B> <I>method</I><DD>
<A NAME="ixAID"></A>
Force the use of the given methods for timer alarm. To see what timers
are available use -clock ?.
<DT><B>-rtc [base=utc|localtime|</B><I>date</I><B>][,clock=host|vm][,driftfix=none|slew]</B><DD>
<A NAME="ixAIE"></A>
Specify <B>base</B> as <TT>&quot;utc&quot;</TT> or <TT>&quot;localtime&quot;</TT> to let the <FONT SIZE="-1">RTC</FONT> start at the current
<FONT SIZE="-1">UTC</FONT> or local time, respectively. <TT>&quot;localtime&quot;</TT> is required for correct date in
MS-DOS or Windows. To start at a specific point in time, provide <I>date</I> in the
format <TT>&quot;2006-06-17T16:01:21&quot;</TT> or <TT>&quot;2006-06-17&quot;</TT>. The default base is <FONT SIZE="-1">UTC</FONT>.


<P>


By default the <FONT SIZE="-1">RTC</FONT> is driven by the host system time. This allows to use the
<FONT SIZE="-1">RTC</FONT> as accurate reference clock inside the guest, specifically if the host
time is smoothly following an accurate external reference clock, e.g. via <FONT SIZE="-1">NTP</FONT>.
If you want to isolate the guest time from the host, even prevent it from
progressing during suspension, you can set <B>clock</B> to <TT>&quot;vm&quot;</TT> instead.


<P>


Enable <B>driftfix</B> (i386 targets only) if you experience time drift problems,
specifically with Windows' <FONT SIZE="-1">ACPI</FONT> <FONT SIZE="-1">HAL</FONT>. This option will try to figure out how
many timer interrupts were not processed by the Windows guest and will
re-inject them.
<DT><B>-icount [</B><I>N</I><B>|auto]</B><DD>
<A NAME="ixAIF"></A>
Enable virtual instruction counter.  The virtual cpu will execute one
instruction every 2^<I>N</I> ns of virtual time.  If <TT>&quot;auto&quot;</TT> is specified
then the virtual cpu speed will be automatically adjusted to keep virtual
time within a few seconds of real time.


<P>


Note that while this option can give deterministic behavior, it does not
provide cycle accurate emulation.  Modern CPUs contain superscalar out of
order cores with complex cache hierarchies.  The number of instructions
executed often has little or no correlation with actual performance.
<DT><B>-watchdog</B> <I>model</I><DD>
<A NAME="ixAIG"></A>
Create a virtual hardware watchdog device.  Once enabled (by a guest
action), the watchdog must be periodically polled by an agent inside
the guest or else the guest will be restarted.


<P>


The <I>model</I> is the model of hardware watchdog to emulate.  Choices
for model are: <TT>&quot;ib700&quot;</TT> (iBASE 700) which is a very simple <FONT SIZE="-1">ISA</FONT>
watchdog with a single timer, or <TT>&quot;i6300esb&quot;</TT> (Intel 6300ESB I/O
controller hub) which is a much more featureful PCI-based dual-timer
watchdog.  Choose a model for which your guest has drivers.


<P>


Use <TT>&quot;-watchdog ?&quot;</TT> to list available hardware models.  Only one
watchdog can be enabled for a guest.
<DT><B>-watchdog-action</B> <I>action</I><DD>
<A NAME="ixAIH"></A>
The <I>action</I> controls what <FONT SIZE="-1">QEMU</FONT> will do when the watchdog timer
expires.
The default is
<TT>&quot;reset&quot;</TT> (forcefully reset the guest).
Other possible actions are:
<TT>&quot;shutdown&quot;</TT> (attempt to gracefully shutdown the guest),
<TT>&quot;poweroff&quot;</TT> (forcefully poweroff the guest),
<TT>&quot;pause&quot;</TT> (pause the guest),
<TT>&quot;debug&quot;</TT> (print a debug message and continue), or
<TT>&quot;none&quot;</TT> (do nothing).


<P>


Note that the <TT>&quot;shutdown&quot;</TT> action requires that the guest responds
to <FONT SIZE="-1">ACPI</FONT> signals, which it may not be able to do in the sort of
situations where the watchdog would have expired, and thus
<TT>&quot;-watchdog-action shutdown&quot;</TT> is not recommended for production use.


<P>


Examples:
<DL COMPACT><DT><DD>
<DL COMPACT>
<DT>-watchdog i6300esb -watchdog-action pause<DD>


<A NAME="ixAII"></A>

<DT>-watchdog ib700<DD>


<A NAME="ixAIJ"></A>
</DL>
</DL>

<DL COMPACT><DT><DD>
</DL>

<DT><B>-echr</B> <I>numeric_ascii_value</I><DD>
<A NAME="ixAIK"></A>

Change the escape character used for switching to the monitor when using
monitor and serial sharing.  The default is <TT>0x01</TT> when using the
<TT>&quot;-nographic&quot;</TT> option.  <TT>0x01</TT> is equal to pressing
<TT>&quot;Control-a&quot;</TT>.  You can select a different character from the ascii
control keys where 1 through 26 map to Control-a through Control-z.  For
instance you could use the either of the following to change the escape
character to Control-t.
<DL COMPACT><DT><DD>
<DL COMPACT>
<DT>-echr 0x14<DD>


<A NAME="ixAIL"></A>

<DT>-echr 20<DD>


<A NAME="ixAIM"></A>
</DL>
</DL>

<DL COMPACT><DT><DD>
</DL>

<DT><B>-virtioconsole</B> <I>c</I><DD>
<A NAME="ixAIN"></A>

Set virtio console.


<P>


This option is maintained for backward compatibility.


<P>


Please use <TT>&quot;-device virtconsole&quot;</TT> for the new way of invocation.
<DT><B>-chroot</B> <I>dir</I><DD>
<A NAME="ixAIO"></A>
Immediately before starting guest execution, chroot to the specified
directory.  Especially useful in combination with -runas.
<DT><B>-runas</B> <I>user</I><DD>
<A NAME="ixAIP"></A>
Immediately before starting guest execution, drop root privileges, switching
to the specified user.
<DT><B>-nodefconfig</B><DD>
<A NAME="ixAIQ"></A>
Normally <FONT SIZE="-1">QEMU</FONT> loads a configuration file from <I>sysconfdir</I>/qemu.conf and
<I>sysconfdir</I>/target-<I></I><FONT SIZE="-1"><I>ARCH</I></FONT><I></I>.conf on startup.  The <TT>&quot;-nodefconfig&quot;</TT>
option will prevent <FONT SIZE="-1">QEMU</FONT> from loading these configuration files at startup.
</DL>
<P>

During the graphical emulation, you can use the following keys:
<DL COMPACT>
<DT><B>Ctrl-Alt-f</B><DD>
<A NAME="ixAIR"></A>
Toggle full screen
<DT><B>Ctrl-Alt-u</B><DD>
<A NAME="ixAIS"></A>
Restore the screen's un-scaled dimensions
<DT><B>Ctrl-Alt-n</B><DD>
<A NAME="ixAIT"></A>
Switch to virtual console 'n'. Standard console mappings are:
<DL COMPACT><DT><DD>
<DL COMPACT>
<DT><I>1</I><DD>
<A NAME="ixAIU"></A>
Target system display
<DT><I>2</I><DD>
<A NAME="ixAIV"></A>
Monitor
<DT><I>3</I><DD>
<A NAME="ixAIW"></A>
Serial port
</DL>
</DL>

<DL COMPACT><DT><DD>
</DL>

<DT><B>Ctrl-Alt</B><DD>
<A NAME="ixAIX"></A>
Toggle mouse and keyboard grab.
</DL>
<P>

In the virtual consoles, you can use <B>Ctrl-Up</B>, <B>Ctrl-Down</B>,
<B>Ctrl-PageUp</B> and <B>Ctrl-PageDown</B> to move in the back log.
<P>

During emulation, if you are using the <B>-nographic</B> option, use
<B>Ctrl-a h</B> to get terminal commands:
<DL COMPACT>
<DT><B>Ctrl-a h</B><DD>
<A NAME="ixAIY"></A>

<DT><B>Ctrl-a ?</B><DD>
<A NAME="ixAIZ"></A>

Print this help
<DT><B>Ctrl-a x</B><DD>
<A NAME="ixAJA"></A>
Exit emulator
<DT><B>Ctrl-a s</B><DD>
<A NAME="ixAJB"></A>
Save disk data back to file (if -snapshot)
<DT><B>Ctrl-a t</B><DD>
<A NAME="ixAJC"></A>
Toggle console timestamps
<DT><B>Ctrl-a b</B><DD>
<A NAME="ixAJD"></A>
Send break (magic sysrq in Linux)
<DT><B>Ctrl-a c</B><DD>
<A NAME="ixAJE"></A>
Switch between console and monitor
<DT><B>Ctrl-a Ctrl-a</B><DD>
<A NAME="ixAJF"></A>
Send Ctrl-a
</DL>
<P>

The following options are specific to the PowerPC emulation:
<DL COMPACT>
<DT><B>-g</B> <I>W</I><B>x</B><I>H</I><B>[x</B><I></I><FONT SIZE="-1"><I>DEPTH</I></FONT><I></I><B>]</B><DD>
<A NAME="ixAJG"></A>
Set the initial <FONT SIZE="-1">VGA</FONT> graphic mode. The default is 800x600x15.
<DT><B>-prom-env</B> <I>string</I><DD>
<A NAME="ixAJH"></A>
Set OpenBIOS variables in <FONT SIZE="-1">NVRAM</FONT>, for example:


<P>




<PRE>
        qemu-system-ppc -prom-env 'auto-boot?=false' \
         -prom-env 'boot-device=hd:2,\yaboot' \
         -prom-env 'boot-args=conf=hd:2,\yaboot.conf'

</PRE>




<P>


These variables are not used by Open Hack'Ware.
</DL>
<P>

The following options are specific to the Sparc32 emulation:
<DL COMPACT>
<DT><B>-g</B> <I>W</I><B>x</B><I>H</I><B>x[x</B><I></I><FONT SIZE="-1"><I>DEPTH</I></FONT><I></I><B>]</B><DD>
<A NAME="ixAJI"></A>
Set the initial <FONT SIZE="-1">TCX</FONT> graphic mode. The default is 1024x768x8, currently
the only other possible mode is 1024x768x24.
<DT><B>-prom-env</B> <I>string</I><DD>
<A NAME="ixAJJ"></A>
Set OpenBIOS variables in <FONT SIZE="-1">NVRAM</FONT>, for example:


<P>




<PRE>
        qemu-system-sparc -prom-env 'auto-boot?=false' \
         -prom-env 'boot-device=sd(0,2,0):d' -prom-env 'boot-args=linux single'

</PRE>


<DT><B>-M [SS-4|SS-5|SS-10|SS-20|SS-600MP|LX|Voyager|SPARCClassic|SPARCbook|SS-2|SS-1000|SS-2000]</B><DD>
<A NAME="ixAJK"></A>
Set the emulated machine type. Default is <FONT SIZE="-1">SS-5</FONT>.
</DL>
<P>

The following options are specific to the Sparc64 emulation:
<DL COMPACT>
<DT><B>-prom-env</B> <I>string</I><DD>
<A NAME="ixAJL"></A>
Set OpenBIOS variables in <FONT SIZE="-1">NVRAM</FONT>, for example:


<P>




<PRE>
        qemu-system-sparc64 -prom-env 'auto-boot?=false'

</PRE>


<DT><B>-M [sun4u|sun4v|Niagara]</B><DD>
<A NAME="ixAJM"></A>
Set the emulated machine type. The default is sun4u.
</DL>
<A NAME="lbAF">&nbsp;</A>
<H2>SEE ALSO</H2>

<A NAME="ixAJN"></A>
The <FONT SIZE="-1">HTML</FONT> documentation of <FONT SIZE="-1">QEMU</FONT> for more precise information and Linux
user mode emulator invocation.
<A NAME="lbAG">&nbsp;</A>
<H2>AUTHOR</H2>

<A NAME="ixAJO"></A>
Fabrice Bellard
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">OPTIONS</A><DD>
<DT><A HREF="#lbAF">SEE ALSO</A><DD>
<DT><A HREF="#lbAG">AUTHOR</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/manpages/index.html">man2html</A>,
using the manual pages.<BR>
Time: 05:29:09 GMT, December 24, 2015
</div></body>
</HTML>
