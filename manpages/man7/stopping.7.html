<!DOCTYPE html>

<HTML><head><TITLE>Manpage of stopping</TITLE>
<meta charset="utf-8">
<link rel="stylesheet" href="/css/main.css" type="text/css">
</head>
<body>
 <header class="site-header">
 <div class="wrap"> <div class="site-title"><a href="/manpages/index.html">linux manpages</a></div>
 <div class="site-description">{"type":"documentation"}</div>
 </div>
 </header>
 <div class="page-content"><div class="wrap">
<H1>stopping</H1>
Section: Environments, Tables, and Troff Macros (7)<BR>Updated: 2009-07-09<BR><A HREF="#index">Index</A>
<A HREF="/manpages/index.html">Return to Main Contents</A><HR>


<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

stopping - event signalling that a job is stopping

<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<B>stopping</B>

<B>JOB</B>=<I>JOB</I>

<B>INSTANCE</B>=<I>INSTANCE</I>

<B>RESULT</B>=<I>RESULT</I>

<I></I>[<B>PROCESS</B>=<I>PROCESS</I><B></B>]

<I></I>[<B>EXIT_STATUS</B>=<I>STATUS</I><B></B>]

<I></I>[<B>EXIT_SIGNAL</B>=<I>SIGNAL</I><B></B>]

[<I>ENV</I>]...


<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

The
<B>stopping</B>

event is generated by the Upstart
<B><A HREF="/manpages/index.html?8+init">init</A></B>(8)

daemon when an instance of a job begins stopping.  The
<B>JOB</B>

environment variable contains the job name, and the
<B>INSTANCE</B>

environment variable contains the instance name which will be empty for
single-instance jobs.
<P>
If the job is stopping normally, the
<B>RESULT</B>

environment variable will be
<I>ok</I>,

otherwise if the job is stopping because it has failed it will be
<I>failed</I>.

<P>
When the job has failed, the process that failed will be given in the
<B>PROCESS</B>

environment variable.  This may be
<I>pre-start</I>, <I>post-start</I>, <I>main</I>, <I>pre-stop</I> or <I>post-stop</I>;

it may also be the special value
<I>respawn</I>

to indicate that the job is stopping because it hit the respawn limit.
<P>
Finally in the case of a failed job, one of either
<B>EXIT_STATUS</B>

or
<B>EXIT_SIGNAL</B>

may be given to indicate the cause of the stop.  Either
<B>EXIT_STATUS</B>

will contain the exit status code of the process, or
<B>EXIT_SIGNAL</B>

will contain the name of the signal that the process received.  The
<B>normal exit</B>

job configuration stanza can be used to prevent particular exit status
values or signals resulting in a failed job, see
<B><A HREF="/manpages/index.html?5+init">init</A></B>(5)

for more information.
<P>
If neither
<B>EXIT_STATUS</B>

or
<B>EXIT_SIGNAL</B>

is given for a failed process, it is because the process failed to spawn
(for example, file not found).  See the system logs for the error.
<P>
<B><A HREF="/manpages/index.html?8+init">init</A></B>(8)

will wait for all services started by this event to be running, all tasks
started by this event to have finished and all jobs stopped by this event
to be stopped before allowing the job to continue stopping.
<P>
This allows jobs to depend on other jobs, safely stopping themselves before
their dependency goes away.  This event is typically combined with the
<B><A HREF="/manpages/index.html?7+started">started</A></B>(7)

event by services.
<P>
Job configuration files may use the
<B>export</B>

stanza to export environment variables from their own environment into
the
<B>stopping</B>

event.  See
<B><A HREF="/manpages/index.html?5+init">init</A></B>(5)

for more details.

<A NAME="lbAE">&nbsp;</A>
<H2>EXAMPLE</H2>

A service that wishes to depend on another service might use:
<P>
<DL COMPACT><DT><DD>
<PRE>
start on started apache
stop on stopping apache
</PRE>

</DL>

<P>
A task that must be run before another task or service is stopped might
use:
<P>
<DL COMPACT><DT><DD>
<PRE>
start on stopping postgresql RESULT=ok
</PRE>

</DL>


<A NAME="lbAF">&nbsp;</A>
<H2>SEE ALSO</H2>

<B><A HREF="/manpages/index.html?7+starting">starting</A></B>(7)

<B><A HREF="/manpages/index.html?7+started">started</A></B>(7)

<B><A HREF="/manpages/index.html?7+stopped">stopped</A></B>(7)

<B><A HREF="/manpages/index.html?5+init">init</A></B>(5)

<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">EXAMPLE</A><DD>
<DT><A HREF="#lbAF">SEE ALSO</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/manpages/index.html">man2html</A>,
using the manual pages.<BR>
Time: 05:34:16 GMT, December 24, 2015
</div></div>
</body>
</HTML>
