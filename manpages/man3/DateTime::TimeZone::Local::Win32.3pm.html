<!DOCTYPE html>

<HTML><head><TITLE>Manpage of DateTime::TimeZone::Local::Win32</TITLE>
<meta charset="utf-8">
<link rel="stylesheet" href="/css/main.css" type="text/css">
</head>
<body>
 <header class="site-header">
 <div class="wrap"> <div class="site-title"><a href="/manpages/index.html">linux manpages</a></div>
 <div class="site-description">{"type":"programming"}</div>
 </div>
 </header>
 <div class="page-content">
<H1>DateTime::TimeZone::Local::Win32</H1>
Section: User Contributed Perl Documentation (3)<BR>Updated: 2010-11-12<BR><A HREF="#index">Index</A>
<A HREF="/manpages/index.html">Return to Main Contents</A><HR>






<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

DateTime::TimeZone::Local::Win32 - Determine the local system's time zone on Windows
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<A NAME="ixAAC"></A>


<PRE>
  my $tz = DateTime::TimeZone-&gt;new( name =&gt; 'local' );

  my $tz = DateTime::TimeZone::Local-&gt;TimeZone();

</PRE>


<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

<A NAME="ixAAD"></A>
This module provides methods for determining the local time zone on a
Windows platform.
<A NAME="lbAE">&nbsp;</A>
<H2>HOW THE TIME ZONE IS DETERMINED</H2>

<A NAME="ixAAE"></A>
This class tries the following methods of determining the local time
zone:
<DL COMPACT>
<DT>*<DD>
<TT>$ENV</TT>{<FONT SIZE="-1">TZ</FONT>}


<P>


It checks <TT>$ENV{TZ}</TT> for a valid time zone name.
<DT>*<DD>
Windows Registry


<P>


When using the registry, we look for the Windows time zone and use a
mapping to translate this to an Olson time zone name.
<DL COMPACT><DT><DD>
<DL COMPACT>
<DT>*<DD>
Windows Vista and 2008


<P>


We look in ``SYSTEM/CurrentControlSet/Control/TimeZoneInformation/'' for
a node named ``/TimeZoneKeyName''. If this exists, we use this key to
look up the Olson time zone name in our mapping.
<DT>*<DD>
Windows <FONT SIZE="-1">NT</FONT>, Windows 2000, Windows <FONT SIZE="-1">XP</FONT>, Windows 2003 Server


<P>


We look in ``SOFTWARE/Microsoft/Windows NT/CurrentVersion/Time Zones/''
and loop through all of its sub keys.


<P>


For each sub key, we compare the value of the key with ``/Std'' appended
to the end to the value of
``SYSTEM/CurrentControlSet/Control/TimeZoneInformation/StandardName''. This
gives us the <I>English</I> name of the Windows time zone, which we use to
look up the Olson time zone name.
<DT>*<DD>
Windows 95, Windows 98, Windows Millenium Edition


<P>


The algorithm is the same as for <FONT SIZE="-1">NT</FONT>, but we loop through the sub keys
of ``SOFTWARE/Microsoft/Windows/CurrentVersion/Time Zones/''
</DL>
</DL>

<DL COMPACT><DT><DD>
</DL>

</DL>
<A NAME="lbAF">&nbsp;</A>
<H2>AUTHOR</H2>

<A NAME="ixAAF"></A>
Dave Rolsky, &lt;<A HREF="mailto:autarch@urth.org">autarch@urth.org</A>&gt;
<A NAME="lbAG">&nbsp;</A>
<H2>COPYRIGHT &amp; LICENSE</H2>

<A NAME="ixAAG"></A>
Copyright (c) 2003-2008 David Rolsky.  All rights reserved.  This
program is free software; you can redistribute it and/or modify it
under the same terms as Perl itself.
<P>

The full text of the license can be found in the <FONT SIZE="-1">LICENSE</FONT> file included
with this module.
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">HOW THE TIME ZONE IS DETERMINED</A><DD>
<DT><A HREF="#lbAF">AUTHOR</A><DD>
<DT><A HREF="#lbAG">COPYRIGHT &amp; LICENSE</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/manpages/index.html">man2html</A>,
using the manual pages.<BR>
Time: 05:33:22 GMT, December 24, 2015
</div></body>
</HTML>
