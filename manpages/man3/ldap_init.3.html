<!DOCTYPE html>

<HTML><head><TITLE>Manpage of LDAP_OPEN</TITLE>
<meta charset="utf-8">
<link rel="stylesheet" href="/css/main.css" type="text/css">
</head>
<body>
 <header class="site-header">
 <div class="wrap"> <div class="site-title"><a href="/manpages/index.html">linux man pages</a></div>
 <div class="site-description">{"type":"programming"}</div>
 </div>
 </header>
 <div class="page-content">
<H1>LDAP_OPEN</H1>
Section: C Library Functions (3)<BR>Updated: 2010/06/30<BR><A HREF="#index">Index</A>
<A HREF="/manpages/index.html">Return to Main Contents</A><HR>




<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

ldap_init, ldap_initialize, ldap_open - Initialize the LDAP library and open a connection to an LDAP server
<A NAME="lbAC">&nbsp;</A>
<H2>LIBRARY</H2>

OpenLDAP LDAP (libldap, -lldap)
<A NAME="lbAD">&nbsp;</A>
<H2>SYNOPSIS</H2>

<PRE>
<B>#include &lt;<A HREF="file:/usr/include/ldap.h">ldap.h</A>&gt;

LDAP *ldap_open(host, port)
</B>char *host;
int port;

<B>LDAP *ldap_init(host, port)
</B>char *host;
int port;

<B>int ldap_initialize(ldp, uri)
</B>LDAP **ldp;
char *uri;

<B>#include &lt;<A HREF="file:/usr/include/ldap_pvt.h">ldap_pvt.h</A>&gt;

int ldap_init_fd(fd, proto, uri, ldp)
</B>ber_socket_t fd;
int proto;
char *uri;
LDAP **ldp;
</PRE><A NAME="lbAE">&nbsp;</A>
<H2>DESCRIPTION</H2>

<P>

<B>ldap_open()</B>

opens a connection to an LDAP server and allocates an LDAP
structure which is used to identify
the connection and to maintain per-connection information.
<B>ldap_init()</B>

allocates an LDAP structure but does not open an initial connection.
<B>ldap_initialize()</B>

allocates an LDAP structure but does not open an initial connection.
<B>ldap_init_fd()</B>

allocates an LDAP structure using an existing connection on the
provided socket.
One
of these routines must be called before any operations are attempted.
<P>

<B>ldap_open()</B>

takes <I>host</I>, the hostname on which the LDAP server is
running, and <I>port</I>, the port number to which to connect.  If the default
IANA-assigned port of 389 is desired, LDAP_PORT should be specified for
<I>port</I>.  The <I>host</I> parameter may contain a blank-separated list
of hosts to try to connect to, and each host may optionally by of the form
<I>host:port</I>.  If present, the <I>:port</I> overrides the <I>port</I>
parameter to
<B>ldap_open()</B>.

Upon successfully making a connection to an
LDAP server,
<B>ldap_open()</B>

returns a pointer to an opaque LDAP structure, which should be passed
to subsequent calls to
<B>ldap_bind()</B>,

<B>ldap_search()</B>,

etc. Certain fields in the LDAP structure can be set to indicate size limit,
time limit, and how aliases are handled during operations; read and write access 
to those fields must occur by calling
<B><A HREF="/manpages/index.html?3+ldap_get_option">ldap_get_option</A></B>(3)

and
<B><A HREF="/manpages/index.html?3+ldap_set_option">ldap_set_option</A></B>(3)

respectively, whenever possible.
<P>

<B>ldap_init()</B>

acts just like
<B>ldap_open()</B>,

but does not open a connection
to the LDAP server.  The actual connection open will occur when the
first operation is attempted.
<P>

<B>ldap_initialize()</B>

acts like
<B>ldap_init()</B>,

but it returns an integer indicating either success or the failure reason,
and it allows to specify details for the connection in the schema portion
of the URI.
The
<I>uri</I>

parameter may be a comma- or whitespace-separated list of URIs
containing only the
<I>schema</I>,

the
<I>host</I>,

and the
<I>port</I>

fields.
Apart from
<B>ldap</B>,

other (non-standard) recognized values of the
<I>schema</I>

field are
<B>ldaps</B>

(LDAP over TLS),
<B>ldapi</B>

(LDAP over IPC),
and
<B>cldap</B>

(connectionless LDAP).
If other fields are present, the behavior is undefined.
<P>

At this time,
<B>ldap_open()</B>

and 
<B>ldap_init()</B>

are deprecated in favor of
<B>ldap_initialize()</B>,

essentially because the latter allows to specify a schema in the URI
and it explicitly returns an error code.
<P>

<B>ldap_init_fd()</B>

allows an LDAP structure to be initialized using an already-opened
connection. The
<I>proto</I>

parameter should be one of LDAP_PROTO_TCP, LDAP_PROTO_UDP,
or LDAP_PROTO_IPC
for a connection using TCP, UDP, or IPC, respectively. The value
LDAP_PROTO_EXT
may also be specified if user-supplied sockbuf handlers are going to
be used. Note that support for UDP is not implemented unless libldap
was built with LDAP_CONNECTIONLESS defined.
The
<I>uri</I>

parameter may optionally be provided for informational purposes.
<P>
Note: the first call into the LDAP library also initializes the global
options for the library. As such the first call should be single-threaded
or otherwise protected to insure that only one call is active. It is
recommended that
<B>ldap_get_option</B>()

or
<B>ldap_set_option</B>()

be used in the program's main thread before any additional threads are created.
See
<B><A HREF="/manpages/index.html?3+ldap_get_option">ldap_get_option</A></B>(3).

<P>
<A NAME="lbAF">&nbsp;</A>
<H2>ERRORS</H2>

If an error occurs,
<B>ldap_open()</B>

and
<B>ldap_init()</B>

will return NULL and 
<I>errno</I>

should be set appropriately.
<B>ldap_initialize()</B>

and
<B>ldap_init_fd()</B>

will directly return the LDAP code associated to the error (or
<I>LDAP_SUCCESS</I>

in case of success);
<I>errno</I>

should be set as well whenever appropriate.
<A NAME="lbAG">&nbsp;</A>
<H2>SEE ALSO</H2>

<B><A HREF="/manpages/index.html?3+ldap">ldap</A></B>(3),

<B><A HREF="/manpages/index.html?3+ldap_bind">ldap_bind</A></B>(3),

<B><A HREF="/manpages/index.html?3+ldap_get_option">ldap_get_option</A></B>(3),

<B><A HREF="/manpages/index.html?3+ldap_set_option">ldap_set_option</A></B>(3),

<B><A HREF="/manpages/index.html?3+lber-sockbuf">lber-sockbuf</A></B>(3),

<B><A HREF="/manpages/index.html?3+errno">errno</A></B>(3)

<A NAME="lbAH">&nbsp;</A>
<H2>ACKNOWLEDGEMENTS</H2>



<B>OpenLDAP Software</B>

is developed and maintained by The OpenLDAP Project &lt;<A HREF="http://www.openldap.org/">http://www.openldap.org/</A>&gt;.
<B>OpenLDAP Software</B>

is derived from University of Michigan LDAP 3.3 Release.  

<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">LIBRARY</A><DD>
<DT><A HREF="#lbAD">SYNOPSIS</A><DD>
<DT><A HREF="#lbAE">DESCRIPTION</A><DD>
<DT><A HREF="#lbAF">ERRORS</A><DD>
<DT><A HREF="#lbAG">SEE ALSO</A><DD>
<DT><A HREF="#lbAH">ACKNOWLEDGEMENTS</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/manpages/index.html">man2html</A>,
using the manual pages.<BR>
Time: 05:33:31 GMT, December 24, 2015
</div></body>
</HTML>
