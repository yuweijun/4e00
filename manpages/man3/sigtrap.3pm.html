<!DOCTYPE html>

<HTML><head><TITLE>Manpage of sigtrap</TITLE>
<meta charset="utf-8">
<link rel="stylesheet" href="/css/main.css" type="text/css">
</head>
<body>
 <header class="site-header">
 <div class="wrap"> <div class="site-title"><a href="/manpages/index.html">linux manpages</a></div>
 <div class="site-description">{"type":"programming"}</div>
 </div>
 </header>
 <div class="page-content"><div class="wrap">
<H1>sigtrap</H1>
Section: Perl Programmers Reference Guide (3pm)<BR>Updated: 2009-02-12<BR><A HREF="#index">Index</A>
<A HREF="/manpages/index.html">Return to Main Contents</A><HR>






<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

sigtrap - Perl pragma to enable simple signal handling
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<A NAME="ixAAC"></A>


<PRE>
    use sigtrap;
    use sigtrap qw(stack-trace old-interface-signals);  # equivalent
    use sigtrap qw(BUS SEGV PIPE ABRT);
    use sigtrap qw(die INT QUIT);
    use sigtrap qw(die normal-signals);
    use sigtrap qw(die untrapped normal-signals);
    use sigtrap qw(die untrapped normal-signals
                    stack-trace any error-signals);
    use sigtrap 'handler' =&gt; \&amp;my_handler, 'normal-signals';
    use sigtrap qw(handler my_handler normal-signals
                    stack-trace error-signals);

</PRE>


<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

<A NAME="ixAAD"></A>
The <B>sigtrap</B> pragma is a simple interface to installing signal
handlers.  You can have it install one of two handlers supplied by
<B>sigtrap</B> itself (one which provides a Perl stack trace and one which
simply <TT>&quot;die()&quot;</TT>s), or alternately you can supply your own handler for it
to install.  It can be told only to install a handler for signals which
are either untrapped or ignored.  It has a couple of lists of signals to
trap, plus you can supply your own list of signals.
<P>

The arguments passed to the <TT>&quot;use&quot;</TT> statement which invokes <B>sigtrap</B>
are processed in order.  When a signal name or the name of one of
<B>sigtrap</B>'s signal lists is encountered a handler is immediately
installed, when an option is encountered it affects subsequently
installed handlers.
<A NAME="lbAE">&nbsp;</A>
<H2>OPTIONS</H2>

<A NAME="ixAAE"></A>
<A NAME="lbAF">&nbsp;</A>
<H3><FONT SIZE="-1">SIGNAL</FONT> <FONT SIZE="-1">HANDLERS</FONT></H3>

<A NAME="ixAAF"></A>
These options affect which handler will be used for subsequently
installed signals.
<DL COMPACT>
<DT><B>stack-trace</B><DD>
<A NAME="ixAAG"></A>
The handler used for subsequently installed signals outputs a Perl stack
trace to <FONT SIZE="-1">STDERR</FONT> and then tries to dump core.  This is the default signal
handler.
<DT><B>die</B><DD>
<A NAME="ixAAH"></A>
The handler used for subsequently installed signals calls <TT>&quot;die&quot;</TT>
(actually <TT>&quot;croak&quot;</TT>) with a message indicating which signal was caught.
<DT><B>handler</B> <I>your-handler</I><DD>
<A NAME="ixAAI"></A>
<I>your-handler</I> will be used as the handler for subsequently installed
signals.  <I>your-handler</I> can be any value which is valid as an
assignment to an element of <TT>%SIG</TT>. See perlvar for examples of
handler functions.
</DL>
<A NAME="lbAG">&nbsp;</A>
<H3><FONT SIZE="-1">SIGNAL</FONT> <FONT SIZE="-1">LISTS</FONT></H3>

<A NAME="ixAAJ"></A>
<B>sigtrap</B> has a few built-in lists of signals to trap.  They are:
<DL COMPACT>
<DT><B>normal-signals</B><DD>
<A NAME="ixAAK"></A>
These are the signals which a program might normally expect to encounter
and which by default cause it to terminate.  They are <FONT SIZE="-1">HUP</FONT>, <FONT SIZE="-1">INT</FONT>, <FONT SIZE="-1">PIPE</FONT> and
<FONT SIZE="-1">TERM</FONT>.
<DT><B>error-signals</B><DD>
<A NAME="ixAAL"></A>
These signals usually indicate a serious problem with the Perl
interpreter or with your script.  They are <FONT SIZE="-1">ABRT</FONT>, <FONT SIZE="-1">BUS</FONT>, <FONT SIZE="-1">EMT</FONT>, <FONT SIZE="-1">FPE</FONT>, <FONT SIZE="-1">ILL</FONT>,
<FONT SIZE="-1">QUIT</FONT>, <FONT SIZE="-1">SEGV</FONT>, <FONT SIZE="-1">SYS</FONT> and <FONT SIZE="-1">TRAP</FONT>.
<DT><B>old-interface-signals</B><DD>
<A NAME="ixAAM"></A>
These are the signals which were trapped by default by the old
<B>sigtrap</B> interface, they are <FONT SIZE="-1">ABRT</FONT>, <FONT SIZE="-1">BUS</FONT>, <FONT SIZE="-1">EMT</FONT>, <FONT SIZE="-1">FPE</FONT>, <FONT SIZE="-1">ILL</FONT>, <FONT SIZE="-1">PIPE</FONT>, <FONT SIZE="-1">QUIT</FONT>,
<FONT SIZE="-1">SEGV</FONT>, <FONT SIZE="-1">SYS</FONT>, <FONT SIZE="-1">TERM</FONT>, and <FONT SIZE="-1">TRAP</FONT>.  If no signals or signals lists are passed to
<B>sigtrap</B>, this list is used.
</DL>
<P>

For each of these three lists, the collection of signals set to be
trapped is checked before trapping; if your architecture does not
implement a particular signal, it will not be trapped but rather
silently ignored.
<A NAME="lbAH">&nbsp;</A>
<H3><FONT SIZE="-1">OTHER</FONT></H3>

<A NAME="ixAAN"></A>
<DL COMPACT>
<DT><B>untrapped</B><DD>
<A NAME="ixAAO"></A>
This token tells <B>sigtrap</B> to install handlers only for subsequently
listed signals which aren't already trapped or ignored.
<DT><B>any</B><DD>
<A NAME="ixAAP"></A>
This token tells <B>sigtrap</B> to install handlers for all subsequently
listed signals.  This is the default behavior.
<DT><I>signal</I><DD>
<A NAME="ixAAQ"></A>
Any argument which looks like a signal name (that is,
<TT>&quot;/^[A-Z][A-Z0-9]*$/&quot;</TT>) indicates that <B>sigtrap</B> should install a
handler for that name.
<DT><I>number</I><DD>
<A NAME="ixAAR"></A>
Require that at least version <I>number</I> of <B>sigtrap</B> is being used.
</DL>
<A NAME="lbAI">&nbsp;</A>
<H2>EXAMPLES</H2>

<A NAME="ixAAS"></A>
Provide a stack trace for the old-interface-signals:
<P>



<PRE>
    use sigtrap;

</PRE>


<P>

Ditto:
<P>



<PRE>
    use sigtrap qw(stack-trace old-interface-signals);

</PRE>


<P>

Provide a stack trace on the 4 listed signals only:
<P>



<PRE>
    use sigtrap qw(BUS SEGV PIPE ABRT);

</PRE>


<P>

Die on <FONT SIZE="-1">INT</FONT> or <FONT SIZE="-1">QUIT:</FONT>
<P>



<PRE>
    use sigtrap qw(die INT QUIT);

</PRE>


<P>

Die on <FONT SIZE="-1">HUP</FONT>, <FONT SIZE="-1">INT</FONT>, <FONT SIZE="-1">PIPE</FONT> or <FONT SIZE="-1">TERM:</FONT>
<P>



<PRE>
    use sigtrap qw(die normal-signals);

</PRE>


<P>

Die on <FONT SIZE="-1">HUP</FONT>, <FONT SIZE="-1">INT</FONT>, <FONT SIZE="-1">PIPE</FONT> or <FONT SIZE="-1">TERM</FONT>, except don't change the behavior for
signals which are already trapped or ignored:
<P>



<PRE>
    use sigtrap qw(die untrapped normal-signals);

</PRE>


<P>

Die on receipt one of an of the <B>normal-signals</B> which is currently
<B>untrapped</B>, provide a stack trace on receipt of <B>any</B> of the
<B>error-signals</B>:
<P>



<PRE>
    use sigtrap qw(die untrapped normal-signals
                    stack-trace any error-signals);

</PRE>


<P>

Install <I>my_handler()</I> as the handler for the <B>normal-signals</B>:
<P>



<PRE>
    use sigtrap 'handler', \&amp;my_handler, 'normal-signals';

</PRE>


<P>

Install <I>my_handler()</I> as the handler for the normal-signals, provide a
Perl stack trace on receipt of one of the error-signals:
<P>



<PRE>
    use sigtrap qw(handler my_handler normal-signals
                    stack-trace error-signals);

</PRE>


<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">OPTIONS</A><DD>
<DL>
<DT><A HREF="#lbAF"><FONT SIZE="-1">SIGNAL</FONT> <FONT SIZE="-1">HANDLERS</FONT></A><DD>
<DT><A HREF="#lbAG"><FONT SIZE="-1">SIGNAL</FONT> <FONT SIZE="-1">LISTS</FONT></A><DD>
<DT><A HREF="#lbAH"><FONT SIZE="-1">OTHER</FONT></A><DD>
</DL>
<DT><A HREF="#lbAI">EXAMPLES</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/manpages/index.html">man2html</A>,
using the manual pages.<BR>
Time: 05:33:40 GMT, December 24, 2015
</div></div>
</body>
</HTML>
