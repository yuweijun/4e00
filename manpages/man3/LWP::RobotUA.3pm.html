<!DOCTYPE html>

<HTML><head><TITLE>Manpage of LWP::RobotUA</TITLE>
<meta charset="utf-8">
<link rel="stylesheet" href="/css/main.css" type="text/css">
</head>
<body>
 <header class="site-header">
 <div class="wrap"> <div class="site-title"><a href="/manpages/index.html">linux manpages</a></div>
 <div class="site-description">{"type":"documentation"}</div>
 </div>
 </header>
 <div class="page-content"><div class="wrap">
<H1>LWP::RobotUA</H1>
Section: User Contributed Perl Documentation (3)<BR>Updated: 2009-06-15<BR><A HREF="#index">Index</A>
<A HREF="/manpages/index.html">Return to Main Contents</A><HR>






<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

LWP::RobotUA - a class for well-behaved Web robots
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<A NAME="ixAAC"></A>


<PRE>
  use LWP::RobotUA;
  my $ua = LWP::RobotUA-&gt;new('my-robot/0.1', '<A HREF="mailto:me@foo.com">me@foo.com</A>');
  $ua-&gt;delay(10);  # be very nice -- max one hit every ten minutes!
  ...

  # Then just use it just like a normal LWP::UserAgent:
  my $response = $ua-&gt;get('<A HREF="http://whatever.int/...');">http://whatever.int/...');</A>
  ...

</PRE>


<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

<A NAME="ixAAD"></A>
This class implements a user agent that is suitable for robot
applications.  Robots should be nice to the servers they visit.  They
should consult the <I>/robots.txt</I> file to ensure that they are welcomed
and they should not make requests too frequently.
<P>

But before you consider writing a robot, take a look at
&lt;URL:<A HREF="http://www.robotstxt.org/">http://www.robotstxt.org/</A>&gt;.
<P>

When you use a <I>LWP::RobotUA</I> object as your user agent, then you do not
really have to think about these things yourself; <TT>&quot;robots.txt&quot;</TT> files
are automatically consulted and obeyed, the server isn't queried
too rapidly, and so on.  Just send requests
as you do when you are using a normal <I>LWP::UserAgent</I>
object (using <TT>&quot;$ua-&gt;get(...)&quot;</TT>, <TT>&quot;$ua-&gt;head(...)&quot;</TT>,
<TT>&quot;$ua-&gt;request(...)&quot;</TT>, etc.), and this
special agent will make sure you are nice.
<A NAME="lbAE">&nbsp;</A>
<H2>METHODS</H2>

<A NAME="ixAAE"></A>
The LWP::RobotUA is a sub-class of LWP::UserAgent and implements the
same methods. In addition the following methods are provided:
<DL COMPACT>
<DT>$ua = LWP::RobotUA-&gt;new( %options )<DD>


<A NAME="ixAAF"></A>

<DT>$ua = LWP::RobotUA-&gt;new( $agent, $from )<DD>


<A NAME="ixAAG"></A>
<DT>$ua = LWP::RobotUA-&gt;new( $agent, $from, $rules )<DD>


<A NAME="ixAAH"></A>

The LWP::UserAgent options <TT>&quot;agent&quot;</TT> and <TT>&quot;from&quot;</TT> are mandatory.  The
options <TT>&quot;delay&quot;</TT>, <TT>&quot;use_sleep&quot;</TT> and <TT>&quot;rules&quot;</TT> initialize attributes
private to the RobotUA.  If <TT>&quot;rules&quot;</TT> are not provided, then
<TT>&quot;WWW::RobotRules&quot;</TT> is instantiated providing an internal database of
<I>robots.txt</I>.


<P>


It is also possible to just pass the value of <TT>&quot;agent&quot;</TT>, <TT>&quot;from&quot;</TT> and
optionally <TT>&quot;rules&quot;</TT> as plain positional arguments.
<DT>$ua-&gt;delay<DD>


<A NAME="ixAAI"></A>

<DT>$ua-&gt;delay( $minutes )<DD>


<A NAME="ixAAJ"></A>

Get/set the minimum delay between requests to the same server, in
<I>minutes</I>.  The default is 1 minute.  Note that this number doesn't
have to be an integer; for example, this sets the delay to 10 seconds:


<P>




<PRE>
    $ua-&gt;delay(10/60);

</PRE>


<DT>$ua-&gt;use_sleep<DD>


<A NAME="ixAAK"></A>

<DT>$ua-&gt;use_sleep( $boolean )<DD>


<A NAME="ixAAL"></A>

Get/set a value indicating whether the <FONT SIZE="-1">UA</FONT> should <I>sleep()</I> if requests
arrive too fast, defined as <TT>$ua</TT>-&gt;delay minutes not passed since
last request to the given server.  The default is <FONT SIZE="-1">TRUE</FONT>.  If this value is
<FONT SIZE="-1">FALSE</FONT> then an internal <FONT SIZE="-1">SERVICE_UNAVAILABLE</FONT> response will be generated.
It will have an Retry-After header that indicates when it is <FONT SIZE="-1">OK</FONT> to
send another request to this server.
<DT>$ua-&gt;rules<DD>


<A NAME="ixAAM"></A>

<DT>$ua-&gt;rules( $rules )<DD>


<A NAME="ixAAN"></A>

Set/get which <I>WWW::RobotRules</I> object to use.
<DT>$ua-&gt;no_visits( $netloc )<DD>


<A NAME="ixAAO"></A>
Returns the number of documents fetched from this server host. Yeah I
know, this method should probably have been named <I>num_visits()</I> or
something like that. :-(
<DT>$ua-&gt;host_wait( $netloc )<DD>


<A NAME="ixAAP"></A>
Returns the number of <I>seconds</I> (from now) you must wait before you can
make a new request to this host.
<DT>$ua-&gt;as_string<DD>


<A NAME="ixAAQ"></A>
Returns a string that describes the state of the <FONT SIZE="-1">UA</FONT>.
Mainly useful for debugging.
</DL>
<A NAME="lbAF">&nbsp;</A>
<H2>SEE ALSO</H2>

<A NAME="ixAAR"></A>
LWP::UserAgent, WWW::RobotRules
<A NAME="lbAG">&nbsp;</A>
<H2>COPYRIGHT</H2>

<A NAME="ixAAS"></A>
Copyright 1996-2004 Gisle Aas.
<P>

This library is free software; you can redistribute it and/or
modify it under the same terms as Perl itself.
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">METHODS</A><DD>
<DT><A HREF="#lbAF">SEE ALSO</A><DD>
<DT><A HREF="#lbAG">COPYRIGHT</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/manpages/index.html">man2html</A>,
using the manual pages.<BR>
Time: 05:33:34 GMT, December 24, 2015
</div></div>
</body>
</HTML>
