<!DOCTYPE html>

<HTML><head><TITLE>Manpage of LBER_TYPES</TITLE>
<meta charset="utf-8">
<link rel="stylesheet" href="/css/main.css" type="text/css">
</head>
<body>
 <header class="site-header">
 <div class="wrap"> <div class="site-title"><a href="/manpages/index.html">linux manpages</a></div>
 <div class="site-description">{"type":"programming"}</div>
 </div>
 </header>
 <div class="page-content"><div class="wrap">
<H1>LBER_TYPES</H1>
Section: C Library Functions (3)<BR>Updated: 2010/06/30<BR><A HREF="#index">Index</A>
<A HREF="/manpages/index.html">Return to Main Contents</A><HR>




<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

ber_int_t, ber_uint_t, ber_len_t, ber_slen_t, ber_tag_t, struct berval, BerValue, BerVarray, BerElement, ber_bvfree, ber_bvecfree, ber_bvecadd, ber_bvarray_free, ber_bvarray_add, ber_bvdup, ber_dupbv, ber_bvstr, ber_bvstrdup, ber_str2bv, ber_alloc_t, ber_init, ber_init2, ber_free - OpenLDAP LBER types and allocation functions
<A NAME="lbAC">&nbsp;</A>
<H2>LIBRARY</H2>

OpenLDAP LBER (liblber, -llber)
<A NAME="lbAD">&nbsp;</A>
<H2>SYNOPSIS</H2>

<B>#include &lt;<A HREF="file:/usr/include/lber.h">lber.h</A>&gt;</B>

<P>

<PRE>
<B>typedef impl_tag_t ber_tag_t;
typedef impl_int_t ber_int_t;
typedef impl_uint_t ber_uint_t;
typedef impl_len_t ber_len_t;
typedef impl_slen_t ber_slen_t;

typedef struct berval {
    ber_len_t bv_len;
    char *bv_val;
} BerValue, *BerVarray;

typedef struct berelement BerElement;
</B></PRE>

<P>

<B>void ber_bvfree(struct berval *</B><I>bv</I><B>);</B>

<P>

<B>void ber_bvecfree(struct berval **</B><I>bvec</I><B>);</B>

<P>

<B>void ber_bvecadd(struct berval ***</B><I>bvec</I><B>, struct berval *</B><I>bv</I><B>);</B>

<P>

<B>void ber_bvarray_free(struct berval *</B><I>bvarray</I><B>);</B>

<P>

<B>void ber_bvarray_add(BerVarray *</B><I>bvarray</I><B>, BerValue *</B><I>bv</I><B>);</B>

<P>

<B>struct berval *ber_bvdup(const struct berval *</B><I>bv</I><B>);</B>

<P>

<B>struct berval *ber_dupbv(const struct berval *</B><I>dst</I><B>, struct berval *</B><I>src</I><B>);</B>

<P>

<B>struct berval *ber_bvstr(const char *</B><I>str</I><B>);</B>

<P>

<B>struct berval *ber_bvstrdup(const char *</B><I>str</I><B>);</B>

<P>

<B>struct berval *ber_str2bv(const char *</B><I>str</I><B>, ber_len_t </B><I>len</I><B>, int </B><I>dup</I><B>, struct berval *</B><I>bv</I><B>);</B>

<P>

<B>BerElement *ber_alloc_t(int </B><I>options</I><B>);</B>

<P>

<B>BerElement *ber_init(struct berval *</B><I>bv</I><B>);</B>

<P>

<B>void ber_init2(BerElement *</B><I>ber</I><B>, struct berval *</B><I>bv</I><B>, int </B><I>options</I><B>);</B>

<P>

<B>void ber_free(BerElement *</B><I>ber</I><B>, int </B><I>freebuf</I><B>);</B>

<A NAME="lbAE">&nbsp;</A>
<H2>DESCRIPTION</H2>

<P>

The following are the basic types and structures defined for use
with the Lightweight BER library.  
<P>

<B>ber_int_t</B>

is a signed integer of at least 32 bits.  It is commonly equivalent to
<B>int</B>.

<B>ber_uint_t</B>

is the unsigned variant of
<B>ber_int_t</B>.

<P>

<B>ber_len_t</B>

is an unsigned integer of at least 32 bits used to represent a length.  
It is commonly equivalent to a
<B>size_t</B>.

<B>ber_slen_t</B>

is the signed variant to
<B>ber_len_t</B>.

<P>

<B>ber_tag_t</B>

is an unsigned integer of at least 32 bits used to represent a
BER tag.  It is commonly equivalent to a
<B>unsigned&nbsp;long</B>.

<P>

The actual definitions of the integral impl_TYPE_t types are platform
specific.
<P>

<B>BerValue</B>,

commonly used as
<B>struct&nbsp;berval</B>,

is used to hold an arbitrary sequence of octets.
<B>bv_val</B>

points to
<B>bv_len</B>

octets.
<B>bv_val</B>

is not necessarily terminated by a NULL (zero) octet.
<B>ber_bvfree</B>()

frees a BerValue, pointed to by <I>bv</I>, returned from this API.  If <I>bv</I>
is NULL, the routine does nothing.
<P>

<B>ber_bvecfree</B>()

frees an array of BerValues (and the array), pointed to by <I>bvec</I>,
returned from this API.  If <I>bvec</I> is NULL, the routine does nothing.
<B>ber_bvecadd</B>()

appends the <I>bv</I> pointer to the <I>bvec</I> array.  Space for the array
is allocated as needed.  The end of the array is marked by a NULL pointer.
<P>

<B>ber_bvarray_free</B>()

frees an array of BerValues (and the array), pointed to by <I>bvarray</I>,
returned from this API.  If <I>bvarray</I> is NULL, the routine does nothing.
<B>ber_bvarray_add</B>()

appends the contents of the BerValue pointed to by <I>bv</I> to the
<I>bvarray</I> array.  Space for the new element is allocated as needed.
The end of the array is marked by a BerValue with a NULL bv_val field.
<P>

<B>ber_bvdup</B>()

returns a copy of a BerValue.  The routine returns NULL upon error
(e.g. out of memory).  The caller should use
<B>ber_bvfree</B>()

to deallocate the resulting BerValue.
<B>ber_dupbv</B>()

copies a BerValue from <I>src</I> to <I>dst</I>.  If <I>dst</I> is NULL a
new BerValue will be allocated to hold the copy.  The routine returns NULL
upon error, otherwise it returns a pointer to the copy.  If <I>dst</I> is
NULL the caller should use
<B>ber_bvfree</B>()

to deallocate the resulting BerValue, otherwise
<B>ber_memfree</B>()

should be used to deallocate the <I>dst-&gt;bv_val</I>.  (The
<B>ber_bvdup</B>()

function is internally implemented as ber_dupbv(NULL, bv).
<B>ber_bvdup</B>()

is provided only for compatibility with an expired draft of the LDAP C API;
<B>ber_dupbv</B>()

is the preferred interface.)
<P>

<B>ber_bvstr</B>()

returns a BerValue containing the string pointed to by <I>str</I>.
<B>ber_bvstrdup</B>()

returns a BerValue containing a copy of the string pointed to by <I>str</I>.
<B>ber_str2bv</B>()

returns a BerValue containing the string pointed to by <I>str</I>, whose
length may be optionally specified in <I>len</I>.  If <I>dup</I> is non-zero,
the BerValue will contain a copy of <I>str</I>.  If <I>len</I> is zero, the
number of bytes to copy will be determined by
<B><A HREF="/manpages/index.html?3+strlen">strlen</A></B>(3),

otherwise <I>len</I> bytes will be copied.  If <I>bv</I> is non-NULL, the result
will be stored in the given BerValue, otherwise a new BerValue will be
allocated to store the result.  NOTE: Both
<B>ber_bvstr</B>()

and
<B>ber_bvstrdup</B>()

are implemented as macros using
<B>ber_str2bv</B>()

in this version of the library.
<P>

<B>BerElement</B>

is an opaque structure used to maintain state information used in
encoding and decoding.
<B>ber_alloc_t</B>()

is used to create an empty BerElement structure. If
<B>LBER_USE_DER</B>

is specified for the
<I>options</I>

parameter then data lengths for data written to the BerElement will be
encoded in the minimal number of octets required, otherwise they will
always be written as four byte values. 
<B>ber_init</B>()

creates a BerElement structure that is initialized with a copy of the
data in its
<I>bv</I>

parameter.
<B>ber_init2</B>()

initializes an existing BerElement
<I>ber</I>

using the data in the
<I>bv</I>

parameter. The data is referenced directly, not copied. The
<I>options</I>

parameter is the same as for
<B>ber_alloc_t</B>().

<B>ber_free</B>()

frees a BerElement pointed to by <I>ber</I>.  If <I>ber</I> is NULL, the routine
does nothing.  If <I>freebuf</I> is zero, the internal buffer is not freed.
<A NAME="lbAF">&nbsp;</A>
<H2>SEE ALSO</H2>

<B><A HREF="/manpages/index.html?3+lber-encode">lber-encode</A></B>(3),

<B><A HREF="/manpages/index.html?3+lber-decode">lber-decode</A></B>(3),

<B><A HREF="/manpages/index.html?3+lber-memory">lber-memory</A></B>(3)

<P>

<A NAME="lbAG">&nbsp;</A>
<H2>ACKNOWLEDGEMENTS</H2>



<B>OpenLDAP Software</B>

is developed and maintained by The OpenLDAP Project &lt;<A HREF="http://www.openldap.org/">http://www.openldap.org/</A>&gt;.
<B>OpenLDAP Software</B>

is derived from University of Michigan LDAP 3.3 Release.  

<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">LIBRARY</A><DD>
<DT><A HREF="#lbAD">SYNOPSIS</A><DD>
<DT><A HREF="#lbAE">DESCRIPTION</A><DD>
<DT><A HREF="#lbAF">SEE ALSO</A><DD>
<DT><A HREF="#lbAG">ACKNOWLEDGEMENTS</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/manpages/index.html">man2html</A>,
using the manual pages.<BR>
Time: 05:33:12 GMT, December 24, 2015
</div></div>
</body>
</HTML>
