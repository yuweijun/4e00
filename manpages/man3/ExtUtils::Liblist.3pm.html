<!DOCTYPE html>

<HTML><head><TITLE>Manpage of ExtUtils::Liblist</TITLE>
<meta charset="utf-8">
<link rel="stylesheet" href="/css/main.css" type="text/css">
</head>
<body>
 <header class="site-header">
 <div class="wrap"> <div class="site-title"><a href="/manpages/index.html">linux manpages</a></div>
 <div class="site-description">{"type":"programming"}</div>
 </div>
 </header>
 <div class="page-content"><div class="wrap">
<H1>ExtUtils::Liblist</H1>
Section: Perl Programmers Reference Guide (3pm)<BR>Updated: 2012-06-22<BR><A HREF="#index">Index</A>
<A HREF="/manpages/index.html">Return to Main Contents</A><HR>






<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

ExtUtils::Liblist - determine libraries to use and how to use them
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<A NAME="ixAAC"></A>


<PRE>
  require ExtUtils::Liblist;

  $MM-&gt;ext($potential_libs, $verbose, $need_names);

  # Usually you can get away with:
  ExtUtils::Liblist-&gt;ext($potential_libs, $verbose, $need_names)

</PRE>


<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

<A NAME="ixAAD"></A>
This utility takes a list of libraries in the form <TT>&quot;-llib1 -llib2
-llib3&quot;</TT> and returns lines suitable for inclusion in an extension
Makefile.  Extra library paths may be included with the form
<TT>&quot;-L/another/path&quot;</TT> this will affect the searches for all subsequent
libraries.
<P>

It returns an array of four or five scalar values: <FONT SIZE="-1">EXTRALIBS</FONT>,
<FONT SIZE="-1">BSLOADLIBS</FONT>, <FONT SIZE="-1">LDLOADLIBS</FONT>, <FONT SIZE="-1">LD_RUN_PATH</FONT>, and, optionally, a reference to
the array of the filenames of actual libraries.  Some of these don't
mean anything unless on Unix.  See the details about those platform
specifics below.  The list of the filenames is returned only if
<TT>$need_names</TT> argument is true.
<P>

Dependent libraries can be linked in one of three ways:
<DL COMPACT>
<DT>*<DD>
For static extensions


<P>


by the ld command when the perl binary is linked with the extension
library. See <FONT SIZE="-1">EXTRALIBS</FONT> below.
<DT>*<DD>
For dynamic extensions at build/link time


<P>


by the ld command when the shared object is built/linked. See
<FONT SIZE="-1">LDLOADLIBS</FONT> below.
<DT>*<DD>
For dynamic extensions at load time


<P>


by the DynaLoader when the shared object is loaded. See <FONT SIZE="-1">BSLOADLIBS</FONT>
below.
</DL>
<A NAME="lbAE">&nbsp;</A>
<H3><FONT SIZE="-1">EXTRALIBS</FONT></H3>

<A NAME="ixAAE"></A>
List of libraries that need to be linked with when linking a perl
binary which includes this extension. Only those libraries that
actually exist are included.  These are written to a file and used
when linking perl.
<A NAME="lbAF">&nbsp;</A>
<H3><FONT SIZE="-1">LDLOADLIBS</FONT> and <FONT SIZE="-1">LD_RUN_PATH</FONT></H3>

<A NAME="ixAAF"></A>
List of those libraries which can or must be linked into the shared
library when created using ld. These may be static or dynamic
libraries.  <FONT SIZE="-1">LD_RUN_PATH</FONT> is a colon separated list of the directories
in <FONT SIZE="-1">LDLOADLIBS</FONT>. It is passed as an environment variable to the process
that links the shared library.
<P>

Fedora extension: This generation of <FONT SIZE="-1">LD_RUN_PATH</FONT> is disabled by default.
To use the generated <FONT SIZE="-1">LD_RUN_PATH</FONT> for all links, set the <FONT SIZE="-1">USE_MM_LD_RUN_PATH</FONT>
MakeMaker object attribute / argument, (or set the <TT>$USE_MM_LD_RUN_PATH</TT>
environment variable).
<A NAME="lbAG">&nbsp;</A>
<H3><FONT SIZE="-1">BSLOADLIBS</FONT></H3>

<A NAME="ixAAG"></A>
List of those libraries that are needed but can be linked in
dynamically at run time on this platform.  SunOS/Solaris does not need
this because ld records the information (from <FONT SIZE="-1">LDLOADLIBS</FONT>) into the
object file.  This list is used to create a .bs (bootstrap) file.
<A NAME="lbAH">&nbsp;</A>
<H2>PORTABILITY</H2>

<A NAME="ixAAH"></A>
This module deals with a lot of system dependencies and has quite a
few architecture specific <TT>&quot;if&quot;</TT>s in the code.
<A NAME="lbAI">&nbsp;</A>
<H3><FONT SIZE="-1">VMS</FONT> implementation</H3>

<A NAME="ixAAI"></A>
The version of <I>ext()</I> which is executed under <FONT SIZE="-1">VMS</FONT> differs from the
Unix-OS/2 version in several respects:
<DL COMPACT>
<DT>*<DD>
Input library and path specifications are accepted with or without the
<TT>&quot;-l&quot;</TT> and <TT>&quot;-L&quot;</TT> prefixes used by Unix linkers.  If neither prefix is
present, a token is considered a directory to search if it is in fact
a directory, and a library to search for otherwise.  Authors who wish
their extensions to be portable to Unix or <FONT SIZE="-1">OS/2</FONT> should use the Unix
prefixes, since the Unix-OS/2 version of <I>ext()</I> requires them.
<DT>*<DD>
Wherever possible, shareable images are preferred to object libraries,
and object libraries to plain object files.  In accordance with <FONT SIZE="-1">VMS</FONT>
naming conventions, <I>ext()</I> looks for files named <I>lib</I>shr and <I>lib</I>rtl;
it also looks for <I>lib</I>lib and lib<I>lib</I> to accommodate Unix conventions
used in some ported software.
<DT>*<DD>
For each library that is found, an appropriate directive for a linker options
file is generated.  The return values are space-separated strings of
these directives, rather than elements used on the linker command line.
<DT>*<DD>
<FONT SIZE="-1">LDLOADLIBS</FONT> contains both the libraries found based on <TT>$potential_libs</TT> and
the CRTLs, if any, specified in Config.pm.  <FONT SIZE="-1">EXTRALIBS</FONT> contains just those
libraries found based on <TT>$potential_libs</TT>.  <FONT SIZE="-1">BSLOADLIBS</FONT> and <FONT SIZE="-1">LD_RUN_PATH</FONT>
are always empty.
</DL>
<P>

In addition, an attempt is made to recognize several common Unix library
names, and filter them out or convert them to their <FONT SIZE="-1">VMS</FONT> equivalents, as
appropriate.
<P>

In general, the <FONT SIZE="-1">VMS</FONT> version of <I>ext()</I> should properly handle input from
extensions originally designed for a Unix or <FONT SIZE="-1">VMS</FONT> environment.  If you
encounter problems, or discover cases where the search could be improved,
please let us know.
<A NAME="lbAJ">&nbsp;</A>
<H3>Win32 implementation</H3>

<A NAME="ixAAJ"></A>
The version of <I>ext()</I> which is executed under Win32 differs from the
Unix-OS/2 version in several respects:
<DL COMPACT>
<DT>*<DD>
If <TT>$potential_libs</TT> is empty, the return value will be empty.
Otherwise, the libraries specified by <TT>$Config{perllibs}</TT> (see Config.pm)
will be appended to the list of <TT>$potential_libs</TT>.  The libraries
will be searched for in the directories specified in <TT>$potential_libs</TT>,
<TT>$Config{libpth}</TT>, and in <TT>&quot;$Config{installarchlib}/CORE&quot;</TT>.
For each library that is found,  a space-separated list of fully qualified
library pathnames is generated.
<DT>*<DD>
Input library and path specifications are accepted with or without the
<TT>&quot;-l&quot;</TT> and <TT>&quot;-L&quot;</TT> prefixes used by Unix linkers.


<P>


An entry of the form <TT>&quot;-La:\foo&quot;</TT> specifies the <TT>&quot;a:\foo&quot;</TT> directory to look
for the libraries that follow.


<P>


An entry of the form <TT>&quot;-lfoo&quot;</TT> specifies the library <TT>&quot;foo&quot;</TT>, which may be
spelled differently depending on what kind of compiler you are using.  If
you are using <FONT SIZE="-1">GCC</FONT>, it gets translated to <TT>&quot;libfoo.a&quot;</TT>, but for other win32
compilers, it becomes <TT>&quot;foo.lib&quot;</TT>.  If no files are found by those translated
names, one more attempt is made to find them using either <TT>&quot;foo.a&quot;</TT> or
<TT>&quot;libfoo.lib&quot;</TT>, depending on whether <FONT SIZE="-1">GCC</FONT> or some other win32 compiler is
being used, respectively.


<P>


If neither the <TT>&quot;-L&quot;</TT> or <TT>&quot;-l&quot;</TT> prefix is present in an entry, the entry is
considered a directory to search if it is in fact a directory, and a
library to search for otherwise.  The <TT>$Config{lib_ext}</TT> suffix will
be appended to any entries that are not directories and don't already have
the suffix.


<P>


Note that the <TT>&quot;-L&quot;</TT> and <TT>&quot;-l&quot;</TT> prefixes are <B>not required</B>, but authors
who wish their extensions to be portable to Unix or <FONT SIZE="-1">OS/2</FONT> should use the
prefixes, since the Unix-OS/2 version of <I>ext()</I> requires them.
<DT>*<DD>
Entries cannot be plain object files, as many Win32 compilers will
not handle object files in the place of libraries.
<DT>*<DD>
Entries in <TT>$potential_libs</TT> beginning with a colon and followed by
alphanumeric characters are treated as flags.  Unknown flags will be ignored.


<P>


An entry that matches <TT>&quot;/:nodefault/i&quot;</TT> disables the appending of default
libraries found in <TT>$Config{perllibs}</TT> (this should be only needed very rarely).


<P>


An entry that matches <TT>&quot;/:nosearch/i&quot;</TT> disables all searching for
the libraries specified after it.  Translation of <TT>&quot;-Lfoo&quot;</TT> and
<TT>&quot;-lfoo&quot;</TT> still happens as appropriate (depending on compiler being used,
as reflected by <TT>$Config{cc}</TT>), but the entries are not verified to be
valid files or directories.


<P>


An entry that matches <TT>&quot;/:search/i&quot;</TT> reenables searching for
the libraries specified after it.  You can put it at the end to
enable searching for default libraries specified by <TT>$Config{perllibs}</TT>.
<DT>*<DD>
The libraries specified may be a mixture of static libraries and
import libraries (to link with DLLs).  Since both kinds are used
pretty transparently on the Win32 platform, we do not attempt to
distinguish between them.
<DT>*<DD>
<FONT SIZE="-1">LDLOADLIBS</FONT> and <FONT SIZE="-1">EXTRALIBS</FONT> are always identical under Win32, and <FONT SIZE="-1">BSLOADLIBS</FONT>
and <FONT SIZE="-1">LD_RUN_PATH</FONT> are always empty (this may change in future).
<DT>*<DD>
You must make sure that any paths and path components are properly
surrounded with double-quotes if they contain spaces. For example,
<TT>$potential_libs</TT> could be (literally):


<P>




<PRE>
        &quot;-Lc:\Program Files\vc\lib&quot; msvcrt.lib &quot;la test\foo bar.lib&quot;

</PRE>




<P>


Note how the first and last entries are protected by quotes in order
to protect the spaces.
<DT>*<DD>
Since this module is most often used only indirectly from extension
<TT>&quot;Makefile.PL&quot;</TT> files, here is an example <TT>&quot;Makefile.PL&quot;</TT> entry to add
a library to the build process for an extension:


<P>




<PRE>
        LIBS =&gt; ['-lgl']

</PRE>




<P>


When using <FONT SIZE="-1">GCC</FONT>, that entry specifies that MakeMaker should first look
for <TT>&quot;libgl.a&quot;</TT> (followed by <TT>&quot;gl.a&quot;</TT>) in all the locations specified by
<TT>$Config{libpth}</TT>.


<P>


When using a compiler other than <FONT SIZE="-1">GCC</FONT>, the above entry will search for
<TT>&quot;gl.lib&quot;</TT> (followed by <TT>&quot;libgl.lib&quot;</TT>).


<P>


If the library happens to be in a location not in <TT>$Config{libpth}</TT>,
you need:


<P>




<PRE>
        LIBS =&gt; ['-Lc:\gllibs -lgl']

</PRE>




<P>


Here is a less often used example:


<P>




<PRE>
        LIBS =&gt; ['-lgl', ':nosearch -Ld:\mesalibs -lmesa -luser32']

</PRE>




<P>


This specifies a search for library <TT>&quot;gl&quot;</TT> as before.  If that search
fails to find the library, it looks at the next item in the list. The
<TT>&quot;:nosearch&quot;</TT> flag will prevent searching for the libraries that follow,
so it simply returns the value as <TT>&quot;-Ld:\mesalibs -lmesa -luser32&quot;</TT>,
since <FONT SIZE="-1">GCC</FONT> can use that value as is with its linker.


<P>


When using the Visual C compiler, the second item is returned as
<TT>&quot;-libpath:d:\mesalibs mesa.lib user32.lib&quot;</TT>.


<P>


When using the Borland compiler, the second item is returned as
<TT>&quot;-Ld:\mesalibs mesa.lib user32.lib&quot;</TT>, and MakeMaker takes care of
moving the <TT>&quot;-Ld:\mesalibs&quot;</TT> to the correct place in the linker
command line.
</DL>
<A NAME="lbAK">&nbsp;</A>
<H2>SEE ALSO</H2>

<A NAME="ixAAK"></A>
ExtUtils::MakeMaker
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DL>
<DT><A HREF="#lbAE"><FONT SIZE="-1">EXTRALIBS</FONT></A><DD>
<DT><A HREF="#lbAF"><FONT SIZE="-1">LDLOADLIBS</FONT> and <FONT SIZE="-1">LD_RUN_PATH</FONT></A><DD>
<DT><A HREF="#lbAG"><FONT SIZE="-1">BSLOADLIBS</FONT></A><DD>
</DL>
<DT><A HREF="#lbAH">PORTABILITY</A><DD>
<DL>
<DT><A HREF="#lbAI"><FONT SIZE="-1">VMS</FONT> implementation</A><DD>
<DT><A HREF="#lbAJ">Win32 implementation</A><DD>
</DL>
<DT><A HREF="#lbAK">SEE ALSO</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/manpages/index.html">man2html</A>,
using the manual pages.<BR>
Time: 05:33:26 GMT, December 24, 2015
</div></div>
</body>
</HTML>
