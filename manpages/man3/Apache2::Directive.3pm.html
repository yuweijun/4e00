<!DOCTYPE html>

<HTML><head><TITLE>Manpage of docs::api::Apache2::Directive</TITLE>
<meta charset="utf-8">
<link rel="stylesheet" href="/css/main.css" type="text/css">
</head>
<body>
 <header class="site-header">
 <div class="wrap"> <div class="site-title"><a href="/manpages/index.html">linux manpages</a></div>
 <div class="site-description">{"type":"documentation"}</div>
 </div>
 </header>
 <div class="page-content"><div class="wrap">
<H1>docs::api::Apache2::Directive</H1>
Section: User Contributed Perl Documentation (3)<BR>Updated: 2007-11-12<BR><A HREF="#index">Index</A>
<A HREF="/manpages/index.html">Return to Main Contents</A><HR>






<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

Apache2::Directive - Perl API for manipulating the Apache configuration tree
<A NAME="lbAC">&nbsp;</A>
<H2>Synopsis</H2>

<A NAME="ixAAC"></A>


<PRE>
  use Apache2::Directive ();
  
  my $tree = Apache2::Directive::conftree();
  
  my $documentroot = $tree-&gt;lookup('DocumentRoot');
  
  my $vhost = $tree-&gt;lookup('VirtualHost', 'localhost:8000');
  my $servername = $vhost-&gt;{'ServerName'};
  
  use Data::Dumper;
  print Dumper $tree-&gt;as_hash;
  
  my $node = $tree;
  while ($node) {
      print $node-&gt;as_string;
  
      #do something with $node
  
      my $directive = $node-&gt;directive;
      my $args = $node-&gt;args;
      my $filename = $node-&gt;filename;
      my $line_num = $node-&gt;line_num;
  
      if (my $kid = $node-&gt;first_child) {
          $node = $kid;
      }
      elsif (my $next = $node-&gt;next) {
          $node = $next;
      }
      else {
          if (my $parent = $node-&gt;parent) {
              $node = $parent-&gt;next;
          }
          else {
              $node = undef;
          }
      }
  }

</PRE>


<A NAME="lbAD">&nbsp;</A>
<H2>Description</H2>

<A NAME="ixAAD"></A>
<TT>&quot;Apache2::Directive&quot;</TT> provides the Perl <FONT SIZE="-1">API</FONT> for manipulating the Apache
configuration tree
<A NAME="lbAE">&nbsp;</A>
<H2>API</H2>

<A NAME="ixAAE"></A>
<TT>&quot;Apache2::Directive&quot;</TT> provides the following functions and/or methods:
<A NAME="lbAF">&nbsp;</A>
<H3>args</H3>



<A NAME="ixAAF"></A>
Get the arguments for the current directive:
<P>



<PRE>
  $args = $node-&gt;args();

</PRE>


<DL COMPACT>
<DT>obj: $node ( Apache2::Directive object )<DD>


<A NAME="ixAAG"></A>

<DT>ret: $args ( string )<DD>


<A NAME="ixAAH"></A>

Arguments are separated by a whitespace in the string.
<DT>since: 2.0.00<DD>
<A NAME="ixAAI"></A>
</DL>
<P>

For example, in <I>httpd.conf</I>:
<P>



<PRE>
  PerlSwitches -M/opt/lib -M/usr/local/lib -wT

</PRE>


<P>

And later:
<P>



<PRE>
  my $tree = Apache2::Directive::conftree();
  my $node = $tree-&gt;lookup('PerlSwitches');
  my $args = $node-&gt;args;

</PRE>


<P>

<TT>$args</TT> now contains the string ``-M/opt/lib -M/usr/local/lib -wT''
<A NAME="lbAG">&nbsp;</A>
<H3>as_hash</H3>



<A NAME="ixAAJ"></A>
Get a hash representation of the configuration tree, in a format
suitable for inclusion in &lt;Perl&gt; sections.
<P>



<PRE>
   $config_hash = $conftree-&gt;as_hash();

</PRE>


<DL COMPACT>
<DT>obj: $conftree ( Apache2::Directive object )<DD>


<A NAME="ixAAK"></A>
The config tree to stringify
<DT>ret: $config_hash ( <FONT SIZE="-1">HASH</FONT> reference )<DD>


<A NAME="ixAAL"></A>

<DT>since: 2.0.00<DD>
<A NAME="ixAAM"></A>

</DL>
<P>

For example: in <I>httpd.conf</I>:
<P>



<PRE>
  &lt;Location /test&gt;
    SetHandler perl-script
    PerlHandler Test::Module
  &lt;/Location&gt;

</PRE>


<P>

And later:
<P>



<PRE>
  my $tree = Apache2::Directive::conftree();
  my $node = $tree-&gt;lookup('Location', '/test/');
  my $hash = $node-&gt;as_hash;

</PRE>


<P>

<TT>$hash</TT> now is:
<P>



<PRE>
  {
    'SetHandler'  =&gt; 'perl-script',
    'PerlHandler' =&gt; 'Test::Module',
  }

</PRE>


<A NAME="lbAH">&nbsp;</A>
<H3>as_string</H3>



<A NAME="ixAAN"></A>
Get a string representation of the configuration node, in
<I>httpd.conf</I> format.
<P>



<PRE>
   $string = $node-&gt;as_string();

</PRE>


<DL COMPACT>
<DT>obj: $node ( Apache2::Directive object )<DD>


<A NAME="ixAAO"></A>
The config tree to stringify
<DT>ret: $string ( string )<DD>


<A NAME="ixAAP"></A>

<DT>since: 2.0.00<DD>
<A NAME="ixAAQ"></A>

</DL>
<P>

For example: in <I>httpd.conf</I>:
<P>



<PRE>
  &lt;Location /test&gt;
    SetHandler perl-script
    PerlHandler Test::Module
  &lt;/Location&gt;

</PRE>


<P>

And later:
<P>



<PRE>
  my $tree = Apache2::Directive::conftree();
  my $node = $tree-&gt;lookup('Location', '/test/');
  my $string = $node-&gt;as_string;

</PRE>


<P>

<TT>$string</TT> is now:
<P>



<PRE>
  SetHandler perl-script
  PerlHandler Test::Module

</PRE>


<A NAME="lbAI">&nbsp;</A>
<H3>conftree</H3>



<A NAME="ixAAR"></A>
Get the root of the configuration tree:
<P>



<PRE>
  $conftree = Apache2::Directive::conftree();

</PRE>


<DL COMPACT>
<DT>obj: Apache2::Directive ( class name )<DD>


<A NAME="ixAAS"></A>

<DT>ret: $conftree ( Apache2::Directive object )<DD>


<A NAME="ixAAT"></A>
<DT>since: 2.0.00<DD>
<A NAME="ixAAU"></A>

</DL>
<A NAME="lbAJ">&nbsp;</A>
<H3>directive</H3>



<A NAME="ixAAV"></A>
Get the name of the directive in <TT>$node</TT>:
<P>



<PRE>
  $name = $node-&gt;directive();

</PRE>


<DL COMPACT>
<DT>obj: $node ( Apache2::Directive object )<DD>


<A NAME="ixAAW"></A>

<DT>ret: $name ( string )<DD>


<A NAME="ixAAX"></A>
<DT>since: 2.0.00<DD>
<A NAME="ixAAY"></A>

</DL>
<A NAME="lbAK">&nbsp;</A>
<H3>filename</H3>



<A NAME="ixAAZ"></A>
Get the <I>filename</I> the configuration node was created from:
<P>



<PRE>
  $filename = $node-&gt;filename();

</PRE>


<DL COMPACT>
<DT>obj: $node ( Apache2::Directive object )<DD>


<A NAME="ixABA"></A>

<DT>ret: $filename ( string )<DD>


<A NAME="ixABB"></A>
<DT>since: 2.0.00<DD>
<A NAME="ixABC"></A>

</DL>
<P>

For example:
<P>



<PRE>
  my $tree = Apache2::Directive::conftree();
  my $node = $tree-&gt;lookup('VirtualHost', 'example.com');
  my $filename = $node-&gt;filename;

</PRE>


<P>

<TT>$filename</TT> is now the full path to the <I>httpd.conf</I> that
VirtualHost was defined in.
<P>

If the directive was added with 
<TT>&quot;add_config()&quot;</TT>,
the filename will be the path to the <I>httpd.conf</I> that trigerred
that Perl code.
<A NAME="lbAL">&nbsp;</A>
<H3>first_child</H3>



<A NAME="ixABD"></A>
Get the first child node of this directive:
<P>



<PRE>
  $child_node = $node-&gt;first_child;

</PRE>


<DL COMPACT>
<DT>obj: $node ( Apache2::Directive object )<DD>


<A NAME="ixABE"></A>

<DT>ret: $child_node ( Apache2::Directive object )<DD>


<A NAME="ixABF"></A>

Returns the first child node of <TT>$node</TT>, <TT>&quot;undef&quot;</TT> if there is none
<DT>since: 2.0.00<DD>
<A NAME="ixABG"></A>
</DL>
<A NAME="lbAM">&nbsp;</A>
<H3>line_num</H3>



<A NAME="ixABH"></A>
Get the line number in a <I>filename</I> this node was created at:
<P>



<PRE>
  $lineno = $node-&gt;line_num();

</PRE>


<DL COMPACT>
<DT>obj: $node ( Apache2::Directive object )<DD>


<A NAME="ixABI"></A>

<DT>arg1: $lineno (integer)<DD>


<A NAME="ixABJ"></A>
<DT>since: 2.0.00<DD>
<A NAME="ixABK"></A>

</DL>
<A NAME="lbAN">&nbsp;</A>
<H3>lookup</H3>



<A NAME="ixABL"></A>
Get the node(s) matching a certain value.
<P>



<PRE>
  $node  = $conftree-&gt;lookup($directive, $args);
  @nodes = $conftree-&gt;lookup($directive, $args);

</PRE>


<DL COMPACT>
<DT>obj: $conftree ( Apache2::Directive object )<DD>


<A NAME="ixABM"></A>
The config tree to stringify
<DT>arg1: $directive ( string )<DD>


<A NAME="ixABN"></A>
The name of the directive to search for
<DT>opt arg2: args ( string )<DD>


<A NAME="ixABO"></A>
Optional args to the directive to filter for
<DT>ret: $string ( string / <FONT SIZE="-1">ARRAY</FONT> of <FONT SIZE="-1">HASH</FONT> refs )<DD>


<A NAME="ixABP"></A>
In <FONT SIZE="-1">LIST</FONT> context, it returns all matching nodes.


<P>


In <FONT SIZE="-1">SCALAR</FONT> context, it returns only the first matching node.


<P>


If called with only <TT>$directive</TT> value, this method returns all nodes
from that directive. For example:


<P>




<PRE>
  @Alias = $conftree-&gt;lookup('Alias');

</PRE>




<P>


returns all nodes for <TT>&quot;Alias&quot;</TT> directives.


<P>


If called with an extra <TT>$args</TT> argument, it returns only nodes where
both the directive and the args matched. For example:


<P>




<PRE>
  $VHost = $tree-&gt;lookup('VirtualHost', '_default_:8000');

</PRE>


<DT>since: 2.0.00<DD>
<A NAME="ixABQ"></A>
</DL>
<A NAME="lbAO">&nbsp;</A>
<H3>next</H3>



<A NAME="ixABR"></A>
Get the next directive node in the tree:
<P>



<PRE>
  $next_node = $node-&gt;next();

</PRE>


<DL COMPACT>
<DT>obj: $node ( Apache2::Directive object )<DD>


<A NAME="ixABS"></A>

<DT>ret: $next_node ( Apache2::Directive object )<DD>


<A NAME="ixABT"></A>

Returns the next sibling of <TT>$node</TT>, <TT>&quot;undef&quot;</TT> if there is none
<DT>since: 2.0.00<DD>
<A NAME="ixABU"></A>
</DL>
<A NAME="lbAP">&nbsp;</A>
<H3>parent</H3>



<A NAME="ixABV"></A>
Get the parent node of this directive:
<P>



<PRE>
  $parent_node = $node-&gt;parent();

</PRE>


<DL COMPACT>
<DT>obj: $node ( Apache2::Directive object )<DD>


<A NAME="ixABW"></A>

<DT>ret: parent_node ( Apache2::Directive object )<DD>


<A NAME="ixABX"></A>

Returns the parent of <TT>$node</TT>, <TT>&quot;undef&quot;</TT> if this node is the root node
<DT>since: 2.0.00<DD>
<A NAME="ixABY"></A>
</DL>
<A NAME="lbAQ">&nbsp;</A>
<H2>See Also</H2>

<A NAME="ixABZ"></A>
mod_perl 2.0 documentation.
<A NAME="lbAR">&nbsp;</A>
<H2>Copyright</H2>

<A NAME="ixACA"></A>
mod_perl 2.0 and its core modules are copyrighted under
The Apache Software License, Version 2.0.
<A NAME="lbAS">&nbsp;</A>
<H2>Authors</H2>

<A NAME="ixACB"></A>
The mod_perl development team and numerous
contributors.
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">Synopsis</A><DD>
<DT><A HREF="#lbAD">Description</A><DD>
<DT><A HREF="#lbAE">API</A><DD>
<DL>
<DT><A HREF="#lbAF">args</A><DD>
<DT><A HREF="#lbAG">as_hash</A><DD>
<DT><A HREF="#lbAH">as_string</A><DD>
<DT><A HREF="#lbAI">conftree</A><DD>
<DT><A HREF="#lbAJ">directive</A><DD>
<DT><A HREF="#lbAK">filename</A><DD>
<DT><A HREF="#lbAL">first_child</A><DD>
<DT><A HREF="#lbAM">line_num</A><DD>
<DT><A HREF="#lbAN">lookup</A><DD>
<DT><A HREF="#lbAO">next</A><DD>
<DT><A HREF="#lbAP">parent</A><DD>
</DL>
<DT><A HREF="#lbAQ">See Also</A><DD>
<DT><A HREF="#lbAR">Copyright</A><DD>
<DT><A HREF="#lbAS">Authors</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/manpages/index.html">man2html</A>,
using the manual pages.<BR>
Time: 05:33:11 GMT, December 24, 2015
</div></div>
</body>
</HTML>
