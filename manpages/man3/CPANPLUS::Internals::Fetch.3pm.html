<!DOCTYPE html>

<HTML><head><TITLE>Manpage of CPANPLUS::Internals::Fetch</TITLE>
<meta charset="utf-8">
<link rel="stylesheet" href="/css/main.css" type="text/css">
</head>
<body>
 <header class="site-header">
 <div class="wrap"> <div class="site-title"><a href="/manpages/index.html">linux manpages</a></div>
 <div class="site-description">{"type":"programming"}</div>
 </div>
 </header>
 <div class="page-content">
<H1>CPANPLUS::Internals::Fetch</H1>
Section: Perl Programmers Reference Guide (3pm)<BR>Updated: 2009-05-03<BR><A HREF="#index">Index</A>
<A HREF="/manpages/index.html">Return to Main Contents</A><HR>






<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

CPANPLUS::Internals::Fetch
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<A NAME="ixAAC"></A>


<PRE>
    my $output = $cb-&gt;_fetch(
                        module      =&gt; $modobj,
                        fetchdir    =&gt; '/path/to/save/to',
                        verbose     =&gt; BOOL,
                        force       =&gt; BOOL,
                    );

    $cb-&gt;_add_fail_host( host =&gt; 'foo.com' );
    $cb-&gt;_host_ok(       host =&gt; 'foo.com' );

</PRE>


<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

<A NAME="ixAAD"></A>
CPANPLUS::Internals::Fetch fetches files from either ftp, http, file
or rsync mirrors.
<P>

This is the rough flow:
<P>



<PRE>
    $cb-&gt;_fetch
        Delegate to File::Fetch;

</PRE>


<A NAME="lbAE">&nbsp;</A>
<H2>METHODS</H2>

<A NAME="ixAAE"></A>
<A NAME="lbAF">&nbsp;</A>
<H2>$path = _fetch( module =&gt; $modobj, [fetchdir =&gt; '/path/to/save/to', fetch_from =&gt; '<A HREF="scheme://path/to/fetch/from',">scheme://path/to/fetch/from',</A> verbose =&gt; BOOL, force =&gt; BOOL, prefer_bin =&gt; BOOL, ttl =&gt; $seconds] )</H2>



<A NAME="ixAAF"></A>
<TT>&quot;_fetch&quot;</TT> will fetch files based on the information in a module
object. You always need a module object. If you want a fake module
object for a one-off fetch, look at <TT>&quot;CPANPLUS::Module::Fake&quot;</TT>.
<P>

<TT>&quot;fetchdir&quot;</TT> is the place to save the file to. Usually this
information comes from your configuration, but you can override it
expressly if needed.
<P>

<TT>&quot;fetch_from&quot;</TT> lets you specify an <FONT SIZE="-1">URI</FONT> to get this file from. If you
do not specify one, your list of configured hosts will be probed to
download the file from.
<P>

<TT>&quot;force&quot;</TT> forces a new download, even if the file already exists.
<P>

<TT>&quot;verbose&quot;</TT> simply indicates whether or not to print extra messages.
<P>

<TT>&quot;prefer_bin&quot;</TT> indicates whether you prefer the use of commandline
programs over perl modules. Defaults to your corresponding config
setting.
<P>

<TT>&quot;ttl&quot;</TT> (in seconds) indicates how long a cached copy is valid for. If
the fetch time of the local copy is within the ttl, the cached copy is
returned. Otherwise, the file is refetched.
<P>

<TT>&quot;_fetch&quot;</TT> figures out, based on the host list, what scheme to use and
from there, delegates to <TT>&quot;File::Fetch&quot;</TT> do the actual fetching.
<P>

Returns the path of the output file on success, false on failure.
<P>

Note that you can set a <TT>&quot;blacklist&quot;</TT> on certain methods in the config.
Simply add the identifying name of the method (ie, <TT>&quot;lwp&quot;</TT>) to:
<BR>&nbsp;&nbsp;&nbsp;&nbsp;<TT>$conf</TT>-&gt;_set_fetch(&nbsp;blacklist&nbsp;=&gt;&nbsp;['lwp']&nbsp;);
<P>

And the <TT>&quot;LWP&quot;</TT> function will be skipped by <TT>&quot;File::Fetch&quot;</TT>.
<A NAME="lbAG">&nbsp;</A>
<H3>_add_fail_host( host =&gt; $host_hashref )</H3>



<A NAME="ixAAG"></A>
Mark a particular host as bad. This makes <TT>&quot;CPANPLUS::Internals::Fetch&quot;</TT>
skip it in fetches until this cache is flushed.
<A NAME="lbAH">&nbsp;</A>
<H3>_host_ok( host =&gt; $host_hashref )</H3>



<A NAME="ixAAH"></A>
Query the cache to see if this host is ok, or if it has been flagged
as bad.
<P>

Returns true if the host is ok, false otherwise.
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">METHODS</A><DD>
<DT><A HREF="#lbAF">$path = _fetch( module =&gt; $modobj, [fetchdir =&gt; '/path/to/save/to', fetch_from =&gt; 'scheme://path/to/fetch/from', verbose =&gt; BOOL, force =&gt; BOOL, prefer_bin =&gt; BOOL, ttl =&gt; $seconds] )</A><DD>
<DL>
<DT><A HREF="#lbAG">_add_fail_host( host =&gt; $host_hashref )</A><DD>
<DT><A HREF="#lbAH">_host_ok( host =&gt; $host_hashref )</A><DD>
</DL>
</DL>
<HR>
This document was created by
<A HREF="/manpages/index.html">man2html</A>,
using the manual pages.<BR>
Time: 05:33:16 GMT, December 24, 2015
</div></body>
</HTML>
