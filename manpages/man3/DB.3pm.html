<!DOCTYPE html>

<HTML><head><TITLE>Manpage of DB</TITLE>
<meta charset="utf-8">
<link rel="stylesheet" href="/css/main.css" type="text/css">
</head>
<body>
 <header class="site-header">
 <div class="wrap"> <div class="site-title"><a href="/manpages/index.html">linux man pages</a></div>
 <div class="site-description">{"type":"programming"}</div>
 </div>
 </header>
 <div class="page-content">
<H1>DB</H1>
Section: Perl Programmers Reference Guide (3pm)<BR>Updated: 2009-07-03<BR><A HREF="#index">Index</A>
<A HREF="/manpages/index.html">Return to Main Contents</A><HR>






<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

DB - programmatic interface to the Perl debugging API
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<A NAME="ixAAC"></A>


<PRE>
    package CLIENT;
    use DB;
    @ISA = qw(DB);

    # these (inherited) methods can be called by the client

    CLIENT-&gt;register()      # register a client package name
    CLIENT-&gt;done()          # de-register from the debugging API
    CLIENT-&gt;skippkg('hide::hide')  # ask DB not to stop in this package
    CLIENT-&gt;cont([WHERE])       # run some more (until BREAK or another breakpt)
    CLIENT-&gt;step()              # single step
    CLIENT-&gt;next()              # step over
    CLIENT-&gt;ret()               # return from current subroutine
    CLIENT-&gt;backtrace()         # return the call stack description
    CLIENT-&gt;ready()             # call when client setup is done
    CLIENT-&gt;trace_toggle()      # toggle subroutine call trace mode
    CLIENT-&gt;subs([SUBS])        # return subroutine information
    CLIENT-&gt;files()             # return list of all files known to DB
    CLIENT-&gt;lines()             # return lines in currently loaded file
    CLIENT-&gt;loadfile(FILE,LINE) # load a file and let other clients know
    CLIENT-&gt;lineevents()        # return info on lines with actions
    CLIENT-&gt;set_break([WHERE],[COND])
    CLIENT-&gt;set_tbreak([WHERE])
    CLIENT-&gt;clr_breaks([LIST])
    CLIENT-&gt;set_action(WHERE,ACTION)
    CLIENT-&gt;clr_actions([LIST])
    CLIENT-&gt;evalcode(STRING)  # eval STRING in executing code's context
    CLIENT-&gt;prestop([STRING]) # execute in code context before stopping
    CLIENT-&gt;poststop([STRING])# execute in code context before resuming

    # These methods will be called at the appropriate times.
    # Stub versions provided do nothing.
    # None of these can block.

    CLIENT-&gt;init()          # called when debug API inits itself
    CLIENT-&gt;stop(FILE,LINE) # when execution stops
    CLIENT-&gt;idle()          # while stopped (can be a client event loop)
    CLIENT-&gt;cleanup()       # just before exit
    CLIENT-&gt;output(LIST)    # called to print any output that API must show

</PRE>


<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

<A NAME="ixAAD"></A>
Perl debug information is frequently required not just by debuggers,
but also by modules that need some ``special'' information to do their
job properly, like profilers.
<P>

This module abstracts and provides all of the hooks into Perl internal
debugging functionality, so that various implementations of Perl debuggers
(or packages that want to simply get at the ``privileged'' debugging data)
can all benefit from the development of this common code.  Currently used
by Swat, the perl/Tk <FONT SIZE="-1">GUI</FONT> debugger.
<P>

Note that multiple ``front-ends'' can latch into this debugging <FONT SIZE="-1">API</FONT>
simultaneously.  This is intended to facilitate things like
debugging with a command line and <FONT SIZE="-1">GUI</FONT> at the same time, debugging 
debuggers etc.  [Sounds nice, but this needs some serious support --- <FONT SIZE="-1">GSAR</FONT>]
<P>

In particular, this <FONT SIZE="-1">API</FONT> does <B>not</B> provide the following functions:
<DL COMPACT>
<DT>*<DD>
data display
<DT>*<DD>
command processing
<DT>*<DD>
command alias management
<DT>*<DD>
user interface (tty or graphical)
</DL>
<P>

These are intended to be services performed by the clients of this <FONT SIZE="-1">API</FONT>.
<P>

This module attempts to be squeaky clean w.r.t <TT>&quot;use strict;&quot;</TT> and when
warnings are enabled.
<A NAME="lbAE">&nbsp;</A>
<H3>Global Variables</H3>

<A NAME="ixAAE"></A>
The following ``public'' global names can be read by clients of this <FONT SIZE="-1">API</FONT>.
Beware that these should be considered ``readonly''.
<DL COMPACT>
<DT>$DB::sub<DD>


<A NAME="ixAAF"></A>
Name of current executing subroutine.
<DT>%DB::sub<DD>


<A NAME="ixAAG"></A>
The keys of this hash are the names of all the known subroutines.  Each value
is an encoded string that has the <I><A HREF="/manpages/index.html?3+sprintf">sprintf</A></I>(3) format 
<TT>&quot;(&quot;%s:%d-%d&quot;, filename, fromline, toline)&quot;</TT>.
<DT>$DB::single<DD>


<A NAME="ixAAH"></A>
Single-step flag.  Will be true if the <FONT SIZE="-1">API</FONT> will stop at the next statement.
<DT>$DB::signal<DD>


<A NAME="ixAAI"></A>
Signal flag. Will be set to a true value if a signal was caught.  Clients may
check for this flag to abort time-consuming operations.
<DT>$DB::trace<DD>


<A NAME="ixAAJ"></A>
This flag is set to true if the <FONT SIZE="-1">API</FONT> is tracing through subroutine calls.
<DT>@DB::args<DD>


<A NAME="ixAAK"></A>
Contains the arguments of current subroutine, or the <TT>@ARGV</TT> array if in the 
toplevel context.
<DT>@DB::dbline<DD>


<A NAME="ixAAL"></A>
List of lines in currently loaded file.
<DT>%DB::dbline<DD>


<A NAME="ixAAM"></A>
Actions in current file (keys are line numbers).  The values are strings that
have the <I><A HREF="/manpages/index.html?3+sprintf">sprintf</A></I>(3) format <TT>&quot;(&quot;%s\000%s&quot;, breakcondition, actioncode)&quot;</TT>.
<DT>$DB::package<DD>


<A NAME="ixAAN"></A>
Package namespace of currently executing code.
<DT>$DB::filename<DD>


<A NAME="ixAAO"></A>
Currently loaded filename.
<DT>$DB::subname<DD>


<A NAME="ixAAP"></A>
Fully qualified name of currently executing subroutine.
<DT>$DB::lineno<DD>


<A NAME="ixAAQ"></A>
Line number that will be executed next.
</DL>
<A NAME="lbAF">&nbsp;</A>
<H3><FONT SIZE="-1">API</FONT> Methods</H3>

<A NAME="ixAAR"></A>
The following are methods in the <FONT SIZE="-1">DB</FONT> base class.  A client must
access these methods by inheritance (*not* by calling them directly),
since the <FONT SIZE="-1">API</FONT> keeps track of clients through the inheritance
mechanism.
<DL COMPACT>
<DT><FONT SIZE="-1">CLIENT-</FONT>&gt;<I>register()</I><DD>
<A NAME="ixAAS"></A>
register a client object/package
<DT><FONT SIZE="-1">CLIENT-</FONT>&gt;evalcode(<FONT SIZE="-1">STRING</FONT>)<DD>
<A NAME="ixAAT"></A>
eval <FONT SIZE="-1">STRING</FONT> in executing code context
<DT><FONT SIZE="-1">CLIENT-</FONT>&gt;skippkg('D::hide')<DD>
<A NAME="ixAAU"></A>
ask <FONT SIZE="-1">DB</FONT> not to stop in these packages
<DT><FONT SIZE="-1">CLIENT-</FONT>&gt;<I>run()</I><DD>
<A NAME="ixAAV"></A>
run some more (until a breakpt is reached)
<DT><FONT SIZE="-1">CLIENT-</FONT>&gt;<I>step()</I><DD>
<A NAME="ixAAW"></A>
single step
<DT><FONT SIZE="-1">CLIENT-</FONT>&gt;<I>next()</I><DD>
<A NAME="ixAAX"></A>
step over
<DT><FONT SIZE="-1">CLIENT-</FONT>&gt;<I>done()</I><DD>
<A NAME="ixAAY"></A>
de-register from the debugging <FONT SIZE="-1">API</FONT>
</DL>
<A NAME="lbAG">&nbsp;</A>
<H3>Client Callback Methods</H3>

<A NAME="ixAAZ"></A>
The following ``virtual'' methods can be defined by the client.  They will
be called by the <FONT SIZE="-1">API</FONT> at appropriate points.  Note that unless specified
otherwise, the debug <FONT SIZE="-1">API</FONT> only defines empty, non-functional default versions
of these methods.
<DL COMPACT>
<DT><FONT SIZE="-1">CLIENT-</FONT>&gt;<I>init()</I><DD>
<A NAME="ixABA"></A>
Called after debug <FONT SIZE="-1">API</FONT> inits itself.
<DT><FONT SIZE="-1">CLIENT-</FONT>&gt;prestop([<FONT SIZE="-1">STRING</FONT>])<DD>
<A NAME="ixABB"></A>
Usually inherited from <FONT SIZE="-1">DB</FONT> package.  If no arguments are passed,
returns the prestop action string.
<DT><FONT SIZE="-1">CLIENT-</FONT>&gt;<I>stop()</I><DD>
<A NAME="ixABC"></A>
Called when execution stops (w/ args file, line).
<DT><FONT SIZE="-1">CLIENT-</FONT>&gt;<I>idle()</I><DD>
<A NAME="ixABD"></A>
Called while stopped (can be a client event loop).
<DT><FONT SIZE="-1">CLIENT-</FONT>&gt;poststop([<FONT SIZE="-1">STRING</FONT>])<DD>
<A NAME="ixABE"></A>
Usually inherited from <FONT SIZE="-1">DB</FONT> package.  If no arguments are passed,
returns the poststop action string.
<DT><FONT SIZE="-1">CLIENT-</FONT>&gt;evalcode(<FONT SIZE="-1">STRING</FONT>)<DD>
<A NAME="ixABF"></A>
Usually inherited from <FONT SIZE="-1">DB</FONT> package.  Ask for a <FONT SIZE="-1">STRING</FONT> to be <TT>&quot;eval&quot;</TT>-ed
in executing code context.
<DT><FONT SIZE="-1">CLIENT-</FONT>&gt;<I>cleanup()</I><DD>
<A NAME="ixABG"></A>
Called just before exit.
<DT><FONT SIZE="-1">CLIENT-</FONT>&gt;output(<FONT SIZE="-1">LIST</FONT>)<DD>
<A NAME="ixABH"></A>
Called when <FONT SIZE="-1">API</FONT> must show a message (warnings, errors etc.).
</DL>
<A NAME="lbAH">&nbsp;</A>
<H2>BUGS</H2>

<A NAME="ixABI"></A>
The interface defined by this module is missing some of the later additions
to perl's debugging functionality.  As such, this interface should be considered
highly experimental and subject to change.
<A NAME="lbAI">&nbsp;</A>
<H2>AUTHOR</H2>

<A NAME="ixABJ"></A>
Gurusamy Sarathy<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT><A HREF="mailto:gsar@activestate.com">gsar@activestate.com</A><BR>
<P>

This code heavily adapted from an early version of perl5db.pl attributable
to Larry Wall and the Perl Porters.
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DL>
<DT><A HREF="#lbAE">Global Variables</A><DD>
<DT><A HREF="#lbAF"><FONT SIZE="-1">API</FONT> Methods</A><DD>
<DT><A HREF="#lbAG">Client Callback Methods</A><DD>
</DL>
<DT><A HREF="#lbAH">BUGS</A><DD>
<DT><A HREF="#lbAI">AUTHOR</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/manpages/index.html">man2html</A>,
using the manual pages.<BR>
Time: 05:33:22 GMT, December 24, 2015
</div></body>
</HTML>
