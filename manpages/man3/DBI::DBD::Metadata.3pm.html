<!DOCTYPE html>

<HTML><head><TITLE>Manpage of DBI::DBD::Metadata</TITLE>
<meta charset="utf-8">
<link rel="stylesheet" href="/css/main.css" type="text/css">
</head>
<body>
 <header class="site-header">
 <div class="wrap"> <div class="site-title"><a href="/manpages/index.html">linux man pages</a></div>
 <div class="site-description">{"type":"programming"}</div>
 </div>
 </header>
 <div class="page-content">
<H1>DBI::DBD::Metadata</H1>
Section: User Contributed Perl Documentation (3)<BR>Updated: 2007-01-24<BR><A HREF="#index">Index</A>
<A HREF="/manpages/index.html">Return to Main Contents</A><HR>






<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

DBI::DBD::Metadata - Generate the code and data for some DBI metadata methods
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<A NAME="ixAAC"></A>
The idea is to extract metadata information from a good quality
<FONT SIZE="-1">ODBC</FONT> driver and use it to generate code and data to use in your own
<FONT SIZE="-1">DBI</FONT> driver for the same database.
<P>

For generating code to support the get_info method:
<P>



<PRE>
  perl -MDBI::DBD::Metadata -e &quot;write_getinfo_pm('dbi:ODBC:dsn-name','user','pass','Driver')&quot;

  perl -MDBI::DBD::Metadata -e write_getinfo_pm dbi:ODBC:foo_db username password Driver

</PRE>


<P>

For generating code to support the type_info method:
<P>



<PRE>
  perl -MDBI::DBD::Metadata -e &quot;write_typeinfo_pm('dbi:ODBC:dsn-name','user','pass','Driver')&quot;

  perl -MDBI::DBD::Metadata -e write_typeinfo_pm dbi:ODBC:dsn-name user pass Driver

</PRE>


<P>

Where <TT>&quot;dbi:ODBC:dsn-name&quot;</TT> is the connection to use to extract the
data, and <TT>&quot;Driver&quot;</TT> is the name of the driver you want the code
generated for (the driver name gets embedded into the output in
many places).
<A NAME="lbAD">&nbsp;</A>
<H2>Generating a GetInfo package for a driver</H2>

<A NAME="ixAAD"></A>
The <TT>&quot;write_getinfo_pm&quot;</TT> in the DBI::DBD::Metadata module generates a
DBD::Driver::GetInfo package on standard output.
<P>

This method generates a DBD::Driver::GetInfo package from the data
source you specified in the parameter list or in the environment
variable <FONT SIZE="-1">DBI_DSN</FONT>.
DBD::Driver::GetInfo should help a <FONT SIZE="-1">DBD</FONT> author implementing the <FONT SIZE="-1">DBI</FONT>
<I>get_info()</I> method.
Because you are just creating this package, it's very unlikely that
DBD::Driver already provides a good implementation for <I>get_info()</I>.
Thus you will probably connect via <FONT SIZE="-1">DBD::ODBC</FONT>.
<P>

Once you are sure that it is producing semi-sane data, you would
typically redirect the standard output to lib/DBD/Driver/GetInfo.pm, and
then hand edit the result.
Do not forget to update your Makefile.PL and <FONT SIZE="-1">MANIFEST</FONT> to include this as
an extra <FONT SIZE="-1">PM</FONT> file that should be installed.
<P>

If you connect via <FONT SIZE="-1">DBD::ODBC</FONT>, you should use version 0.38 or greater;
<P>

Please take a critical look at the data returned!
<FONT SIZE="-1">ODBC</FONT> drivers vary dramatically in their quality.
<P>

The generator assumes that most values are static and places these
values directly in the <TT>%info</TT> hash.
A few examples show the use of <FONT SIZE="-1">CODE</FONT> references and the implementation
via subroutines.
It is very likely that you have to write additional subroutines for
values depending on the session state or server version, e.g.
<FONT SIZE="-1">SQL_DBMS_VER</FONT>.
<P>

A possible implementation of <I>DBD::Driver::db::get_info()</I> may look like:
<P>



<PRE>
  sub get_info {
    my($dbh, $info_type) = @_;
    require DBD::Driver::GetInfo;
    my $v = $DBD::Driver::GetInfo::info{int($info_type)};
    $v = $v-&gt;($dbh) if ref $v eq 'CODE';
    return $v;
  }

</PRE>


<P>

Please replace Driver (or ``&lt;foo&gt;'') with the name of your driver.
Note that this stub function is generated for you by write_getinfo_pm
function, but you must manually transfer the code to Driver.pm.
<A NAME="lbAE">&nbsp;</A>
<H2>Generating a TypeInfo package for a driver</H2>

<A NAME="ixAAE"></A>
The <TT>&quot;write_typeinfo_pm&quot;</TT> function in the DBI::DBD::Metadata module generates
on standard output the data needed for a driver's type_info_all method.
It also provides default implementations of the type_info_all
method for inclusion in the driver's main implementation file.
<P>

The driver parameter is the name of the driver for which the methods
will be generated; for the sake of examples, this will be ``Driver''.
Typically, the dsn parameter will be of the form ``dbi:ODBC:odbc_dsn'',
where the odbc_dsn is a <FONT SIZE="-1">DSN</FONT> for one of the driver's databases.
The user and pass parameters are the other optional connection
parameters that will be provided to the <FONT SIZE="-1">DBI</FONT> connect method.
<P>

Once you are sure that it is producing semi-sane data, you would
typically redirect the standard output to lib/DBD/Driver/TypeInfo.pm,
and then hand edit the result if necessary.
Do not forget to update your Makefile.PL and <FONT SIZE="-1">MANIFEST</FONT> to include this as
an extra <FONT SIZE="-1">PM</FONT> file that should be installed.
<P>

Please take a critical look at the data returned!
<FONT SIZE="-1">ODBC</FONT> drivers vary dramatically in their quality.
<P>

The generator assumes that all the values are static and places these
values directly in the <TT>%info</TT> hash.
<P>

A possible implementation of <I>DBD::Driver::type_info_all()</I> may look like:
<P>



<PRE>
  sub type_info_all {
    my ($dbh) = @_;
    require DBD::Driver::TypeInfo;
    return [ @$DBD::Driver::TypeInfo::type_info_all ];
  }

</PRE>


<P>

Please replace Driver (or ``&lt;foo&gt;'') with the name of your driver.
Note that this stub function is generated for you by the write_typeinfo_pm
function, but you must manually transfer the code to Driver.pm.
<A NAME="lbAF">&nbsp;</A>
<H2>AUTHORS</H2>

<A NAME="ixAAF"></A>
Jonathan Leffler &lt;<A HREF="mailto:jleffler@us.ibm.com">jleffler@us.ibm.com</A>&gt; (previously &lt;<A HREF="mailto:jleffler@informix.com">jleffler@informix.com</A>&gt;),
Jochen Wiedmann &lt;<A HREF="mailto:joe@ispsoft.de">joe@ispsoft.de</A>&gt;,
Steffen Goeldner &lt;<A HREF="mailto:sgoeldner@cpan.org">sgoeldner@cpan.org</A>&gt;,
and Tim Bunce &lt;<A HREF="mailto:dbi-users@perl.org">dbi-users@perl.org</A>&gt;.
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">Generating a GetInfo package for a driver</A><DD>
<DT><A HREF="#lbAE">Generating a TypeInfo package for a driver</A><DD>
<DT><A HREF="#lbAF">AUTHORS</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/manpages/index.html">man2html</A>,
using the manual pages.<BR>
Time: 05:33:22 GMT, December 24, 2015
</div></body>
</HTML>
