<!DOCTYPE html>

<HTML><head><TITLE>Manpage of Test::Builder::Module</TITLE>
<meta charset="utf-8">
<link rel="stylesheet" href="/css/main.css" type="text/css">
</head>
<body>
 <header class="site-header">
 <div class="wrap"> <div class="site-title"><a href="/manpages/index.html">linux manpages</a></div>
 <div class="site-description">{"type":"documentation"}</div>
 </div>
 </header>
 <div class="page-content"><div class="wrap">
<H1>Test::Builder::Module</H1>
Section: Perl Programmers Reference Guide (3pm)<BR>Updated: 2009-07-07<BR><A HREF="#index">Index</A>
<A HREF="/manpages/index.html">Return to Main Contents</A><HR>






<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

Test::Builder::Module - Base class for test modules
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<A NAME="ixAAC"></A>


<PRE>
  # Emulates Test::Simple
  package Your::Module;

  my $CLASS = __PACKAGE__;

  use base 'Test::Builder::Module';
  @EXPORT = qw(ok);

  sub ok ($;$) {
      my $tb = $CLASS-&gt;builder;
      return $tb-&gt;ok(@_);
  }
  
  1;

</PRE>


<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

<A NAME="ixAAD"></A>
This is a superclass for Test::Builder-based modules.  It provides a
handful of common functionality and a method of getting at the underlying
Test::Builder object.
<A NAME="lbAE">&nbsp;</A>
<H3>Importing</H3>

<A NAME="ixAAE"></A>
Test::Builder::Module is a subclass of Exporter which means your
module is also a subclass of Exporter.  <TT>@EXPORT</TT>, <TT>@EXPORT_OK</TT>, etc...
all act normally.
<P>

A few methods are provided to do the <TT>&quot;use Your::Module tests =&quot;</TT> 23&gt; part
for you.
<P>

<I>import</I>
<A NAME="ixAAF"></A>
<P>

Test::Builder::Module provides an <I>import()</I> method which acts in the
same basic way as Test::More's, setting the plan and controling
exporting of functions and variables.  This allows your module to set
the plan independent of Test::More.
<P>

All arguments passed to <I>import()</I> are passed onto 
<TT>&quot;Your::Module-&gt;builder-&gt;plan()&quot;</TT> with the exception of 
<TT>&quot;import =&quot;</TT>[qw(things to import)]&gt;.
<P>



<PRE>
    use Your::Module import =&gt; [qw(this that)], tests =&gt; 23;

</PRE>


<P>

says to import the functions <I>this()</I> and <I>that()</I> as well as set the plan
to be 23 tests.
<P>

<I>import()</I> also sets the <I>exported_to()</I> attribute of your builder to be
the caller of the <I>import()</I> function.
<P>

Additional behaviors can be added to your <I>import()</I> method by overriding
<I>import_extra()</I>.
<P>

<I>import_extra</I>
<A NAME="ixAAG"></A>
<P>



<PRE>
    Your::Module-&gt;import_extra(\@import_args);

</PRE>


<P>

<I>import_extra()</I> is called by <I>import()</I>.  It provides an opportunity for you
to add behaviors to your module based on its import list.
<P>

Any extra arguments which shouldn't be passed on to <I>plan()</I> should be 
stripped off by this method.
<P>

See Test::More for an example of its use.
<P>

<B></B><FONT SIZE="-1"><B>NOTE</B></FONT><B></B> This mechanism is <I></I><FONT SIZE="-1"><I>VERY</I></FONT><I> </I><FONT SIZE="-1"><I>ALPHA</I></FONT><I> </I><FONT SIZE="-1"><I>AND</I></FONT><I> </I><FONT SIZE="-1"><I>LIKELY</I></FONT><I> </I><FONT SIZE="-1"><I>TO</I></FONT><I> </I><FONT SIZE="-1"><I>CHANGE</I></FONT><I></I> as it
feels like a bit of an ugly hack in its current form.
<A NAME="lbAF">&nbsp;</A>
<H3>Builder</H3>

<A NAME="ixAAH"></A>
Test::Builder::Module provides some methods of getting at the underlying
Test::Builder object.
<P>

<I>builder</I>
<A NAME="ixAAI"></A>
<P>



<PRE>
  my $builder = Your::Class-&gt;builder;

</PRE>


<P>

This method returns the Test::Builder object associated with Your::Class.
It is not a constructor so you can call it as often as you like.
<P>

This is the preferred way to get the Test::Builder object.  You should
<I>not</I> get it via <TT>&quot;Test::Builder-&gt;new&quot;</TT> as was previously
recommended.
<P>

The object returned by <I>builder()</I> may change at runtime so you should
call <I>builder()</I> inside each function rather than store it in a global.
<P>



<PRE>
  sub ok {
      my $builder = Your::Class-&gt;builder;

      return $builder-&gt;ok(@_);
  }

</PRE>


<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DL>
<DT><A HREF="#lbAE">Importing</A><DD>
<DT><A HREF="#lbAF">Builder</A><DD>
</DL>
</DL>
<HR>
This document was created by
<A HREF="/manpages/index.html">man2html</A>,
using the manual pages.<BR>
Time: 05:33:43 GMT, December 24, 2015
</div></div>
</body>
</HTML>
