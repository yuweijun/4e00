<!DOCTYPE html>

<HTML><head><TITLE>Manpage of CGI::Fast</TITLE>
<meta charset="utf-8">
<link rel="stylesheet" href="/css/main.css" type="text/css">
</head>
<body>
 <header class="site-header">
 <div class="wrap"> <div class="site-title"><a href="/manpages/index.html">linux manpages</a></div>
 <div class="site-description">{"type":"programming"}</div>
 </div>
 </header>
 <div class="page-content">
<H1>CGI::Fast</H1>
Section: Perl Programmers Reference Guide (3pm)<BR>Updated: 2012-06-22<BR><A HREF="#index">Index</A>
<A HREF="/manpages/index.html">Return to Main Contents</A><HR>






<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

CGI::Fast - CGI Interface for Fast CGI
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<A NAME="ixAAC"></A>


<PRE>
    use CGI::Fast qw(:standard);
    $COUNTER = 0;
    while (new CGI::Fast) {
        print header;
        print start_html(&quot;Fast CGI Rocks&quot;);
        print
            h1(&quot;Fast CGI Rocks&quot;),
            &quot;Invocation number &quot;,b($COUNTER++),
            &quot; PID &quot;,b($$),&quot;.&quot;,
            hr;
        print end_html;
    }

</PRE>


<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

<A NAME="ixAAD"></A>
CGI::Fast is a subclass of the <FONT SIZE="-1">CGI</FONT> object created by <FONT SIZE="-1">CGI</FONT>.pm.  It is
specialized to work well <FONT SIZE="-1">FCGI</FONT> module, which greatly speeds up <FONT SIZE="-1">CGI</FONT>
scripts by turning them into persistently running server processes.
Scripts that perform time-consuming initialization processes, such as
loading large modules or opening persistent database connections, will
see large performance improvements.
<A NAME="lbAE">&nbsp;</A>
<H2>OTHER PIECES OF THE PUZZLE</H2>

<A NAME="ixAAE"></A>
In order to use CGI::Fast you'll need the <FONT SIZE="-1">FCGI</FONT> module.  See
<A HREF="http://www.cpan.org/">http://www.cpan.org/</A> for details.
<A NAME="lbAF">&nbsp;</A>
<H2>WRITING FASTCGI PERL SCRIPTS</H2>

<A NAME="ixAAF"></A>
FastCGI scripts are persistent: one or more copies of the script
are started up when the server initializes, and stay around until
the server exits or they die a natural death.  After performing
whatever one-time initialization it needs, the script enters a
loop waiting for incoming connections, processing the request, and
waiting some more.
<P>

A typical FastCGI script will look like this:
<P>



<PRE>
    #!/usr/bin/perl
    use CGI::Fast;
    &amp;do_some_initialization();
    while ($q = new CGI::Fast) {
        &amp;process_request($q);
    }

</PRE>


<P>

Each time there's a new request, CGI::Fast returns a
<FONT SIZE="-1">CGI</FONT> object to your loop.  The rest of the time your script
waits in the call to <I>new()</I>.  When the server requests that
your script be terminated, <I>new()</I> will return undef.  You can
of course exit earlier if you choose.  A new version of the
script will be respawned to take its place (this may be
necessary in order to avoid Perl memory leaks in long-running
scripts).
<P>

<FONT SIZE="-1">CGI</FONT>.pm's default <FONT SIZE="-1">CGI</FONT> object mode also works.  Just modify the loop
this way:
<P>



<PRE>
    while (new CGI::Fast) {
        &amp;process_request;
    }

</PRE>


<P>

Calls to <I>header()</I>, <I>start_form()</I>, etc. will all operate on the
current request.
<A NAME="lbAG">&nbsp;</A>
<H2>INSTALLING FASTCGI SCRIPTS</H2>

<A NAME="ixAAG"></A>
See the FastCGI developer's kit documentation for full details.  On
the Apache server, the following line must be added to srm.conf:
<P>



<PRE>
    AddType application/x-httpd-fcgi .fcgi

</PRE>


<P>

FastCGI scripts must end in the extension .fcgi.  For each script you
install, you must add something like the following to srm.conf:
<P>



<PRE>
    FastCgiServer /usr/etc/httpd/fcgi-bin/file_upload.fcgi -processes 2

</PRE>


<P>

This instructs Apache to launch two copies of file_upload.fcgi at
startup time.
<A NAME="lbAH">&nbsp;</A>
<H2>USING FASTCGI SCRIPTS AS CGI SCRIPTS</H2>

<A NAME="ixAAH"></A>
Any script that works correctly as a FastCGI script will also work
correctly when installed as a vanilla <FONT SIZE="-1">CGI</FONT> script.  However it will
not see any performance benefit.
<A NAME="lbAI">&nbsp;</A>
<H2>EXTERNAL FASTCGI SERVER INVOCATION</H2>

<A NAME="ixAAI"></A>
FastCGI supports a <FONT SIZE="-1">TCP/IP</FONT> transport mechanism which allows FastCGI scripts to run
external to the webserver, perhaps on a remote machine.  To configure the
webserver to connect to an external FastCGI server, you would add the following
to your srm.conf:
<P>



<PRE>
    FastCgiExternalServer /usr/etc/httpd/fcgi-bin/file_upload.fcgi -host sputnik:8888

</PRE>


<P>

Two environment variables affect how the <TT>&quot;CGI::Fast&quot;</TT> object is created,
allowing <TT>&quot;CGI::Fast&quot;</TT> to be used as an external FastCGI server.  (See <TT>&quot;FCGI&quot;</TT>
documentation for <TT>&quot;FCGI::OpenSocket&quot;</TT> for more information.)
<DL COMPACT>
<DT><FONT SIZE="-1">FCGI_SOCKET_PATH</FONT><DD>
<A NAME="ixAAJ"></A>
The address (<FONT SIZE="-1">TCP/IP</FONT>) or path (<FONT SIZE="-1">UNIX</FONT> Domain) of the socket the external FastCGI
script to which bind an listen for incoming connections from the web server.
<DT><FONT SIZE="-1">FCGI_LISTEN_QUEUE</FONT><DD>
<A NAME="ixAAK"></A>
Maximum length of the queue of pending connections.
</DL>
<P>

For example:
<P>



<PRE>
    #!/usr/local/bin/perl    # must be a FastCGI version of perl!
    use CGI::Fast;
    &amp;do_some_initialization();
    $ENV{FCGI_SOCKET_PATH} = &quot;sputnik:8888&quot;;
    $ENV{FCGI_LISTEN_QUEUE} = 100;
    while ($q = new CGI::Fast) {
        &amp;process_request($q);
    }

</PRE>


<A NAME="lbAJ">&nbsp;</A>
<H2>CAVEATS</H2>

<A NAME="ixAAL"></A>
I haven't tested this very much.
<A NAME="lbAK">&nbsp;</A>
<H2>AUTHOR INFORMATION</H2>

<A NAME="ixAAM"></A>
Copyright 1996-1998, Lincoln D. Stein.  All rights reserved.
<P>

This library is free software; you can redistribute it and/or modify
it under the same terms as Perl itself.
<P>

Address bug reports and comments to: <A HREF="mailto:lstein@cshl.org">lstein@cshl.org</A>
<A NAME="lbAL">&nbsp;</A>
<H2>BUGS</H2>

<A NAME="ixAAN"></A>
This section intentionally left blank.
<A NAME="lbAM">&nbsp;</A>
<H2>SEE ALSO</H2>

<A NAME="ixAAO"></A>
CGI::Carp, <FONT SIZE="-1">CGI</FONT>
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">OTHER PIECES OF THE PUZZLE</A><DD>
<DT><A HREF="#lbAF">WRITING FASTCGI PERL SCRIPTS</A><DD>
<DT><A HREF="#lbAG">INSTALLING FASTCGI SCRIPTS</A><DD>
<DT><A HREF="#lbAH">USING FASTCGI SCRIPTS AS CGI SCRIPTS</A><DD>
<DT><A HREF="#lbAI">EXTERNAL FASTCGI SERVER INVOCATION</A><DD>
<DT><A HREF="#lbAJ">CAVEATS</A><DD>
<DT><A HREF="#lbAK">AUTHOR INFORMATION</A><DD>
<DT><A HREF="#lbAL">BUGS</A><DD>
<DT><A HREF="#lbAM">SEE ALSO</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/manpages/index.html">man2html</A>,
using the manual pages.<BR>
Time: 05:33:15 GMT, December 24, 2015
</div></body>
</HTML>
