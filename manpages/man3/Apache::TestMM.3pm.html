<!DOCTYPE html>

<HTML><head><TITLE>Manpage of Apache::TestMM</TITLE>
<meta charset="utf-8">
<link rel="stylesheet" href="/css/main.css" type="text/css">
</head>
<body>
 <header class="site-header">
 <div class="wrap"> <div class="site-title"><a href="/manpages/index.html">linux manpages</a></div>
 <div class="site-description">{"type":"programming"}</div>
 </div>
 </header>
 <div class="page-content">
<H1>Apache::TestMM</H1>
Section: User Contributed Perl Documentation (3)<BR>Updated: 2007-11-12<BR><A HREF="#index">Index</A>
<A HREF="/manpages/index.html">Return to Main Contents</A><HR>






<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

Apache::TestMM - Provide MakeMaker Wrapper Methods
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<A NAME="ixAAC"></A>


<PRE>
  require Apache::TestMM;
  
  # import MY::test and MY::clean overrides for MM
  Apache::TestMM-&gt;import(qw(test clean));
  
  # parse command line args
  Apache::TestMM::filter_args();
  
  # autogenerate the script
  Apache::TestMM::generate_script('t/TEST');

</PRE>


<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

<A NAME="ixAAD"></A>
<TT>&quot;Apache::TestMM&quot;</TT> provides wrappers for the <TT>&quot;ExtUtils::MakeMaker&quot;</TT>
craft, making it easier to extend the autogenerated <I>Makefile</I> with
<TT>&quot;Apache::Test&quot;</TT>.
<A NAME="lbAE">&nbsp;</A>
<H2>FUNCTIONS</H2>

<A NAME="ixAAE"></A>
<A NAME="lbAF">&nbsp;</A>
<H3>import</H3>



<A NAME="ixAAF"></A>


<PRE>
  use Apache::TestMM qw(test clean);

</PRE>


<P>

or:
<P>



<PRE>
  Apache::TestMM-&gt;import(qw(test clean));

</PRE>


<P>

Imports <TT>&quot;MY::&quot;</TT> overrides for the default <TT>&quot;ExtUtils::MakeMaker&quot;</TT>
<I>test</I> and <I>clean</I> targets, as if you have defined:
<P>



<PRE>
  sub MY::test {...}
  sub MY::clean {...}

</PRE>


<P>

in <I>Makefile.PL</I>. <TT>&quot;Apache::TestMM&quot;</TT> does this for you so that these Makefile
targets will run the Apache server and the tests for it, and clean up after
its mess.
<A NAME="lbAG">&nbsp;</A>
<H3>filter_args</H3>



<A NAME="ixAAG"></A>


<PRE>
  push @ARGV, '-apxs', $apxs_path;
  Apache::TestMM::filter_args();
  WriteMakefile(...);

</PRE>


<P>

When <TT>&quot;WriteMakefile()&quot;</TT> is called it parses <TT>@ARGV</TT>, hoping to find
special options like <TT>&quot;PREFIX=/home/stas/perl&quot;</TT>. <TT>&quot;Apache::Test&quot;</TT>
accepts a lot of configuration options of its own. When
<TT>&quot;Apache::TestMM::filter_args()&quot;</TT> is called, it removes any
<TT>&quot;Apache::Test&quot;</TT>-specific options from <TT>@ARGV</TT> and stores them
internally, so when <TT>&quot;WriteMakefile()&quot;</TT> is called they aren't in
<TT>@ARGV</TT> and thus won't be processed by <TT>&quot;WriteMakefile()&quot;</TT>.
<P>

The options can be set when <I>Makefile.PL</I> is called:
<P>



<PRE>
  % perl Makefile.PL -apxs /path/to/apxs

</PRE>


<P>

Or you can push them manually to <TT>@ARGV</TT> from the code:
<P>



<PRE>
  push @ARGV, '-apxs', $apxs_path;

</PRE>


<P>

When:
<P>



<PRE>
  Apache::TestMM::generate_script('t/TEST');

</PRE>


<P>

is called, <TT>&quot;Apache::Test&quot;</TT>-specific options extracted by
<TT>&quot;Apache::TestMM::filter_args()&quot;</TT> are written to the autogenerated
file. In our example, the autogenerated <I>t/TEST</I> will include:
<P>



<PRE>
  %Apache::TestConfig::Argv = qw(apxs /path/to/apxs);

</PRE>


<P>

which is going to be used by the <TT>&quot;Apache::Test&quot;</TT> runtime.
<P>

The other frequently used options are: <TT>&quot;-httpd&quot;</TT>, telling where to
find the httpd (usually when the <TT>&quot;-apxs&quot;</TT> option is not used),
<TT>&quot;-libmodperl&quot;</TT> to use a specific mod_perl shared object (if your
mod_perl is built as <FONT SIZE="-1">DSO</FONT>), <TT>&quot;-maxclients&quot;</TT> to change the default number
of the configured <TT>&quot;MaxClients&quot;</TT> directive, <TT>&quot;-port&quot;</TT> to start the
server on a specific port, etc. To get the complete list of available
configuration options and their purpose and syntax, run:
<P>



<PRE>
  % perl -MApache::TestConfig -le 'Apache::TestConfig::usage()'

</PRE>


<P>

You may wish to document some of these in your application's <I></I><FONT SIZE="-1"><I>README</I></FONT><I></I>
file, especially the <TT>&quot;-apxs&quot;</TT> and <TT>&quot;-httpd&quot;</TT> options.
<A NAME="lbAH">&nbsp;</A>
<H3>generate_script</H3>



<A NAME="ixAAH"></A>


<PRE>
  Apache::TestMM::generate_script('t/TEST');

</PRE>


<P>

<TT>&quot;generate_script()&quot;</TT> accepts the name of the script to generate and
will look for a template with the same name and suffix <I>.PL</I>. So in
our example it'll look for <I>t/TEST.PL</I>. The autogenerated script
<I>t/TEST</I> will include the contents of <I>t/TEST.PL</I>, and special
directives, including any configuration options passed via
<TT>&quot;filter_args()&quot;</TT> called from <I>Makefile.PL</I>, special
fixup code, etc.
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">FUNCTIONS</A><DD>
<DL>
<DT><A HREF="#lbAF">import</A><DD>
<DT><A HREF="#lbAG">filter_args</A><DD>
<DT><A HREF="#lbAH">generate_script</A><DD>
</DL>
</DL>
<HR>
This document was created by
<A HREF="/manpages/index.html">man2html</A>,
using the manual pages.<BR>
Time: 05:33:11 GMT, December 24, 2015
</div></body>
</HTML>
