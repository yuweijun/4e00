<!DOCTYPE html>

<HTML><head><TITLE>Manpage of Class::MethodMaker::array</TITLE>
<meta charset="utf-8">
<link rel="stylesheet" href="/css/main.css" type="text/css">
</head>
<body>
 <header class="site-header">
 <div class="wrap"> <div class="site-title"><a href="/manpages/index.html">linux manpages</a></div>
 <div class="site-description">{"type":"programming"}</div>
 </div>
 </header>
 <div class="page-content"><div class="wrap">
<H1>Class::MethodMaker::array</H1>
Section: User Contributed Perl Documentation (3)<BR>Updated: 2011-10-04<BR><A HREF="#index">Index</A>
<A HREF="/manpages/index.html">Return to Main Contents</A><HR>






<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

Class::Method::array - Create methods for handling an array value.
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<A NAME="ixAAC"></A>


<PRE>
  use Class::MethodMaker
    [ array =&gt; [qw/ x /] ];

  $instance-&gt;x;                # empty
  $instance-&gt;x(1, 1, 2, 3, 5, 8);
  $instance-&gt;x_count == 6;     # true
  $instance-&gt;x = (13, 21, 34);
  $instance-&gt;<A HREF="/manpages/index.html?1+x_index">x_index</A>(1) == 21; # true

</PRE>


<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

<A NAME="ixAAD"></A>
Creates methods to handle array values in an object.  For a component named
<TT>&quot;x&quot;</TT>, by default creates methods <TT>&quot;x&quot;</TT>, <TT>&quot;x_reset&quot;</TT>, <TT>&quot;x_clear&quot;</TT>, <TT>&quot;x_isset&quot;</TT>,
<TT>&quot;x_count&quot;</TT>, <TT>&quot;x_index&quot;</TT>, <TT>&quot;x_push&quot;</TT>, <TT>&quot;x_pop&quot;</TT>, <TT>&quot;x_unshift&quot;</TT>, <TT>&quot;x_shift&quot;</TT>,
<TT>&quot;x_splice&quot;</TT>.
<P>

Methods available are:
<P>

<I></I>&quot;*&quot;<I></I>
<A NAME="ixAAE"></A>
<P>

<I>Created by default.</I> This method returns the list of values stored in the
slot.  If any arguments are provided to this method, they <B>replace</B> the
current list contents.  In an array context it returns the values as an array
and in a scalar context as a reference to an array.  Note that this reference
is no longer a direct reference to the storage, in contrast to
Class::MethodMaker v1.  This is to protect encapsulation.  See x_ref if you
need that functionality (and are prepared to take the associated risk.)  This
function no longer auto-expands arrayrefs input as arguments, since that makes
it awkward to set individual values to arrayrefs.  See x_setref for that
functionality.
<P>

If a default value is in force, then that value will be auto-vivified (and
therefore set) for each otherwise <I>unset</I> (not <I>not defined</I>) value up to
the array max (so new items will not be appended)
<P>

<I></I>*_reset<I></I>
<A NAME="ixAAF"></A>
<P>

<I>Created by default.</I> Called without an argument, this resets the component
as a whole; deleting any associated storage, and returning the component to
its default state.  Normally, this means that <TT>*_isset</TT> will return false,
and <TT>&quot;*&quot;</TT> will return undef.  If <TT>&quot;-default&quot;</TT> is in effect, then the component
will be set to the default value, and <TT>*_isset</TT> will return true.  If
<TT>&quot;-default_ctor&quot;</TT> is in effect, then the default subr will be invoked, and its
return value used to set the value of the component, and <TT>*_isset</TT> will
return true.
<P>

If called with arguments, these arguments are treated as indexes into the
component, and the individual elements thus referenced are reset (their
storage deleted, so that <TT>*<A HREF="/manpages/index.html?n+_isset">_isset</A>(n)</TT> will return false for appropriate <I>n</I>,
except where <TT>&quot;-default&quot;</TT> or <TT>&quot;-default_ctor&quot;</TT> are in force, as above).  As with
perl arrays, resetting the highest set value implicitly decreases the count
(but <A HREF="/manpages/index.html?n+x_reset">x_reset</A>(n) never unsets the aggregate itself, even if all the elements
are not set).
<P>

<I></I>*_clear<I></I>
<A NAME="ixAAG"></A>
<P>



<PRE>
  package MyClass;
  use Class::MethodMaker
    [ scalar =&gt; [{'*_clear' =&gt; '*_clear'}, 'a'],
      new    =&gt; new, ];

  package main;
  my $m = MyClass-&gt;new;
  $m-&gt;<A HREF="/manpages/index.html?5+a">a</A>(5);
  $a = $m-&gt;a;       # 5
  $x = $m-&gt;a_isset; # true
  $m-&gt;a_clear;
  $a = $m-&gt;a;       # *undef*
  $x = $m-&gt;a_isset; # true

</PRE>


<P>

<I>Created on request</I>.  A shorthand for setting to undef.  Note that the
component will be set to undef, not reset, so <TT>*_isset</TT> will return true.
<P>

<I></I>*_isset<I></I>
<A NAME="ixAAH"></A>
<P>

<I>Created by default.</I> Whether the component is currently set.  This is
different from being defined; initially, the component is not set (and if
read, will return undef); it can be set to undef (which is a set value, which
also returns undef).  Having been set, the only way to unset the component is
with &lt;*_reset&gt;.
<P>

If a default value is in effect, then &lt;*_isset&gt; will always return true.
<P>

<TT>&quot;*_isset()&quot;</TT> tests the component as a whole.  <TT>*_isset(a)</TT> tests the element
indexed by <I>a</I>.  <TT>&quot;*_isset(a,b)&quot;</TT> tests the elements indexed by <I>a</I>, <I>b</I>,
and returns the logical conjunction (<I>and</I>) of the tests.
<P>

<I></I>*_count<I></I>
<A NAME="ixAAI"></A>
<P>

<I>Created by default.</I> Returns the number of elements in this component.  This
is not affected by presence (or lack) of a <TT>&quot;default&quot;</TT> (or <TT>&quot;default_ctor&quot;</TT>).
Returns <TT>&quot;undef&quot;</TT> if whole component not set (as per <TT>*_isset</TT>).
<P>

<I></I>*_index<I></I>
<A NAME="ixAAJ"></A>
<P>

<I>Created by default.</I> Takes a list of indices, returns a list of the
corresponding values.
<P>

If a default (or a default ctor) is in force, then a lookup by
index will vivify &amp; set to the default the respective elements (and
therefore the aggregate data-structure also, if it's not already).
<P>

Beware of a bug in perl 5.6.1 that will sometimes invent values in
previously unset slots of arrays that previously contained a value.
So, vivifying a value (e.g. by <I><A HREF="/manpages/index.html?2+x_index">x_index</A></I>(2)) where <I><A HREF="http://localhost/cgi-bin/man/man2html?1+x_index">x_index</A></I>(1) was
previously unset might cause <I><A HREF="/manpages/index.html?1+x_index">x_index</A></I>(1) to be set spuriously.  This
is fixed in 5.8.0.
<P>

<I></I>*_push<I></I>
<A NAME="ixAAK"></A>
<P>

<I>Created by default.</I> Push item(s) onto the end of the list.  No return
value.
<P>

<I></I>*_pop<I></I>
<A NAME="ixAAL"></A>
<P>

<I>Created by default.</I> Given a number, pops that many items off the end of the
list, and returns them (as a ref in scalar context, as a list in list
context).  Without an arg, always returns a single element.  Given a number,
returns them in array order (not in reverse order as multiple pops would).
<P>

<I></I>*_unshift<I></I>
<A NAME="ixAAM"></A>
<P>

<I>Created by default.</I> Push item(s) onto the start of the list.  No return
value.
<P>

<I></I>*_shift<I></I>
<A NAME="ixAAN"></A>
<P>

<I>Created by default.</I> Given a number, shifts that many items off the start of
the list, and returns them (as a ref in scalar context, as a list in list
context).  Without an arg, always returns a single element.  Given a number,
returns them in array order.
<P>

<I></I>*_splice<I></I>
<A NAME="ixAAO"></A>
<P>

<I>Created by default.</I> Arguments as for perldoc perlfunc splice.
Returns an arrayref in scalar context (even if a single item is spliced), and
a list in list context.
<P>

<I></I>*_get<I></I>
<A NAME="ixAAP"></A>
<P>

<I>Created on request</I>.  Retrieves the value of the component without setting
(ignores any arguments passed).
<P>

<I></I>*_set<I></I>
<A NAME="ixAAQ"></A>
<P>



<PRE>
  @n = $x-&gt;a; # (1,2,3)
  $x-&gt;a_set(1=&gt;4,3=&gt;7);
  @n = $x-&gt;a; # (1,4,3,7)

</PRE>


<P>

<I>Created by default.</I> Takes a list, treated as pairs of index =&gt; value; each
given index is set to the corresponding value.  No return.
<P>

If two arguments are given, of which the first is an arrayref, then it is
treated as a list of indices of which the second argument (which must also be
an arrayref) are the corresponding values.  Thus the following two commands
are equivalent:
<P>



<PRE>
  $x-&gt;a_set(1=&gt;4,3=&gt;7);
  $x-&gt;a_set([1,3],[4,7]);

</PRE>


<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/manpages/index.html">man2html</A>,
using the manual pages.<BR>
Time: 05:33:15 GMT, December 24, 2015
</div></div>
</body>
</HTML>
