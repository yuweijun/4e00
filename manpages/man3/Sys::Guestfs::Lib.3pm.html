<!DOCTYPE html>

<HTML><head><TITLE>Manpage of Sys::Guestfs::Lib</TITLE>
<meta charset="utf-8">
<link rel="stylesheet" href="/css/main.css" type="text/css">
</head>
<body>
 <header class="site-header">
 <div class="wrap"> <div class="site-title"><a href="/manpages/index.html">linux manpages</a></div>
 <div class="site-description">{"type":"programming"}</div>
 </div>
 </header>
 <div class="page-content">
<H1>Sys::Guestfs::Lib</H1>
Section: User Contributed Perl Documentation (3)<BR>Updated: 2012-06-22<BR><A HREF="#index">Index</A>
<A HREF="/manpages/index.html">Return to Main Contents</A><HR>






<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

Sys::Guestfs::Lib - Useful functions for using libguestfs from Perl
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<A NAME="ixAAC"></A>


<PRE>
 use Sys::Guestfs::Lib qw(open_guest ...);

 $g = open_guest ($name);

</PRE>


<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

<A NAME="ixAAD"></A>
<TT>&quot;Sys::Guestfs::Lib&quot;</TT> is an extra library of useful functions for using
the libguestfs <FONT SIZE="-1">API</FONT> from Perl.  It also provides tighter integration
with libvirt.
<P>

The basic libguestfs <FONT SIZE="-1">API</FONT> is not covered by this manpage.  Please refer
instead to <I><A HREF="/manpages/index.html?3+Sys::Guestfs">Sys::Guestfs</A></I>(3) and <I><A HREF="http://localhost/cgi-bin/man/man2html?3+guestfs">guestfs</A></I>(3).  The libvirt <FONT SIZE="-1">API</FONT> is
also not covered.  For that, see <I><A HREF="/manpages/index.html?3+Sys::Virt">Sys::Virt</A></I>(3).
<A NAME="lbAE">&nbsp;</A>
<H2>DEPRECATION OF SOME FUNCTIONS</H2>

<A NAME="ixAAE"></A>
This module contains functions and code to perform inspection of guest
images.  Since libguestfs 1.5.3 this ability has moved into the core
<FONT SIZE="-1">API</FONT> (see ``<FONT SIZE="-1">INSPECTION</FONT>'' in <I><A HREF="/manpages/index.html?3+guestfs">guestfs</A></I>(3)).  The inspection functions in this
module are deprecated and will not be updated.  Each deprecated
function is marked in the documentation below.
<A NAME="lbAF">&nbsp;</A>
<H2>BASIC FUNCTIONS</H2>

<A NAME="ixAAF"></A>
<A NAME="lbAG">&nbsp;</A>
<H3>open_guest</H3>

<A NAME="ixAAG"></A>


<PRE>
 $g = open_guest ($name);

 $g = open_guest ($name, rw =&gt; 1, ...);

 $g = open_guest ($name, address =&gt; $uri, ...);

 $g = open_guest ([$img1, $img2, ...], address =&gt; $uri, format =&gt; $format, ...);

 ($g, $conn, $dom, @images) = open_guest ($name);

</PRE>


<P>

This function opens a libguestfs handle for either the libvirt domain
called <TT>$name</TT>, or the disk image called <TT>$name</TT>.  Any disk images
found through libvirt or specified explicitly are attached to the
libguestfs handle.
<P>

The <TT>&quot;Sys::Guestfs&quot;</TT> handle <TT>$g</TT> is returned, or if there was an error
it throws an exception.  To catch errors, wrap the call in an eval
block.
<P>

The first parameter is either a string referring to a libvirt domain
or a disk image, or (if a guest has several disk images) an arrayref
<TT>&quot;[$img1, $img2, ...]&quot;</TT>.  For disk images, if the <TT>&quot;format&quot;</TT> parameter
is specified then that format is forced.
<P>

The handle is <I>read-only</I> by default.  Use the optional parameter
<TT>&quot;rw =&gt; 1&quot;</TT> to open a read-write handle.  However if you open a
read-write handle, this function will refuse to use active libvirt
domains.
<P>

The handle is still in the config state when it is returned, so you
have to call <TT>&quot;$g-&gt;launch ()&quot;</TT>.
<P>

The optional <TT>&quot;address&quot;</TT> parameter can be added to specify the libvirt
<FONT SIZE="-1">URI</FONT>.
<P>

The implicit libvirt handle is closed after this function, <I>unless</I>
you call the function in <TT>&quot;wantarray&quot;</TT> context, in which case the
function returns a tuple of: the open libguestfs handle, the open
libvirt handle, and the open libvirt domain handle, and a list of
[image,format] pairs.  (This is useful if you want to do other things
like pulling the <FONT SIZE="-1">XML</FONT> description of the guest).  Note that if this is
a straight disk image, then <TT>$conn</TT> and <TT>$dom</TT> will be <TT>&quot;undef&quot;</TT>.
<P>

If the <TT>&quot;Sys::Virt&quot;</TT> module is not available, then libvirt is bypassed,
and this function can only open disk images.
<P>

The optional <TT>&quot;interface&quot;</TT> parameter can be used to open devices with a
specified qemu interface.  See ``guestfs_add_drive_opts'' in Sys::Guestfs
for more details.
<A NAME="lbAH">&nbsp;</A>
<H3>feature_available</H3>

<A NAME="ixAAH"></A>


<PRE>
 $bool = feature_available ($g, $feature [, $feature ...]);

</PRE>


<P>

This function is a useful wrapper around the basic
<TT>&quot;$g-&gt;available&quot;</TT> call.
<P>

<TT>&quot;$g-&gt;available&quot;</TT> tests for availability of a list of features and
dies with an error if any is not available.
<P>

This call tests for the list of features and returns true if all are
available, or false otherwise.
<P>

For a list of features you can test for, see ``<FONT SIZE="-1">AVAILABILITY</FONT>'' in <I><A HREF="/manpages/index.html?3+guestfs">guestfs</A></I>(3).
<A NAME="lbAI">&nbsp;</A>
<H3>get_partitions</H3>

<A NAME="ixAAI"></A>
This function is deprecated.  It will not be updated in future
versions of libguestfs.  New code should not use this function.  Use
the core <FONT SIZE="-1">API</FONT> function ``list_filesystems'' in <I><A HREF="/manpages/index.html?3+Sys::Guestfs">Sys::Guestfs</A></I>(3) instead.
<A NAME="lbAJ">&nbsp;</A>
<H3>resolve_windows_path</H3>

<A NAME="ixAAJ"></A>


<PRE>
 $path = resolve_windows_path ($g, $path);

 $path = resolve_windows_path ($g, &quot;/windows/system&quot;);
   ==&gt; &quot;/WINDOWS/System&quot;
       or undef if no path exists

</PRE>


<P>

This function, which is specific to <FONT SIZE="-1">FAT/NTFS</FONT> filesystems (ie.  Windows
guests), lets you look up a case insensitive <TT>$path</TT> in the
filesystem and returns the true, case sensitive path as required by
the underlying kernel or NTFS-3g driver.
<P>

If <TT>$path</TT> does not exist then this function returns <TT>&quot;undef&quot;</TT>.
<P>

The <TT>$path</TT> parameter must begin with <TT>&quot;/&quot;</TT> character and be separated
by <TT>&quot;/&quot;</TT> characters.  Do not use <TT>&quot;\&quot;</TT>, drive names, etc.
<A NAME="lbAK">&nbsp;</A>
<H3>file_architecture</H3>

<A NAME="ixAAK"></A>
Deprecated function.  Replace any calls to this function with:
<P>



<PRE>
 $g-&gt;file_architecture ($path);

</PRE>


<A NAME="lbAL">&nbsp;</A>
<H2>OPERATING SYSTEM INSPECTION FUNCTIONS</H2>

<A NAME="ixAAL"></A>
<A NAME="lbAM">&nbsp;</A>
<H3>inspect_all_partitions</H3>

<A NAME="ixAAM"></A>
This function is deprecated.  It will not be updated in future
versions of libguestfs.  New code should not use this function.  Use
the core <FONT SIZE="-1">API</FONT> functions instead, see ``<FONT SIZE="-1">INSPECTION</FONT>'' in <I><A HREF="/manpages/index.html?3+guestfs">guestfs</A></I>(3).
<A NAME="lbAN">&nbsp;</A>
<H3>inspect_partition</H3>

<A NAME="ixAAN"></A>
This function is deprecated.  It will not be updated in future
versions of libguestfs.  New code should not use this function.  Use
the core <FONT SIZE="-1">API</FONT> functions instead, see ``<FONT SIZE="-1">INSPECTION</FONT>'' in <I><A HREF="/manpages/index.html?3+guestfs">guestfs</A></I>(3).
<A NAME="lbAO">&nbsp;</A>
<H3>inspect_operating_systems</H3>

<A NAME="ixAAO"></A>
This function is deprecated.  It will not be updated in future
versions of libguestfs.  New code should not use this function.  Use
the core <FONT SIZE="-1">API</FONT> functions instead, see ``<FONT SIZE="-1">INSPECTION</FONT>'' in <I><A HREF="/manpages/index.html?3+guestfs">guestfs</A></I>(3).
<A NAME="lbAP">&nbsp;</A>
<H3>mount_operating_system</H3>

<A NAME="ixAAP"></A>
This function is deprecated.  It will not be updated in future
versions of libguestfs.  New code should not use this function.  Use
the core <FONT SIZE="-1">API</FONT> functions instead, see ``<FONT SIZE="-1">INSPECTION</FONT>'' in <I><A HREF="/manpages/index.html?3+guestfs">guestfs</A></I>(3).
<A NAME="lbAQ">&nbsp;</A>
<H3>inspect_in_detail</H3>

<A NAME="ixAAQ"></A>
This function is deprecated.  It will not be updated in future
versions of libguestfs.  New code should not use this function.  Use
the core <FONT SIZE="-1">API</FONT> functions instead, see ``<FONT SIZE="-1">INSPECTION</FONT>'' in <I><A HREF="/manpages/index.html?3+guestfs">guestfs</A></I>(3).
<A NAME="lbAR">&nbsp;</A>
<H3>inspect_linux_kernel</H3>

<A NAME="ixAAR"></A>
This function is deprecated.  It will not be updated in future
versions of libguestfs.  New code should not use this function.  Use
the core <FONT SIZE="-1">API</FONT> functions instead, see ``<FONT SIZE="-1">INSPECTION</FONT>'' in <I><A HREF="/manpages/index.html?3+guestfs">guestfs</A></I>(3).
<A NAME="lbAS">&nbsp;</A>
<H2>COPYRIGHT</H2>

<A NAME="ixAAS"></A>
Copyright (C) 2009-2012 Red Hat Inc.
<A NAME="lbAT">&nbsp;</A>
<H2>LICENSE</H2>

<A NAME="ixAAT"></A>
Please see the file <FONT SIZE="-1">COPYING</FONT>.LIB for the full license.
<A NAME="lbAU">&nbsp;</A>
<H2>SEE ALSO</H2>

<A NAME="ixAAU"></A>
<I><A HREF="/manpages/index.html?1+virt-inspector">virt-inspector</A></I>(1),
<I><A HREF="/manpages/index.html?3+Sys::Guestfs">Sys::Guestfs</A></I>(3),
<I><A HREF="/manpages/index.html?3+guestfs">guestfs</A></I>(3),
&lt;<A HREF="http://libguestfs.org/">http://libguestfs.org/</A>&gt;,
<I><A HREF="/manpages/index.html?3+Sys::Virt">Sys::Virt</A></I>(3),
&lt;<A HREF="http://libvirt.org/">http://libvirt.org/</A>&gt;,
<I><A HREF="/manpages/index.html?1+guestfish">guestfish</A></I>(1).
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">DEPRECATION OF SOME FUNCTIONS</A><DD>
<DT><A HREF="#lbAF">BASIC FUNCTIONS</A><DD>
<DL>
<DT><A HREF="#lbAG">open_guest</A><DD>
<DT><A HREF="#lbAH">feature_available</A><DD>
<DT><A HREF="#lbAI">get_partitions</A><DD>
<DT><A HREF="#lbAJ">resolve_windows_path</A><DD>
<DT><A HREF="#lbAK">file_architecture</A><DD>
</DL>
<DT><A HREF="#lbAL">OPERATING SYSTEM INSPECTION FUNCTIONS</A><DD>
<DL>
<DT><A HREF="#lbAM">inspect_all_partitions</A><DD>
<DT><A HREF="#lbAN">inspect_partition</A><DD>
<DT><A HREF="#lbAO">inspect_operating_systems</A><DD>
<DT><A HREF="#lbAP">mount_operating_system</A><DD>
<DT><A HREF="#lbAQ">inspect_in_detail</A><DD>
<DT><A HREF="#lbAR">inspect_linux_kernel</A><DD>
</DL>
<DT><A HREF="#lbAS">COPYRIGHT</A><DD>
<DT><A HREF="#lbAT">LICENSE</A><DD>
<DT><A HREF="#lbAU">SEE ALSO</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/manpages/index.html">man2html</A>,
using the manual pages.<BR>
Time: 05:33:42 GMT, December 24, 2015
</div></body>
</HTML>
