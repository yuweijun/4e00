<!DOCTYPE html>

<HTML><head><TITLE>Manpage of docs::api::Apache2::Module</TITLE>
<meta charset="utf-8">
<link rel="stylesheet" href="/css/main.css" type="text/css">
</head>
<body>
 <header class="site-header">
 <div class="wrap"> <div class="site-title"><a href="/manpages/index.html">linux manpages</a></div>
 <div class="site-description">{"type":"programming"}</div>
 </div>
 </header>
 <div class="page-content"><div class="wrap">
<H1>docs::api::Apache2::Module</H1>
Section: User Contributed Perl Documentation (3)<BR>Updated: 2008-04-17<BR><A HREF="#index">Index</A>
<A HREF="/manpages/index.html">Return to Main Contents</A><HR>






<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

Apache2::Module - Perl API for creating and working with Apache modules
<A NAME="lbAC">&nbsp;</A>
<H2>Synopsis</H2>

<A NAME="ixAAC"></A>


<PRE>
  use Apache2::Module ();
  
  #Define a configuration directive
  my @directives = (
      {
          name =&gt; 'MyDirective',
      }
  );
  
  Apache2::Module::add(__PACKAGE__, \@directives);
  
  # iterate over the whole module list
  for (my $modp = Apache2::Module::top_module(); $modp; $modp = $modp-&gt;next) {
      my $name                  = $modp-&gt;name;
      my $index                 = $modp-&gt;module_index;
      my $ap_api_major_version  = $modp-&gt;ap_api_major_version;
      my $ap_api_minor_version  = $modp-&gt;ap_api_minor_version;
      my $commands              = $modp-&gt;cmds;
  }
  
  # find a specific module
  my $module = Apache2::Module::find_linked_module('mod_ssl.c');
  
  # remove a specific module
  $module-&gt;remove_loaded_module();
  
  # access module configuration from a directive
  sub MyDirective {
      my ($self, $parms, $args) = @_;
      my  $srv_cfg = Apache2::Module::get_config($self, $parms-&gt;server);
      [...]
  }
  
  # test if an Apache module is loaded
  if (Apache2::Module::loaded('mod_ssl.c')) {
      [...]
  }
  
  # test if a Perl module is loaded
  if (Apache2::Module::loaded('Apache2::Status')) {
      [...]
  }

</PRE>


<A NAME="lbAD">&nbsp;</A>
<H2>Description</H2>

<A NAME="ixAAD"></A>
<TT>&quot;Apache2::Module&quot;</TT> provides the Perl <FONT SIZE="-1">API</FONT> for creating and working with
Apache modules
<P>

See Apache Server Configuration Customization in
Perl.
<A NAME="lbAE">&nbsp;</A>
<H2>API</H2>

<A NAME="ixAAE"></A>
<TT>&quot;Apache2::Module&quot;</TT> provides the following functions and/or methods:
<A NAME="lbAF">&nbsp;</A>
<H3>add</H3>



<A NAME="ixAAF"></A>
Add a module's custom configuration directive to Apache.
<P>



<PRE>
  Apache2::Module::add($package, $cmds);

</PRE>


<DL COMPACT>
<DT>arg1: $package ( string )<DD>


<A NAME="ixAAG"></A>
the package of the module to add
<DT>arg2: $cmds ( <FONT SIZE="-1">ARRAY</FONT> of <FONT SIZE="-1">HASH</FONT> refs )<DD>


<A NAME="ixAAH"></A>
the list of configuration directives to add
<DT>ret: no return value<DD>
<A NAME="ixAAI"></A>

<DT>since: 2.0.00<DD>
<A NAME="ixAAJ"></A>

</DL>
<P>

See also Apache Server Configuration Customization in
Perl.
<A NAME="lbAG">&nbsp;</A>
<H3>ap_api_major_version</H3>



<A NAME="ixAAK"></A>
Get the httpd <FONT SIZE="-1">API</FONT> version this module was build against, <B>not</B> the
module's version.
<P>



<PRE>
  $major_version = $module-&gt;ap_api_major_version();

</PRE>


<DL COMPACT>
<DT>obj: $module ( Apache2::Module object )<DD>


<A NAME="ixAAL"></A>

<DT>ret: $major_version ( integer )<DD>


<A NAME="ixAAM"></A>
<DT>since: 2.0.00<DD>
<A NAME="ixAAN"></A>

</DL>
<P>

This methid is used to check that module is compatible with this
version of the server before loading it.
<A NAME="lbAH">&nbsp;</A>
<H3>ap_api_minor_version</H3>



<A NAME="ixAAO"></A>
Get the module <FONT SIZE="-1">API</FONT> minor version.
<P>



<PRE>
  $minor_version = $module-&gt;ap_api_minor_version();

</PRE>


<DL COMPACT>
<DT>obj: $module ( Apache2::Module object )<DD>


<A NAME="ixAAP"></A>

<DT>ret: $minor_version ( integer )<DD>


<A NAME="ixAAQ"></A>
<DT>since: 2.0.00<DD>
<A NAME="ixAAR"></A>

</DL>
<P>

<TT>&quot;ap_api_minor_version()&quot;</TT> provides <FONT SIZE="-1">API</FONT> feature milestones.
<P>

It's not checked during module init.
<A NAME="lbAI">&nbsp;</A>
<H3>cmds</H3>



<A NAME="ixAAS"></A>
Get the <TT>&quot;Apache2::Command&quot;</TT> object,
describing all of the directives this module defines.
<P>



<PRE>
  $command = $module-&gt;cmds();

</PRE>


<DL COMPACT>
<DT>obj: $module ( Apache2::Module object )<DD>


<A NAME="ixAAT"></A>

<DT>ret: $command ( Apache2::Command object )<DD>


<A NAME="ixAAU"></A>
<DT>since: 2.0.00<DD>
<A NAME="ixAAV"></A>

</DL>
<A NAME="lbAJ">&nbsp;</A>
<H3>get_config</H3>



<A NAME="ixAAW"></A>
Retrieve a module's configuration. Used by configuration directives.
<P>



<PRE>
  $cfg = Apache2::Module::get_config($class, $server, $dir_config);
  $cfg = Apache2::Module::get_config($class, $server);
  $cfg =          $self-&gt;get_config($server, $dir_config);
  $cfg =          $self-&gt;get_config($server);

</PRE>


<DL COMPACT>
<DT>obj: $module ( Apache2::Module object )<DD>


<A NAME="ixAAX"></A>

<DT>arg1: $class ( string )<DD>


<A NAME="ixAAY"></A>

The Perl package this configuration is for
<DT>arg2: $server ( Apache2::ServerRec object )<DD>


<A NAME="ixAAZ"></A>
The current server, typically
<TT>&quot;$r-&gt;server&quot;</TT> or
<TT>&quot;$parms-&gt;server&quot;</TT>.
<DT>opt arg3: $dir_config ( Apache2::ConfVector object )<DD>


<A NAME="ixABA"></A>
By default, the configuration returned is the server level one. To
retrieve the per directory configuration, use
<TT>&quot;$r-&gt;per_dir_config&quot;</TT> as a
last argument.
<DT>ret: $cfg (<FONT SIZE="-1">HASH</FONT> reference)<DD>


<A NAME="ixABB"></A>
A reference to the hash holding the module configuration data.
<DT>since: 2.0.00<DD>
<A NAME="ixABC"></A>
</DL>
<P>

See also Apache Server Configuration Customization in
Perl.
<A NAME="lbAK">&nbsp;</A>
<H3>find_linked_module</H3>



<A NAME="ixABD"></A>
Find a module based on the name of the module
<P>



<PRE>
  $module = Apache2::Module::find_linked_module($name);

</PRE>


<DL COMPACT>
<DT>arg1: $name ( string )<DD>


<A NAME="ixABE"></A>
The name of the module ending in <TT>&quot;.c&quot;</TT>
<DT>ret: $module ( Apache2::Module object )<DD>


<A NAME="ixABF"></A>
The module object if found, <TT>&quot;undef&quot;</TT> otherwise.
<DT>since: 2.0.00<DD>
<A NAME="ixABG"></A>
</DL>
<P>

For example:
<P>



<PRE>
  my $module = Apache2::Module::find_linked_module('mod_ssl.c');

</PRE>


<A NAME="lbAL">&nbsp;</A>
<H3>loaded</H3>



<A NAME="ixABH"></A>
Determine if a certain module is loaded
<P>



<PRE>
  $loaded = Apache2::Module::loaded($module);

</PRE>


<DL COMPACT>
<DT>name: $module ( string )<DD>


<A NAME="ixABI"></A>
The name of the module to search for.


<P>


If <TT>$module</TT> ends with <TT>&quot;.c&quot;</TT>, search all the modules, statically
compiled and dynamically loaded.


<P>


If <TT>$module</TT> ends with <TT>&quot;.so&quot;</TT>, search only the dynamically loaded
modules.


<P>


If <TT>$module</TT> doesn't contain a <TT>&quot;.&quot;</TT>, search the loaded Perl modules
(checks <TT>%INC</TT>).
<DT>ret: $loaded ( boolean )<DD>


<A NAME="ixABJ"></A>
Returns true if the module is loaded, false otherwise.
<DT>since: 2.0.00<DD>
<A NAME="ixABK"></A>
</DL>
<P>

For example, to test if this server supports ssl:
<P>



<PRE>
  if (Apache2::Module::loaded('mod_ssl.c')) {
      [...]
  }

</PRE>


<P>

To test is this server dynamically loaded mod_perl:
<P>



<PRE>
  if (Apache2::Module::loaded('mod_perl.so')) {
      [...]
  }

</PRE>


<P>

To test if <TT>&quot;Apache2::Status&quot;</TT> is
loaded:
<P>



<PRE>
  if (Apache2::Module::loaded('Apache2::Status')) {
      [...]
  }

</PRE>


<A NAME="lbAM">&nbsp;</A>
<H3>module_index</H3>



<A NAME="ixABL"></A>
Get the index to this modules structures in config vectors.
<P>



<PRE>
  $index = $module-&gt;module_index();

</PRE>


<DL COMPACT>
<DT>obj: $module ( Apache2::Module object )<DD>


<A NAME="ixABM"></A>

<DT>ret: $index ( integer )<DD>


<A NAME="ixABN"></A>
<DT>since: 2.0.00<DD>
<A NAME="ixABO"></A>

</DL>
<A NAME="lbAN">&nbsp;</A>
<H3>name</H3>



<A NAME="ixABP"></A>
Get the name of the module's <I>.c</I> file
<P>



<PRE>
  $name = $module-&gt;name();

</PRE>


<DL COMPACT>
<DT>obj: $module ( Apache2::Module object )<DD>


<A NAME="ixABQ"></A>

<DT>ret: $name ( string )<DD>


<A NAME="ixABR"></A>
<DT>since: 2.0.00<DD>
<A NAME="ixABS"></A>

</DL>
<P>

For example a mod_perl module, will return: <I>mod_perl.c</I>.
<A NAME="lbAO">&nbsp;</A>
<H3>next</H3>



<A NAME="ixABT"></A>
Get the next module in the list, <TT>&quot;undef&quot;</TT> if this is the last module
in the list.
<P>



<PRE>
  $next_module = $module-&gt;next();

</PRE>


<DL COMPACT>
<DT>obj: $module ( Apache2::Module object )<DD>


<A NAME="ixABU"></A>

<DT>ret: $next_module ( Apache2::Module object )<DD>


<A NAME="ixABV"></A>
<DT>since: 2.0.00<DD>
<A NAME="ixABW"></A>

</DL>
<A NAME="lbAP">&nbsp;</A>
<H3>remove_loaded_module</H3>



<A NAME="ixABX"></A>
Remove a module from the list of loaded modules permanently.
<P>



<PRE>
  $module-&gt;remove_loaded_module();

</PRE>


<DL COMPACT>
<DT>obj: $module ( Apache2::Module object )<DD>


<A NAME="ixABY"></A>

<DT>ret: no return value<DD>
<A NAME="ixABZ"></A>
<DT>since: 2.0.00<DD>
<A NAME="ixACA"></A>

</DL>
<A NAME="lbAQ">&nbsp;</A>
<H3>top_module</H3>



<A NAME="ixACB"></A>
Returns the first module in the module list. Usefull to start a
module iteration.
<P>



<PRE>
  $module = Apache2::Module::top_module();

</PRE>


<DL COMPACT>
<DT>ret: $module ( Apache2::Module object )<DD>


<A NAME="ixACC"></A>

<DT>since: 2.0.00<DD>
<A NAME="ixACD"></A>

</DL>
<A NAME="lbAR">&nbsp;</A>
<H2>See Also</H2>

<A NAME="ixACE"></A>
mod_perl 2.0 documentation.
<A NAME="lbAS">&nbsp;</A>
<H2>Copyright</H2>

<A NAME="ixACF"></A>
mod_perl 2.0 and its core modules are copyrighted under
The Apache Software License, Version 2.0.
<A NAME="lbAT">&nbsp;</A>
<H2>Authors</H2>

<A NAME="ixACG"></A>
The mod_perl development team and numerous
contributors.
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">Synopsis</A><DD>
<DT><A HREF="#lbAD">Description</A><DD>
<DT><A HREF="#lbAE">API</A><DD>
<DL>
<DT><A HREF="#lbAF">add</A><DD>
<DT><A HREF="#lbAG">ap_api_major_version</A><DD>
<DT><A HREF="#lbAH">ap_api_minor_version</A><DD>
<DT><A HREF="#lbAI">cmds</A><DD>
<DT><A HREF="#lbAJ">get_config</A><DD>
<DT><A HREF="#lbAK">find_linked_module</A><DD>
<DT><A HREF="#lbAL">loaded</A><DD>
<DT><A HREF="#lbAM">module_index</A><DD>
<DT><A HREF="#lbAN">name</A><DD>
<DT><A HREF="#lbAO">next</A><DD>
<DT><A HREF="#lbAP">remove_loaded_module</A><DD>
<DT><A HREF="#lbAQ">top_module</A><DD>
</DL>
<DT><A HREF="#lbAR">See Also</A><DD>
<DT><A HREF="#lbAS">Copyright</A><DD>
<DT><A HREF="#lbAT">Authors</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/manpages/index.html">man2html</A>,
using the manual pages.<BR>
Time: 05:33:11 GMT, December 24, 2015
</div></div>
</body>
</HTML>
