<!DOCTYPE html>

<HTML><head><TITLE>Manpage of PKCS12_create</TITLE>
<meta charset="utf-8">
<link rel="stylesheet" href="/css/main.css" type="text/css">
</head>
<body>
 <header class="site-header">
 <div class="wrap"> <div class="site-title"><a href="/manpages/index.html">linux man pages</a></div>
 <div class="site-description">{"type":"programming"}</div>
 </div>
 </header>
 <div class="page-content">
<H1>PKCS12_create</H1>
Section: OpenSSL (3)<BR>Updated: 2002-10-09<BR><A HREF="#index">Index</A>
<A HREF="/manpages/index.html">Return to Main Contents</A><HR>






<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

PKCS12_create - create a PKCS#12 structure
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<A NAME="ixAAC"></A>


<PRE>
 #include &lt;<A HREF="file:/usr/include/openssl/pkcs12.h">openssl/pkcs12.h</A>&gt;

 PKCS12 *PKCS12_create(char *pass, char *name, EVP_PKEY *pkey, X509 *cert, STACK_OF(X509) *ca,
                                int nid_key, int nid_cert, int iter, int mac_iter, int keytype);

</PRE>


<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

<A NAME="ixAAD"></A>
<I>PKCS12_create()</I> creates a PKCS#12 structure.
<P>

<B>pass</B> is the passphrase to use. <B>name</B> is the <B>friendlyName</B> to use for
the supplied certifictate and key. <B>pkey</B> is the private key to include in
the structure and <B>cert</B> its corresponding certificates. <B>ca</B>, if not <B></B><FONT SIZE="-1"><B>NULL</B></FONT><B></B>
is an optional set of certificates to also include in the structure.
<P>

<B>nid_key</B> and <B>nid_cert</B> are the encryption algorithms that should be used
for the key and certificate respectively. <B>iter</B> is the encryption algorithm
iteration count to use and <B>mac_iter</B> is the <FONT SIZE="-1">MAC</FONT> iteration count to use.
<B>keytype</B> is the type of key.
<A NAME="lbAE">&nbsp;</A>
<H2>NOTES</H2>

<A NAME="ixAAE"></A>
The parameters <B>nid_key</B>, <B>nid_cert</B>, <B>iter</B>, <B>mac_iter</B> and <B>keytype</B>
can all be set to zero and sensible defaults will be used.
<P>

These defaults are: 40 bit <FONT SIZE="-1">RC2</FONT> encryption for certificates, triple <FONT SIZE="-1">DES</FONT>
encryption for private keys, a key iteration count of <FONT SIZE="-1">PKCS12_DEFAULT_ITER</FONT>
(currently 2048) and a <FONT SIZE="-1">MAC</FONT> iteration count of 1.
<P>

The default <FONT SIZE="-1">MAC</FONT> iteration count is 1 in order to retain compatibility with
old software which did not interpret <FONT SIZE="-1">MAC</FONT> iteration counts. If such compatibility
is not required then <B>mac_iter</B> should be set to <FONT SIZE="-1">PKCS12_DEFAULT_ITER</FONT>.
<P>

<B>keytype</B> adds a flag to the store private key. This is a non standard extension
that is only currently interpreted by <FONT SIZE="-1">MSIE</FONT>. If set to zero the flag is omitted,
if set to <B></B><FONT SIZE="-1"><B>KEY_SIG</B></FONT><B></B> the key can be used for signing only, if set to <B></B><FONT SIZE="-1"><B>KEY_EX</B></FONT><B></B>
it can be used for signing and encryption. This option was useful for old
export grade software which could use signing only keys of arbitrary size but
had restrictions on the permissible sizes of keys which could be used for
encryption.
<A NAME="lbAF">&nbsp;</A>
<H2>NEW FUNCTIONALITY IN OPENSSL 0.9.8</H2>

<A NAME="ixAAF"></A>
Some additional functionality was added to <I>PKCS12_create()</I> in OpenSSL
0.9.8. These extensions are detailed below.
<P>

If a certificate contains an <B>alias</B> or <B>keyid</B> then this will be
used for the corresponding <B>friendlyName</B> or <B>localKeyID</B> in the
<FONT SIZE="-1">PKCS12</FONT> structure.
<P>

Either <B>pkey</B>, <B>cert</B> or both can be <B></B><FONT SIZE="-1"><B>NULL</B></FONT><B></B> to indicate that no key or
certficate is required. In previous versions both had to be present or
a fatal error is returned.
<P>

<B>nid_key</B> or <B>nid_cert</B> can be set to -1 indicating that no encryption
should be used.
<P>

<B>mac_iter</B> can be set to -1 and the <FONT SIZE="-1">MAC</FONT> will then be omitted entirely.
<A NAME="lbAG">&nbsp;</A>
<H2>SEE ALSO</H2>

<A NAME="ixAAG"></A>
<I><A HREF="/manpages/index.html?3+d2i_PKCS12">d2i_PKCS12</A></I>(3)
<A NAME="lbAH">&nbsp;</A>
<H2>HISTORY</H2>

<A NAME="ixAAH"></A>
PKCS12_create was added in OpenSSL 0.9.3
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">NOTES</A><DD>
<DT><A HREF="#lbAF">NEW FUNCTIONALITY IN OPENSSL 0.9.8</A><DD>
<DT><A HREF="#lbAG">SEE ALSO</A><DD>
<DT><A HREF="#lbAH">HISTORY</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/manpages/index.html">man2html</A>,
using the manual pages.<BR>
Time: 05:33:36 GMT, December 24, 2015
</div></body>
</HTML>
