<!DOCTYPE html>

<HTML><head><TITLE>Manpage of CPANPLUS::Internals::Source</TITLE>
<meta charset="utf-8">
<link rel="stylesheet" href="/css/main.css" type="text/css">
</head>
<body>
 <header class="site-header">
 <div class="wrap"> <div class="site-title"><a href="/manpages/index.html">linux manpages</a></div>
 <div class="site-description">{"type":"programming"}</div>
 </div>
 </header>
 <div class="page-content">
<H1>CPANPLUS::Internals::Source</H1>
Section: Perl Programmers Reference Guide (3pm)<BR>Updated: 2009-07-06<BR><A HREF="#index">Index</A>
<A HREF="/manpages/index.html">Return to Main Contents</A><HR>






<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

CPANPLUS::Internals::Source
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<A NAME="ixAAC"></A>


<PRE>
    ### lazy load author/module trees ###

    $cb-&gt;_author_tree;
    $cb-&gt;_module_tree;

</PRE>


<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

<A NAME="ixAAD"></A>
CPANPLUS::Internals::Source controls the updating of source files and
the parsing of them into usable module/author trees to be used by
<TT>&quot;CPANPLUS&quot;</TT>.
<P>

Functions exist to check if source files are still <TT>&quot;good to use&quot;</TT> as
well as update them, and then parse them.
<P>

The flow looks like this:
<P>



<PRE>
    $cb-&gt;_author_tree || $cb-&gt;_module_tree
        $cb-&gt;_check_trees
            $cb-&gt;__check_uptodate
                $cb-&gt;_update_source
            $cb-&gt;__update_custom_module_sources 
                $cb-&gt;__update_custom_module_source
        $cb-&gt;_build_trees
            ### engine methods
            {   $cb-&gt;_init_trees;
                $cb-&gt;_standard_trees_completed
                $cb-&gt;_custom_trees_completed
            }                
            $cb-&gt;__create_author_tree
                ### engine methods
                { $cb-&gt;_add_author_object }
            $cb-&gt;__create_module_tree
                $cb-&gt;__create_dslip_tree
                ### engine methods
                { $cb-&gt;_add_module_object }
            $cb-&gt;__create_custom_module_entries                    

    $cb-&gt;_dslip_defs

</PRE>


<A NAME="lbAE">&nbsp;</A>
<H2>METHODS</H2>

<A NAME="ixAAE"></A>
<A NAME="lbAF">&nbsp;</A>
<H3>$cb-&gt;_build_trees( uptodate =&gt; <FONT SIZE="-1">BOOL</FONT>, [use_stored =&gt; <FONT SIZE="-1">BOOL</FONT>, path =&gt; $path, verbose =&gt; <FONT SIZE="-1">BOOL</FONT>] )</H3>



<A NAME="ixAAF"></A>
This method rebuilds the author- and module-trees from source.
<P>

It takes the following arguments:
<DL COMPACT>
<DT>uptodate<DD>
<A NAME="ixAAG"></A>
Indicates whether any on disk caches are still ok to use.
<DT>path<DD>
<A NAME="ixAAH"></A>
The absolute path to the directory holding the source files.
<DT>verbose<DD>
<A NAME="ixAAI"></A>
A boolean flag indicating whether or not to be verbose.
<DT>use_stored<DD>
<A NAME="ixAAJ"></A>
A boolean flag indicating whether or not it is ok to use previously
stored trees. Defaults to true.
</DL>
<P>

Returns a boolean indicating success.
<A NAME="lbAG">&nbsp;</A>
<H3>$cb-&gt;_check_trees( [update_source =&gt; <FONT SIZE="-1">BOOL</FONT>, path =&gt; <FONT SIZE="-1">PATH</FONT>, verbose =&gt; <FONT SIZE="-1">BOOL</FONT>] )</H3>



<A NAME="ixAAK"></A>
Retrieve source files and return a boolean indicating whether or not
the source files are up to date.
<P>

Takes several arguments:
<DL COMPACT>
<DT>update_source<DD>
<A NAME="ixAAL"></A>
A flag to force re-fetching of the source files, even
if they are still up to date.
<DT>path<DD>
<A NAME="ixAAM"></A>
The absolute path to the directory holding the source files.
<DT>verbose<DD>
<A NAME="ixAAN"></A>
A boolean flag indicating whether or not to be verbose.
</DL>
<P>

Will get information from the config file by default.
<A NAME="lbAH">&nbsp;</A>
<H3>$cb-&gt;__check_uptodate( file =&gt; $file, name =&gt; $name, [update_source =&gt; <FONT SIZE="-1">BOOL</FONT>, verbose =&gt; <FONT SIZE="-1">BOOL</FONT>] )</H3>



<A NAME="ixAAO"></A>
<TT>&quot;__check_uptodate&quot;</TT> checks if a given source file is still up-to-date
and if not, or when <TT>&quot;update_source&quot;</TT> is true, will re-fetch the source
file.
<P>

Takes the following arguments:
<DL COMPACT>
<DT>file<DD>
<A NAME="ixAAP"></A>
The source file to check.
<DT>name<DD>
<A NAME="ixAAQ"></A>
The internal shortcut name for the source file (used for config
lookups).
<DT>update_source<DD>
<A NAME="ixAAR"></A>
Flag to force updating of sourcefiles regardless.
<DT>verbose<DD>
<A NAME="ixAAS"></A>
Boolean to indicate whether to be verbose or not.
</DL>
<P>

Returns a boolean value indicating whether the current files are up
to date or not.
<A NAME="lbAI">&nbsp;</A>
<H3>$cb-&gt;_update_source( name =&gt; $name, [path =&gt; $path, verbose =&gt; <FONT SIZE="-1">BOOL</FONT>] )</H3>



<A NAME="ixAAT"></A>
This method does the actual fetching of source files.
<P>

It takes the following arguments:
<DL COMPACT>
<DT>name<DD>
<A NAME="ixAAU"></A>
The internal shortcut name for the source file (used for config
lookups).
<DT>path<DD>
<A NAME="ixAAV"></A>
The full path where to write the files.
<DT>verbose<DD>
<A NAME="ixAAW"></A>
Boolean to indicate whether to be verbose or not.
</DL>
<P>

Returns a boolean to indicate success.
<A NAME="lbAJ">&nbsp;</A>
<H3>$cb-&gt;__create_author_tree([path =&gt; $path, uptodate =&gt; <FONT SIZE="-1">BOOL</FONT>, verbose =&gt; <FONT SIZE="-1">BOOL</FONT>])</H3>



<A NAME="ixAAX"></A>
This method opens a source files and parses its contents into a
searchable author-tree or restores a file-cached version of a
previous parse, if the sources are uptodate and the file-cache exists.
<P>

It takes the following arguments:
<DL COMPACT>
<DT>uptodate<DD>
<A NAME="ixAAY"></A>
A flag indicating whether the file-cache is uptodate or not.
<DT>path<DD>
<A NAME="ixAAZ"></A>
The absolute path to the directory holding the source files.
<DT>verbose<DD>
<A NAME="ixABA"></A>
A boolean flag indicating whether or not to be verbose.
</DL>
<P>

Will get information from the config file by default.
<P>

Returns a tree on success, false on failure.
<A NAME="lbAK">&nbsp;</A>
<H3>$cb-&gt;_create_mod_tree([path =&gt; $path, uptodate =&gt; <FONT SIZE="-1">BOOL</FONT>, verbose =&gt; <FONT SIZE="-1">BOOL</FONT>])</H3>



<A NAME="ixABB"></A>
This method opens a source files and parses its contents into a
searchable module-tree or restores a file-cached version of a
previous parse, if the sources are uptodate and the file-cache exists.
<P>

It takes the following arguments:
<DL COMPACT>
<DT>uptodate<DD>
<A NAME="ixABC"></A>
A flag indicating whether the file-cache is up-to-date or not.
<DT>path<DD>
<A NAME="ixABD"></A>
The absolute path to the directory holding the source files.
<DT>verbose<DD>
<A NAME="ixABE"></A>
A boolean flag indicating whether or not to be verbose.
</DL>
<P>

Will get information from the config file by default.
<P>

Returns a tree on success, false on failure.
<A NAME="lbAL">&nbsp;</A>
<H3>$cb-&gt;__create_dslip_tree([path =&gt; $path, uptodate =&gt; <FONT SIZE="-1">BOOL</FONT>, verbose =&gt; <FONT SIZE="-1">BOOL</FONT>])</H3>



<A NAME="ixABF"></A>
This method opens a source files and parses its contents into a
searchable dslip-tree or restores a file-cached version of a
previous parse, if the sources are uptodate and the file-cache exists.
<P>

It takes the following arguments:
<DL COMPACT>
<DT>uptodate<DD>
<A NAME="ixABG"></A>
A flag indicating whether the file-cache is uptodate or not.
<DT>path<DD>
<A NAME="ixABH"></A>
The absolute path to the directory holding the source files.
<DT>verbose<DD>
<A NAME="ixABI"></A>
A boolean flag indicating whether or not to be verbose.
</DL>
<P>

Will get information from the config file by default.
<P>

Returns a tree on success, false on failure.
<A NAME="lbAM">&nbsp;</A>
<H3>$cb-&gt;_dslip_defs ()</H3>



<A NAME="ixABJ"></A>
This function returns the definition structure (<FONT SIZE="-1">ARRAYREF</FONT>) of the
dslip tree.
<A NAME="lbAN">&nbsp;</A>
<H3>$file = $cb-&gt;_add_custom_module_source( uri =&gt; <FONT SIZE="-1">URI</FONT>, [verbose =&gt; <FONT SIZE="-1">BOOL</FONT>] );</H3>



<A NAME="ixABK"></A>
Adds a custom source index and updates it based on the provided <FONT SIZE="-1">URI</FONT>.
<P>

Returns the full path to the index file on success or false on failure.
<A NAME="lbAO">&nbsp;</A>
<H3>$index = $cb-&gt;__custom_module_source_index_file( uri =&gt; $uri );</H3>



<A NAME="ixABL"></A>
Returns the full path to the encoded index file for <TT>$uri</TT>, as used by
all <TT>&quot;custom module source&quot;</TT> routines.
<A NAME="lbAP">&nbsp;</A>
<H3>$file = $cb-&gt;_remove_custom_module_source( uri =&gt; <FONT SIZE="-1">URI</FONT>, [verbose =&gt; <FONT SIZE="-1">BOOL</FONT>] );</H3>



<A NAME="ixABM"></A>
Removes a custom index file based on the <FONT SIZE="-1">URI</FONT> provided.
<P>

Returns the full path to the index file on success or false on failure.
<A NAME="lbAQ">&nbsp;</A>
<H3>%files = $cb-&gt;__list_custom_module_sources</H3>



<A NAME="ixABN"></A>
This method scans the 'custom-sources' directory in your base directory
for additional sources to include in your module tree.
<P>

Returns a list of key value pairs as follows:
<P>



<PRE>
  /full/path/to/source/file%3Fencoded =&gt; <A HREF="http://decoded/mirror/path">http://decoded/mirror/path</A>

</PRE>


<A NAME="lbAR">&nbsp;</A>
<H3>$bool = $cb-&gt;__update_custom_module_sources( [verbose =&gt; <FONT SIZE="-1">BOOL</FONT>] );</H3>



<A NAME="ixABO"></A>
Attempts to update all the index files to your custom module sources.
<P>

If the index is missing, and it's a <TT>&quot;file://&quot;</TT> uri, it will generate
a new local index for you.
<P>

Return true on success, false on failure.
<A NAME="lbAS">&nbsp;</A>
<H3>$ok = $cb-&gt;__update_custom_module_source</H3>



<A NAME="ixABP"></A>
Attempts to update all the index files to your custom module sources.
<P>

If the index is missing, and it's a <TT>&quot;file://&quot;</TT> uri, it will generate
a new local index for you.
<P>

Return true on success, false on failure.
<A NAME="lbAT">&nbsp;</A>
<H3>$bool = $cb-&gt;__write_custom_module_index( path =&gt; /path/to/packages, [to =&gt; /path/to/index/file, verbose =&gt; <FONT SIZE="-1">BOOL</FONT>] )</H3>



<A NAME="ixABQ"></A>
Scans the <TT>&quot;path&quot;</TT> you provided for packages and writes an index with all 
the available packages to <TT>&quot;$path/packages.txt&quot;</TT>. If you'd like the index
to be written to a different file, provide the <TT>&quot;to&quot;</TT> argument.
<P>

Returns true on success and false on failure.
<A NAME="lbAU">&nbsp;</A>
<H3>$bool = $cb-&gt;__create_custom_module_entries( [verbose =&gt; <FONT SIZE="-1">BOOL</FONT>] )</H3>



<A NAME="ixABR"></A>
Creates entries in the module tree based upon the files as returned
by <TT>&quot;__list_custom_module_sources&quot;</TT>.
<P>

Returns true on success, false on failure.
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">METHODS</A><DD>
<DL>
<DT><A HREF="#lbAF">$cb-&gt;_build_trees( uptodate =&gt; <FONT SIZE="-1">BOOL</FONT>, [use_stored =&gt; <FONT SIZE="-1">BOOL</FONT>, path =&gt; $path, verbose =&gt; <FONT SIZE="-1">BOOL</FONT>] )</A><DD>
<DT><A HREF="#lbAG">$cb-&gt;_check_trees( [update_source =&gt; <FONT SIZE="-1">BOOL</FONT>, path =&gt; <FONT SIZE="-1">PATH</FONT>, verbose =&gt; <FONT SIZE="-1">BOOL</FONT>] )</A><DD>
<DT><A HREF="#lbAH">$cb-&gt;__check_uptodate( file =&gt; $file, name =&gt; $name, [update_source =&gt; <FONT SIZE="-1">BOOL</FONT>, verbose =&gt; <FONT SIZE="-1">BOOL</FONT>] )</A><DD>
<DT><A HREF="#lbAI">$cb-&gt;_update_source( name =&gt; $name, [path =&gt; $path, verbose =&gt; <FONT SIZE="-1">BOOL</FONT>] )</A><DD>
<DT><A HREF="#lbAJ">$cb-&gt;__create_author_tree([path =&gt; $path, uptodate =&gt; <FONT SIZE="-1">BOOL</FONT>, verbose =&gt; <FONT SIZE="-1">BOOL</FONT>])</A><DD>
<DT><A HREF="#lbAK">$cb-&gt;_create_mod_tree([path =&gt; $path, uptodate =&gt; <FONT SIZE="-1">BOOL</FONT>, verbose =&gt; <FONT SIZE="-1">BOOL</FONT>])</A><DD>
<DT><A HREF="#lbAL">$cb-&gt;__create_dslip_tree([path =&gt; $path, uptodate =&gt; <FONT SIZE="-1">BOOL</FONT>, verbose =&gt; <FONT SIZE="-1">BOOL</FONT>])</A><DD>
<DT><A HREF="#lbAM">$cb-&gt;_dslip_defs ()</A><DD>
<DT><A HREF="#lbAN">$file = $cb-&gt;_add_custom_module_source( uri =&gt; <FONT SIZE="-1">URI</FONT>, [verbose =&gt; <FONT SIZE="-1">BOOL</FONT>] );</A><DD>
<DT><A HREF="#lbAO">$index = $cb-&gt;__custom_module_source_index_file( uri =&gt; $uri );</A><DD>
<DT><A HREF="#lbAP">$file = $cb-&gt;_remove_custom_module_source( uri =&gt; <FONT SIZE="-1">URI</FONT>, [verbose =&gt; <FONT SIZE="-1">BOOL</FONT>] );</A><DD>
<DT><A HREF="#lbAQ">%files = $cb-&gt;__list_custom_module_sources</A><DD>
<DT><A HREF="#lbAR">$bool = $cb-&gt;__update_custom_module_sources( [verbose =&gt; <FONT SIZE="-1">BOOL</FONT>] );</A><DD>
<DT><A HREF="#lbAS">$ok = $cb-&gt;__update_custom_module_source</A><DD>
<DT><A HREF="#lbAT">$bool = $cb-&gt;__write_custom_module_index( path =&gt; /path/to/packages, [to =&gt; /path/to/index/file, verbose =&gt; <FONT SIZE="-1">BOOL</FONT>] )</A><DD>
<DT><A HREF="#lbAU">$bool = $cb-&gt;__create_custom_module_entries( [verbose =&gt; <FONT SIZE="-1">BOOL</FONT>] )</A><DD>
</DL>
</DL>
<HR>
This document was created by
<A HREF="/manpages/index.html">man2html</A>,
using the manual pages.<BR>
Time: 05:33:16 GMT, December 24, 2015
</div></body>
</HTML>
