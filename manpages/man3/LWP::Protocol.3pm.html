<!DOCTYPE html>

<HTML><head><TITLE>Manpage of LWP::Protocol</TITLE>
<meta charset="utf-8">
<link rel="stylesheet" href="/css/main.css" type="text/css">
</head>
<body>
 <header class="site-header">
 <div class="wrap"> <div class="site-title"><a href="/manpages/index.html">linux manpages</a></div>
 <div class="site-description">{"type":"programming"}</div>
 </div>
 </header>
 <div class="page-content">
<H1>LWP::Protocol</H1>
Section: User Contributed Perl Documentation (3)<BR>Updated: 2009-07-07<BR><A HREF="#index">Index</A>
<A HREF="/manpages/index.html">Return to Main Contents</A><HR>






<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

LWP::Protocol - Base class for LWP protocols
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<A NAME="ixAAC"></A>


<PRE>
 package LWP::Protocol::foo;
 require LWP::Protocol;
 @ISA=qw(LWP::Protocol);

</PRE>


<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

<A NAME="ixAAD"></A>
This class is used a the base class for all protocol implementations
supported by the <FONT SIZE="-1">LWP</FONT> library.
<P>

When creating an instance of this class using
<TT>&quot;LWP::Protocol::create($url)&quot;</TT>, and you get an initialised subclass
appropriate for that access method. In other words, the
<I>LWP::Protocol::create()</I> function calls the constructor for one of its
subclasses.
<P>

All derived LWP::Protocol classes need to override the <I>request()</I>
method which is used to service a request. The overridden method can
make use of the <I>collect()</I> function to collect together chunks of data
as it is received.
<P>

The following methods and functions are provided:
<DL COMPACT>
<DT>$prot = LWP::Protocol-&gt;<I>new()</I><DD>


<A NAME="ixAAE"></A>
The LWP::Protocol constructor is inherited by subclasses. As this is a
virtual base class this method should <B>not</B> be called directly.
<DT>$prot = LWP::Protocol::create($scheme)<DD>


<A NAME="ixAAF"></A>
Create an object of the class implementing the protocol to handle the
given scheme. This is a function, not a method. It is more an object
factory than a constructor. This is the function user agents should
use to access protocols.
<DT>$class = LWP::Protocol::implementor($scheme, [$class])<DD>


<A NAME="ixAAG"></A>
Get and/or set implementor class for a scheme.  Returns '' if the
specified scheme is not supported.
<DT>$prot-&gt;request(...)<DD>


<A NAME="ixAAH"></A>


<PRE>
 $response = $protocol-&gt;request($request, $proxy, undef);
 $response = $protocol-&gt;request($request, $proxy, '/tmp/sss');
 $response = $protocol-&gt;request($request, $proxy, \&amp;callback, 1024);

</PRE>




<P>


Dispatches a request over the protocol, and returns a response
object. This method needs to be overridden in subclasses.  Refer to
LWP::UserAgent for description of the arguments.
<DT>$prot-&gt;collect($arg, $response, $collector)<DD>


<A NAME="ixAAI"></A>
Called to collect the content of a request, and process it
appropriately into a scalar, file, or by calling a callback.  If <TT>$arg</TT>
is undefined, then the content is stored within the <TT>$response</TT>.  If
<TT>$arg</TT> is a simple scalar, then <TT>$arg</TT> is interpreted as a file name and
the content is written to this file.  If <TT>$arg</TT> is a reference to a
routine, then content is passed to this routine.


<P>


The <TT>$collector</TT> is a routine that will be called and which is
responsible for returning pieces (as ref to scalar) of the content to
process.  The <TT>$collector</TT> signals <FONT SIZE="-1">EOF</FONT> by returning a reference to an
empty sting.


<P>


The return value from <I>collect()</I> is the <TT>$response</TT> object reference.


<P>


<B>Note:</B> We will only use the callback or file argument if
<TT>$response</TT>-&gt;<I>is_success()</I>.  This avoids sending content data for
redirects and authentication responses to the callback which would be
confusing.
<DT>$prot-&gt;collect_once($arg, $response, $content)<DD>


<A NAME="ixAAJ"></A>
Can be called when the whole response content is available as
<TT>$content</TT>.  This will invoke <I>collect()</I> with a collector callback that
returns a reference to <TT>$content</TT> the first time and an empty string the
next.
</DL>
<A NAME="lbAE">&nbsp;</A>
<H2>SEE ALSO</H2>

<A NAME="ixAAK"></A>
Inspect the <I>LWP/Protocol/file.pm</I> and <I>LWP/Protocol/http.pm</I> files
for examples of usage.
<A NAME="lbAF">&nbsp;</A>
<H2>COPYRIGHT</H2>

<A NAME="ixAAL"></A>
Copyright 1995-2001 Gisle Aas.
<P>

This library is free software; you can redistribute it and/or
modify it under the same terms as Perl itself.
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">SEE ALSO</A><DD>
<DT><A HREF="#lbAF">COPYRIGHT</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/manpages/index.html">man2html</A>,
using the manual pages.<BR>
Time: 05:33:34 GMT, December 24, 2015
</div></body>
</HTML>
