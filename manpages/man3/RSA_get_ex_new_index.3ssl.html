<!DOCTYPE html>

<HTML><head><TITLE>Manpage of RSA_get_ex_new_index</TITLE>
<meta charset="utf-8">
<link rel="stylesheet" href="/css/main.css" type="text/css">
</head>
<body>
 <header class="site-header">
 <div class="wrap"> <div class="site-title"><a href="/manpages/index.html">linux manpages</a></div>
 <div class="site-description">{"type":"documentation"}</div>
 </div>
 </header>
 <div class="page-content"><div class="wrap">
<H1>RSA_get_ex_new_index</H1>
Section: OpenSSL (3)<BR>Updated: 2006-12-06<BR><A HREF="#index">Index</A>
<A HREF="/manpages/index.html">Return to Main Contents</A><HR>






<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

RSA_get_ex_new_index, RSA_set_ex_data, RSA_get_ex_data - add application specific data to RSA structures
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<A NAME="ixAAC"></A>


<PRE>
 #include &lt;<A HREF="file:/usr/include/openssl/rsa.h">openssl/rsa.h</A>&gt;

 int RSA_get_ex_new_index(long argl, void *argp,
                CRYPTO_EX_new *new_func,
                CRYPTO_EX_dup *dup_func,
                CRYPTO_EX_free *free_func);

 int RSA_set_ex_data(RSA *r, int idx, void *arg);

 void *RSA_get_ex_data(RSA *r, int idx);

 typedef int CRYPTO_EX_new(void *parent, void *ptr, CRYPTO_EX_DATA *ad,
                           int idx, long argl, void *argp);
 typedef void CRYPTO_EX_free(void *parent, void *ptr, CRYPTO_EX_DATA *ad,
                             int idx, long argl, void *argp);
 typedef int CRYPTO_EX_dup(CRYPTO_EX_DATA *to, CRYPTO_EX_DATA *from, void *from_d,
                           int idx, long argl, void *argp);

</PRE>


<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

<A NAME="ixAAD"></A>
Several OpenSSL structures can have application specific data attached to them.
This has several potential uses, it can be used to cache data associated with
a structure (for example the hash of some part of the structure) or some
additional data (for example a handle to the data in an external library).
<P>

Since the application data can be anything at all it is passed and retrieved
as a <B>void *</B> type.
<P>

The <B></B>RSA_get_ex_new_index()<B></B> function is initially called to ``register'' some
new application specific data. It takes three optional function pointers which
are called when the parent structure (in this case an <FONT SIZE="-1">RSA</FONT> structure) is
initially created, when it is copied and when it is freed up. If any or all of
these function pointer arguments are not used they should be set to <FONT SIZE="-1">NULL</FONT>. The
precise manner in which these function pointers are called is described in more
detail below. <B></B>RSA_get_ex_new_index()<B></B> also takes additional long and pointer
parameters which will be passed to the supplied functions but which otherwise
have no special meaning. It returns an <B>index</B> which should be stored
(typically in a static variable) and passed used in the <B>idx</B> parameter in
the remaining functions. Each successful call to <B></B>RSA_get_ex_new_index()<B></B>
will return an index greater than any previously returned, this is important
because the optional functions are called in order of increasing index value.
<P>

<B></B>RSA_set_ex_data()<B></B> is used to set application specific data, the data is
supplied in the <B>arg</B> parameter and its precise meaning is up to the
application.
<P>

<B></B>RSA_get_ex_data()<B></B> is used to retrieve application specific data. The data
is returned to the application, this will be the same value as supplied to
a previous <B></B>RSA_set_ex_data()<B></B> call.
<P>

<B></B>new_func()<B></B> is called when a structure is initially allocated (for example
with <B></B>RSA_new()<B></B>. The parent structure members will not have any meaningful
values at this point. This function will typically be used to allocate any
application specific structure.
<P>

<B></B>free_func()<B></B> is called when a structure is being freed up. The dynamic parent
structure members should not be accessed because they will be freed up when
this function is called.
<P>

<B></B>new_func()<B></B> and <B></B>free_func()<B></B> take the same parameters. <B>parent</B> is a
pointer to the parent <FONT SIZE="-1">RSA</FONT> structure. <B>ptr</B> is a the application specific data
(this wont be of much use in <B></B>new_func()<B></B>. <B>ad</B> is a pointer to the
<B></B><FONT SIZE="-1"><B>CRYPTO_EX_DATA</B></FONT><B></B> structure from the parent <FONT SIZE="-1">RSA</FONT> structure: the functions
<B></B>CRYPTO_get_ex_data()<B></B> and <B></B>CRYPTO_set_ex_data()<B></B> can be called to manipulate
it. The <B>idx</B> parameter is the index: this will be the same value returned by
<B></B>RSA_get_ex_new_index()<B></B> when the functions were initially registered. Finally
the <B>argl</B> and <B>argp</B> parameters are the values originally passed to the same
corresponding parameters when <B></B>RSA_get_ex_new_index()<B></B> was called.
<P>

<B></B>dup_func()<B></B> is called when a structure is being copied. Pointers to the
destination and source <B></B><FONT SIZE="-1"><B>CRYPTO_EX_DATA</B></FONT><B></B> structures are passed in the <B>to</B> and
<B>from</B> parameters respectively. The <B>from_d</B> parameter is passed a pointer to
the source application data when the function is called, when the function returns
the value is copied to the destination: the application can thus modify the data
pointed to by <B>from_d</B> and have different values in the source and destination.
The <B>idx</B>, <B>argl</B> and <B>argp</B> parameters are the same as those in <B></B>new_func()<B></B>
and <B></B>free_func()<B></B>.
<A NAME="lbAE">&nbsp;</A>
<H2>RETURN VALUES</H2>

<A NAME="ixAAE"></A>
<B></B>RSA_get_ex_new_index()<B></B> returns a new index or -1 on failure (note 0 is a valid
index value).
<P>

<B></B>RSA_set_ex_data()<B></B> returns 1 on success or 0 on failure.
<P>

<B></B>RSA_get_ex_data()<B></B> returns the application data or 0 on failure. 0 may also
be valid application data but currently it can only fail if given an invalid <B>idx</B>
parameter.
<P>

<B></B>new_func()<B></B> and <B></B>dup_func()<B></B> should return 0 for failure and 1 for success.
<P>

On failure an error code can be obtained from <I><A HREF="/manpages/index.html?3+ERR_get_error">ERR_get_error</A></I>(3).
<A NAME="lbAF">&nbsp;</A>
<H2>BUGS</H2>

<A NAME="ixAAF"></A>
<B></B>dup_func()<B></B> is currently never called.
<P>

The return value of <B></B>new_func()<B></B> is ignored.
<P>

The <B></B>new_func()<B></B> function isn't very useful because no meaningful values are
present in the parent <FONT SIZE="-1">RSA</FONT> structure when it is called.
<A NAME="lbAG">&nbsp;</A>
<H2>SEE ALSO</H2>

<A NAME="ixAAG"></A>
<I><A HREF="/manpages/index.html?3+rsa">rsa</A></I>(3), <I><A HREF="http://localhost/cgi-bin/man/man2html?3+CRYPTO_set_ex_data">CRYPTO_set_ex_data</A></I>(3)
<A NAME="lbAH">&nbsp;</A>
<H2>HISTORY</H2>

<A NAME="ixAAH"></A>
<I>RSA_get_ex_new_index()</I>, <I>RSA_set_ex_data()</I> and <I>RSA_get_ex_data()</I> are
available since SSLeay 0.9.0.
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">RETURN VALUES</A><DD>
<DT><A HREF="#lbAF">BUGS</A><DD>
<DT><A HREF="#lbAG">SEE ALSO</A><DD>
<DT><A HREF="#lbAH">HISTORY</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/manpages/index.html">man2html</A>,
using the manual pages.<BR>
Time: 05:33:38 GMT, December 24, 2015
</div></div>
</body>
</HTML>
