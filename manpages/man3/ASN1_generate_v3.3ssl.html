<!DOCTYPE html>

<HTML><head><TITLE>Manpage of ASN1_generate_nconf</TITLE>
<meta charset="utf-8">
<link rel="stylesheet" href="/css/main.css" type="text/css">
</head>
<body>
 <header class="site-header">
 <div class="wrap"> <div class="site-title"><a href="/manpages/index.html">linux manpages</a></div>
 <div class="site-description">{"type":"documentation"}</div>
 </div>
 </header>
 <div class="page-content"><div class="wrap">
<H1>ASN1_generate_nconf</H1>
Section: OpenSSL (3)<BR>Updated: 2009-11-29<BR><A HREF="#index">Index</A>
<A HREF="/manpages/index.html">Return to Main Contents</A><HR>






<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

ASN1_generate_nconf, ASN1_generate_v3 - ASN1 generation functions
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<A NAME="ixAAC"></A>


<PRE>
 #include &lt;<A HREF="file:/usr/include/openssl/asn1.h">openssl/asn1.h</A>&gt;

 ASN1_TYPE *ASN1_generate_nconf(char *str, CONF *nconf);
 ASN1_TYPE *ASN1_generate_v3(char *str, X509V3_CTX *cnf);

</PRE>


<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

<A NAME="ixAAD"></A>
These functions generate the <FONT SIZE="-1">ASN1</FONT> encoding of a string
in an <B></B><FONT SIZE="-1"><B>ASN1_TYPE</B></FONT><B></B> structure.
<P>

<B>str</B> contains the string to encode <B>nconf</B> or <B>cnf</B> contains
the optional configuration information where additional strings
will be read from. <B>nconf</B> will typically come from a config
file wherease <B>cnf</B> is obtained from an <B>X509V3_CTX</B> structure
which will typically be used by X509 v3 certificate extension
functions. <B>cnf</B> or <B>nconf</B> can be set to <B></B><FONT SIZE="-1"><B>NULL</B></FONT><B></B> if no additional
configuration will be used.
<A NAME="lbAE">&nbsp;</A>
<H2>GENERATION STRING FORMAT</H2>

<A NAME="ixAAE"></A>
The actual data encoded is determined by the string <B>str</B> and
the configuration information. The general format of the string
is:
<DL COMPACT>
<DT><B>[modifier,]type[:value]</B><DD>
<A NAME="ixAAF"></A>
</DL>
<P>

That is zero or more comma separated modifiers followed by a type
followed by an optional colon and a value. The formats of <B>type</B>,
<B>value</B> and <B>modifier</B> are explained below.
<A NAME="lbAF">&nbsp;</A>
<H3><FONT SIZE="-1">SUPPORTED</FONT> <FONT SIZE="-1">TYPES</FONT></H3>

<A NAME="ixAAG"></A>
The supported types are listed below. Unless otherwise specified
only the <B></B><FONT SIZE="-1"><B>ASCII</B></FONT><B></B> format is permissible.
<DL COMPACT>
<DT><B></B><FONT SIZE="-1"><B>BOOLEAN</B></FONT><B></B>, <B></B><FONT SIZE="-1"><B>BOOL</B></FONT><B></B><DD>
<A NAME="ixAAH"></A>
This encodes a boolean type. The <B>value</B> string is mandatory and
should be <B></B><FONT SIZE="-1"><B>TRUE</B></FONT><B></B> or <B></B><FONT SIZE="-1"><B>FALSE</B></FONT><B></B>. Additionally <B></B><FONT SIZE="-1"><B>TRUE</B></FONT><B></B>, <B>true</B>, <B>Y</B>,
<B>y</B>, <B></B><FONT SIZE="-1"><B>YES</B></FONT><B></B>, <B>yes</B>, <B></B><FONT SIZE="-1"><B>FALSE</B></FONT><B></B>, <B>false</B>, <B>N</B>, <B>n</B>, <B></B><FONT SIZE="-1"><B>NO</B></FONT><B></B> and <B>no</B>
are acceptable.
<DT><B></B><FONT SIZE="-1"><B>NULL</B></FONT><B></B><DD>
<A NAME="ixAAI"></A>
Encode the <B></B><FONT SIZE="-1"><B>NULL</B></FONT><B></B> type, the <B>value</B> string must not be present.
<DT><B></B><FONT SIZE="-1"><B>INTEGER</B></FONT><B></B>, <B></B><FONT SIZE="-1"><B>INT</B></FONT><B></B><DD>
<A NAME="ixAAJ"></A>
Encodes an <FONT SIZE="-1">ASN1</FONT> <B></B><FONT SIZE="-1"><B>INTEGER</B></FONT><B></B> type. The <B>value</B> string represents
the value of the integer, it can be preceeded by a minus sign and
is normally interpreted as a decimal value unless the prefix <B>0x</B>
is included.
<DT><B></B><FONT SIZE="-1"><B>ENUMERATED</B></FONT><B></B>, <B></B><FONT SIZE="-1"><B>ENUM</B></FONT><B></B><DD>
<A NAME="ixAAK"></A>
Encodes the <FONT SIZE="-1">ASN1</FONT> <B></B><FONT SIZE="-1"><B>ENUMERATED</B></FONT><B></B> type, it is otherwise identical to
<B></B><FONT SIZE="-1"><B>INTEGER</B></FONT><B></B>.
<DT><B></B><FONT SIZE="-1"><B>OBJECT</B></FONT><B></B>, <B></B><FONT SIZE="-1"><B>OID</B></FONT><B></B><DD>
<A NAME="ixAAL"></A>
Encodes an <FONT SIZE="-1">ASN1</FONT> <B></B><FONT SIZE="-1"><B>OBJECT</B></FONT><B> </B><FONT SIZE="-1"><B>IDENTIFIER</B></FONT><B></B>, the <B>value</B> string can be
a short name, a long name or numerical format.
<DT><B></B><FONT SIZE="-1"><B>UTCTIME</B></FONT><B></B>, <B></B><FONT SIZE="-1"><B>UTC</B></FONT><B></B><DD>
<A NAME="ixAAM"></A>
Encodes an <FONT SIZE="-1">ASN1</FONT> <B>UTCTime</B> structure, the value should be in
the format <B></B><FONT SIZE="-1"><B>YYMMDDHHMMSSZ</B></FONT><B></B>.
<DT><B></B><FONT SIZE="-1"><B>GENERALIZEDTIME</B></FONT><B></B>, <B></B><FONT SIZE="-1"><B>GENTIME</B></FONT><B></B><DD>
<A NAME="ixAAN"></A>
Encodes an <FONT SIZE="-1">ASN1</FONT> <B>GeneralizedTime</B> structure, the value should be in
the format <B></B><FONT SIZE="-1"><B>YYYYMMDDHHMMSSZ</B></FONT><B></B>.
<DT><B></B><FONT SIZE="-1"><B>OCTETSTRING</B></FONT><B></B>, <B></B><FONT SIZE="-1"><B>OCT</B></FONT><B></B><DD>
<A NAME="ixAAO"></A>
Encodes an <FONT SIZE="-1">ASN1</FONT> <B></B><FONT SIZE="-1"><B>OCTET</B></FONT><B> </B><FONT SIZE="-1"><B>STRING</B></FONT><B></B>. <B>value</B> represents the contents
of this structure, the format strings <B></B><FONT SIZE="-1"><B>ASCII</B></FONT><B></B> and <B></B><FONT SIZE="-1"><B>HEX</B></FONT><B></B> can be
used to specify the format of <B>value</B>.
<DT><B></B><FONT SIZE="-1"><B>BITSTRING</B></FONT><B></B>, <B></B><FONT SIZE="-1"><B>BITSTR</B></FONT><B></B><DD>
<A NAME="ixAAP"></A>
Encodes an <FONT SIZE="-1">ASN1</FONT> <B></B><FONT SIZE="-1"><B>BIT</B></FONT><B> </B><FONT SIZE="-1"><B>STRING</B></FONT><B></B>. <B>value</B> represents the contents
of this structure, the format strings <B></B><FONT SIZE="-1"><B>ASCII</B></FONT><B></B>, <B></B><FONT SIZE="-1"><B>HEX</B></FONT><B></B> and <B></B><FONT SIZE="-1"><B>BITLIST</B></FONT><B></B>
can be used to specify the format of <B>value</B>.


<P>


If the format is anything other than <B></B><FONT SIZE="-1"><B>BITLIST</B></FONT><B></B> the number of unused
bits is set to zero.
<DT><B></B><FONT SIZE="-1"><B>UNIVERSALSTRING</B></FONT><B></B>, <B></B><FONT SIZE="-1"><B>UNIV</B></FONT><B></B>, <B></B><FONT SIZE="-1"><B>IA5</B></FONT><B></B>, <B></B><FONT SIZE="-1"><B>IA5STRING</B></FONT><B></B>, <B></B><FONT SIZE="-1"><B>UTF8</B></FONT><B></B>, <B>UTF8String</B>, <B></B><FONT SIZE="-1"><B>BMP</B></FONT><B></B>, <B></B><FONT SIZE="-1"><B>BMPSTRING</B></FONT><B></B>, <B></B><FONT SIZE="-1"><B>VISIBLESTRING</B></FONT><B></B>, <B></B><FONT SIZE="-1"><B>VISIBLE</B></FONT><B></B>, <B></B><FONT SIZE="-1"><B>PRINTABLESTRING</B></FONT><B></B>, <B></B><FONT SIZE="-1"><B>PRINTABLE</B></FONT><B></B>, <B>T61</B>, <B>T61STRING</B>, <B></B><FONT SIZE="-1"><B>TELETEXSTRING</B></FONT><B></B>, <B>GeneralString</B>, <B></B><FONT SIZE="-1"><B>NUMERICSTRING</B></FONT><B></B>, <B></B><FONT SIZE="-1"><B>NUMERIC</B></FONT><B></B><DD>
<A NAME="ixAAQ"></A>
These encode the corresponding string types. <B>value</B> represents the
contents of this structure. The format can be <B></B><FONT SIZE="-1"><B>ASCII</B></FONT><B></B> or <B></B><FONT SIZE="-1"><B>UTF8</B></FONT><B></B>.
<DT><B></B><FONT SIZE="-1"><B>SEQUENCE</B></FONT><B></B>, <B></B><FONT SIZE="-1"><B>SEQ</B></FONT><B></B>, <B></B><FONT SIZE="-1"><B>SET</B></FONT><B></B><DD>
<A NAME="ixAAR"></A>
Formats the result as an <FONT SIZE="-1">ASN1</FONT> <B></B><FONT SIZE="-1"><B>SEQUENCE</B></FONT><B></B> or <B></B><FONT SIZE="-1"><B>SET</B></FONT><B></B> type. <B>value</B>
should be a section name which will contain the contents. The
field names in the section are ignored and the values are in the
generated string format. If <B>value</B> is absent then an empty <FONT SIZE="-1">SEQUENCE</FONT>
will be encoded.
</DL>
<A NAME="lbAG">&nbsp;</A>
<H3><FONT SIZE="-1">MODIFIERS</FONT></H3>

<A NAME="ixAAS"></A>
Modifiers affect the following structure, they can be used to
add <FONT SIZE="-1">EXPLICIT</FONT> or <FONT SIZE="-1">IMPLICIT</FONT> tagging, add wrappers or to change
the string format of the final type and value. The supported
formats are documented below.
<DL COMPACT>
<DT><B></B><FONT SIZE="-1"><B>EXPLICIT</B></FONT><B></B>, <B></B><FONT SIZE="-1"><B>EXP</B></FONT><B></B><DD>
<A NAME="ixAAT"></A>
Add an explicit tag to the following structure. This string
should be followed by a colon and the tag value to use as a
decimal value.


<P>


By following the number with <B>U</B>, <B>A</B>, <B>P</B> or <B>C</B> <FONT SIZE="-1">UNIVERSAL</FONT>,
<FONT SIZE="-1">APPLICATION</FONT>, <FONT SIZE="-1">PRIVATE</FONT> or <FONT SIZE="-1">CONTEXT</FONT> <FONT SIZE="-1">SPECIFIC</FONT> tagging can be used,
the default is <FONT SIZE="-1">CONTEXT</FONT> <FONT SIZE="-1">SPECIFIC</FONT>.
<DT><B></B><FONT SIZE="-1"><B>IMPLICIT</B></FONT><B></B>, <B></B><FONT SIZE="-1"><B>IMP</B></FONT><B></B><DD>
<A NAME="ixAAU"></A>
This is the same as <B></B><FONT SIZE="-1"><B>EXPLICIT</B></FONT><B></B> except <FONT SIZE="-1">IMPLICIT</FONT> tagging is used
instead.
<DT><B></B><FONT SIZE="-1"><B>OCTWRAP</B></FONT><B></B>, <B></B><FONT SIZE="-1"><B>SEQWRAP</B></FONT><B></B>, <B></B><FONT SIZE="-1"><B>SETWRAP</B></FONT><B></B>, <B></B><FONT SIZE="-1"><B>BITWRAP</B></FONT><B></B><DD>
<A NAME="ixAAV"></A>
The following structure is surrounded by an <FONT SIZE="-1">OCTET</FONT> <FONT SIZE="-1">STRING</FONT>, a <FONT SIZE="-1">SEQUENCE</FONT>,
a <FONT SIZE="-1">SET</FONT> or a <FONT SIZE="-1">BIT</FONT> <FONT SIZE="-1">STRING</FONT> respectively. For a <FONT SIZE="-1">BIT</FONT> <FONT SIZE="-1">STRING</FONT> the number of unused
bits is set to zero.
<DT><B></B><FONT SIZE="-1"><B>FORMAT</B></FONT><B></B><DD>
<A NAME="ixAAW"></A>
This specifies the format of the ultimate value. It should be followed
by a colon and one of the strings <B></B><FONT SIZE="-1"><B>ASCII</B></FONT><B></B>, <B></B><FONT SIZE="-1"><B>UTF8</B></FONT><B></B>, <B></B><FONT SIZE="-1"><B>HEX</B></FONT><B></B> or <B></B><FONT SIZE="-1"><B>BITLIST</B></FONT><B></B>.


<P>


If no format specifier is included then <B></B><FONT SIZE="-1"><B>ASCII</B></FONT><B></B> is used. If <B></B><FONT SIZE="-1"><B>UTF8</B></FONT><B></B> is
specified then the value string must be a valid <B></B><FONT SIZE="-1"><B>UTF8</B></FONT><B></B> string. For <B></B><FONT SIZE="-1"><B>HEX</B></FONT><B></B> the
output must be a set of hex digits. <B></B><FONT SIZE="-1"><B>BITLIST</B></FONT><B></B> (which is only valid for a <FONT SIZE="-1">BIT</FONT>
<FONT SIZE="-1">STRING</FONT>) is a comma separated list of the indices of the set bits, all other
bits are zero.
</DL>
<A NAME="lbAH">&nbsp;</A>
<H2>EXAMPLES</H2>

<A NAME="ixAAX"></A>
A simple IA5String:
<P>



<PRE>
 IA5STRING:Hello World

</PRE>


<P>

An IA5String explicitly tagged:
<P>



<PRE>
 EXPLICIT:0,IA5STRING:Hello World

</PRE>


<P>

An IA5String explicitly tagged using <FONT SIZE="-1">APPLICATION</FONT> tagging:
<P>



<PRE>
 EXPLICIT:0A,IA5STRING:Hello World

</PRE>


<P>

A <FONT SIZE="-1">BITSTRING</FONT> with bits 1 and 5 set and all others zero:
<P>



<PRE>
 FORMAT:BITLIST,BITSTRING:1,5

</PRE>


<P>

A more complex example using a config file to produce a
<FONT SIZE="-1">SEQUENCE</FONT> consiting of a <FONT SIZE="-1">BOOL</FONT> an <FONT SIZE="-1">OID</FONT> and a UTF8String:
<P>



<PRE>
 asn1 = SEQUENCE:seq_section

 [seq_section]

 field1 = BOOLEAN:TRUE
 field2 = OID:commonName
 field3 = UTF8:Third field

</PRE>


<P>

This example produces an RSAPrivateKey structure, this is the
key contained in the file client.pem in all OpenSSL distributions
(note: the field names such as 'coeff' are ignored and are present just
for clarity):
<P>



<PRE>
 asn1=SEQUENCE:private_key
 [private_key]
 version=INTEGER:0

 n=INTEGER:0xBB6FE79432CC6EA2D8F970675A5A87BFBE1AFF0BE63E879F2AFFB93644\
 D4D2C6D000430DEC66ABF47829E74B8C5108623A1C0EE8BE217B3AD8D36D5EB4FCA1D9

 e=INTEGER:0x010001

 d=INTEGER:0x6F05EAD2F27FFAEC84BEC360C4B928FD5F3A9865D0FCAAD291E2A52F4A\
 F810DC6373278C006A0ABBA27DC8C63BF97F7E666E27C5284D7D3B1FFFE16B7A87B51D

 p=INTEGER:0xF3929B9435608F8A22C208D86795271D54EBDFB09DDEF539AB083DA912\
 D4BD57

 q=INTEGER:0xC50016F89DFF2561347ED1186A46E150E28BF2D0F539A1594BBD7FE467\
 46EC4F

 exp1=INTEGER:0x9E7D4326C924AFC1DEA40B45650134966D6F9DFA3A7F9D698CD4ABEA\
 9C0A39B9

 exp2=INTEGER:0xBA84003BB95355AFB7C50DF140C60513D0BA51D637272E355E397779\
 E7B2458F

 coeff=INTEGER:0x30B9E4F2AFA5AC679F920FC83F1F2DF1BAF1779CF989447FABC2F5\
 628657053A

</PRE>


<P>

This example is the corresponding public key in a SubjectPublicKeyInfo
structure:
<P>



<PRE>
 # Start with a SEQUENCE
 asn1=SEQUENCE:pubkeyinfo

 # pubkeyinfo contains an algorithm identifier and the public key wrapped
 # in a BIT STRING
 [pubkeyinfo]
 algorithm=SEQUENCE:rsa_alg
 pubkey=BITWRAP,SEQUENCE:rsapubkey

 # algorithm ID for RSA is just an OID and a NULL
 [rsa_alg]
 algorithm=OID:rsaEncryption
 parameter=NULL

 # Actual public key: modulus and exponent
 [rsapubkey]
 n=INTEGER:0xBB6FE79432CC6EA2D8F970675A5A87BFBE1AFF0BE63E879F2AFFB93644\
 D4D2C6D000430DEC66ABF47829E74B8C5108623A1C0EE8BE217B3AD8D36D5EB4FCA1D9

 e=INTEGER:0x010001

</PRE>


<A NAME="lbAI">&nbsp;</A>
<H2>RETURN VALUES</H2>

<A NAME="ixAAY"></A>
<I>ASN1_generate_nconf()</I> and <I>ASN1_generate_v3()</I> return the encoded
data as an <B></B><FONT SIZE="-1"><B>ASN1_TYPE</B></FONT><B></B> structure or <B></B><FONT SIZE="-1"><B>NULL</B></FONT><B></B> if an error occurred.
<P>

The error codes that can be obtained by <I><A HREF="/manpages/index.html?3+ERR_get_error">ERR_get_error</A></I>(3).
<A NAME="lbAJ">&nbsp;</A>
<H2>SEE ALSO</H2>

<A NAME="ixAAZ"></A>
<I><A HREF="/manpages/index.html?3+ERR_get_error">ERR_get_error</A></I>(3)
<A NAME="lbAK">&nbsp;</A>
<H2>HISTORY</H2>

<A NAME="ixABA"></A>
<I>ASN1_generate_nconf()</I> and <I>ASN1_generate_v3()</I> were added to OpenSSL 0.9.8
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">GENERATION STRING FORMAT</A><DD>
<DL>
<DT><A HREF="#lbAF"><FONT SIZE="-1">SUPPORTED</FONT> <FONT SIZE="-1">TYPES</FONT></A><DD>
<DT><A HREF="#lbAG"><FONT SIZE="-1">MODIFIERS</FONT></A><DD>
</DL>
<DT><A HREF="#lbAH">EXAMPLES</A><DD>
<DT><A HREF="#lbAI">RETURN VALUES</A><DD>
<DT><A HREF="#lbAJ">SEE ALSO</A><DD>
<DT><A HREF="#lbAK">HISTORY</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/manpages/index.html">man2html</A>,
using the manual pages.<BR>
Time: 05:33:11 GMT, December 24, 2015
</div></div>
</body>
</HTML>
