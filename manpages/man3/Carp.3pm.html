<!DOCTYPE html>

<HTML><head><TITLE>Manpage of Carp</TITLE>
<meta charset="utf-8">
<link rel="stylesheet" href="/css/main.css" type="text/css">
</head>
<body>
 <header class="site-header">
 <div class="wrap"> <div class="site-title"><a href="/manpages/index.html">linux man pages</a></div>
 <div class="site-description">{"type":"programming"}</div>
 </div>
 </header>
 <div class="page-content">
<H1>Carp</H1>
Section: Perl Programmers Reference Guide (3pm)<BR>Updated: 2009-07-03<BR><A HREF="#index">Index</A>
<A HREF="/manpages/index.html">Return to Main Contents</A><HR>






<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

carp    - warn of errors (from perspective of caller)
<P>

cluck   - warn of errors with stack backtrace
<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(not&nbsp;exported&nbsp;by&nbsp;default)
<P>

croak   - die of errors (from perspective of caller)
<P>

confess - die of errors with stack backtrace
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<A NAME="ixAAC"></A>


<PRE>
    use Carp;
    croak &quot;We're outta here!&quot;;

    use Carp qw(cluck);
    cluck &quot;This is how we got here!&quot;;

</PRE>


<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

<A NAME="ixAAD"></A>
The Carp routines are useful in your own modules because
they act like <I>die()</I> or <I>warn()</I>, but with a message which is more
likely to be useful to a user of your module.  In the case of
cluck, confess, and longmess that context is a summary of every
call in the call-stack.  For a shorter message you can use <TT>&quot;carp&quot;</TT>
or <TT>&quot;croak&quot;</TT> which report the error as being from where your module
was called.  There is no guarantee that that is where the error
was, but it is a good educated guess.
<P>

You can also alter the way the output and logic of <TT>&quot;Carp&quot;</TT> works, by
changing some global variables in the <TT>&quot;Carp&quot;</TT> namespace. See the
section on <TT>&quot;GLOBAL VARIABLES&quot;</TT> below.
<P>

Here is a more complete description of how <TT>&quot;carp&quot;</TT> and <TT>&quot;croak&quot;</TT> work.
What they do is search the call-stack for a function call stack where
they have not been told that there shouldn't be an error.  If every
call is marked safe, they give up and give a full stack backtrace
instead.  In other words they presume that the first likely looking
potential suspect is guilty.  Their rules for telling whether
a call shouldn't generate errors work as follows:
<DL COMPACT>
<DT>1.<DD>
Any call from a package to itself is safe.
<DT>2.<DD>
Packages claim that there won't be errors on calls to or from
packages explicitly marked as safe by inclusion in <TT>@CARP_NOT</TT>, or
(if that array is empty) <TT>@ISA</TT>.  The ability to override what
<TT>@ISA</TT> says is new in 5.8.
<DT>3.<DD>
The trust in item 2 is transitive.  If A trusts B, and B
trusts C, then A trusts C.  So if you do not override <TT>@ISA</TT>
with <TT>@CARP_NOT</TT>, then this trust relationship is identical to,
``inherits from''.
<DT>4.<DD>
Any call from an internal Perl module is safe.  (Nothing keeps
user modules from marking themselves as internal to Perl, but
this practice is discouraged.)
<DT>5.<DD>
Any call to Perl's warning system (eg Carp itself) is safe.
(This rule is what keeps it from reporting the error at the
point where you call <TT>&quot;carp&quot;</TT> or <TT>&quot;croak&quot;</TT>.)
<DT>6.<DD>
<TT>$Carp::CarpLevel</TT> can be set to skip a fixed number of additional
call levels.  Using this is not recommended because it is very
difficult to get it to behave correctly.
</DL>
<A NAME="lbAE">&nbsp;</A>
<H3>Forcing a Stack Trace</H3>

<A NAME="ixAAE"></A>
As a debugging aid, you can force Carp to treat a croak as a confess
and a carp as a cluck across <I>all</I> modules. In other words, force a
detailed stack trace to be given.  This can be very helpful when trying
to understand why, or from where, a warning or error is being generated.
<P>

This feature is enabled by 'importing' the non-existent symbol
'verbose'. You would typically enable it by saying
<P>



<PRE>
    perl -MCarp=verbose script.pl

</PRE>


<P>

or by including the string <TT>&quot;-MCarp=verbose&quot;</TT> in the <FONT SIZE="-1">PERL5OPT</FONT>
environment variable.
<P>

Alternately, you can set the global variable <TT>$Carp::Verbose</TT> to true.
See the <TT>&quot;GLOBAL VARIABLES&quot;</TT> section below.
<A NAME="lbAF">&nbsp;</A>
<H2>GLOBAL VARIABLES</H2>

<A NAME="ixAAF"></A>
<A NAME="lbAG">&nbsp;</A>
<H3>$Carp::MaxEvalLen</H3>



<A NAME="ixAAG"></A>
This variable determines how many characters of a string-eval are to
be shown in the output. Use a value of <TT>0</TT> to show all text.
<P>

Defaults to <TT>0</TT>.
<A NAME="lbAH">&nbsp;</A>
<H3>$Carp::MaxArgLen</H3>



<A NAME="ixAAH"></A>
This variable determines how many characters of each argument to a
function to print. Use a value of <TT>0</TT> to show the full length of the
argument.
<P>

Defaults to <TT>64</TT>.
<A NAME="lbAI">&nbsp;</A>
<H3>$Carp::MaxArgNums</H3>



<A NAME="ixAAI"></A>
This variable determines how many arguments to each function to show.
Use a value of <TT>0</TT> to show all arguments to a function call.
<P>

Defaults to <TT>8</TT>.
<A NAME="lbAJ">&nbsp;</A>
<H3>$Carp::Verbose</H3>



<A NAME="ixAAJ"></A>
This variable makes <TT>&quot;carp&quot;</TT> and <TT>&quot;cluck&quot;</TT> generate stack backtraces
just like <TT>&quot;cluck&quot;</TT> and <TT>&quot;confess&quot;</TT>.  This is how <TT>&quot;use Carp 'verbose'&quot;</TT>
is implemented internally.
<P>

Defaults to <TT>0</TT>.
<A NAME="lbAK">&nbsp;</A>
<H3>%Carp::Internal</H3>



<A NAME="ixAAK"></A>
This says what packages are internal to Perl.  <TT>&quot;Carp&quot;</TT> will never
report an error as being from a line in a package that is internal to
Perl.  For example:
<P>



<PRE>
    $Carp::Internal{ (__PACKAGE__) }++;
    # time passes...
    sub foo { ... or confess(&quot;whatever&quot;) };

</PRE>


<P>

would give a full stack backtrace starting from the first caller
outside of __PACKAGE__.  (Unless that package was also internal to
Perl.)
<A NAME="lbAL">&nbsp;</A>
<H3>%Carp::CarpInternal</H3>



<A NAME="ixAAL"></A>
This says which packages are internal to Perl's warning system.  For
generating a full stack backtrace this is the same as being internal
to Perl, the stack backtrace will not start inside packages that are
listed in <TT>%Carp::CarpInternal</TT>.  But it is slightly different for
the summary message generated by <TT>&quot;carp&quot;</TT> or <TT>&quot;croak&quot;</TT>.  There errors
will not be reported on any lines that are calling packages in
<TT>%Carp::CarpInternal</TT>.
<P>

For example <TT>&quot;Carp&quot;</TT> itself is listed in <TT>%Carp::CarpInternal</TT>.
Therefore the full stack backtrace from <TT>&quot;confess&quot;</TT> will not start
inside of <TT>&quot;Carp&quot;</TT>, and the short message from calling <TT>&quot;croak&quot;</TT> is
not placed on the line where <TT>&quot;croak&quot;</TT> was called.
<A NAME="lbAM">&nbsp;</A>
<H3>$Carp::CarpLevel</H3>



<A NAME="ixAAM"></A>
This variable determines how many additional call frames are to be
skipped that would not otherwise be when reporting where an error
occurred on a call to one of <TT>&quot;Carp&quot;</TT>'s functions.  It is fairly easy
to count these call frames on calls that generate a full stack
backtrace.  However it is much harder to do this accounting for calls
that generate a short message.  Usually people skip too many call
frames.  If they are lucky they skip enough that <TT>&quot;Carp&quot;</TT> goes all of
the way through the call stack, realizes that something is wrong, and
then generates a full stack backtrace.  If they are unlucky then the
error is reported from somewhere misleading very high in the call
stack.
<P>

Therefore it is best to avoid <TT>$Carp::CarpLevel</TT>.  Instead use
<TT>@CARP_NOT</TT>, <TT>%Carp::Internal</TT> and <TT>%Carp::CarpInternal</TT>.
<P>

Defaults to <TT>0</TT>.
<A NAME="lbAN">&nbsp;</A>
<H2>BUGS</H2>

<A NAME="ixAAN"></A>
The Carp routines don't handle exception objects currently.
If called with a first argument that is a reference, they simply
call <I>die()</I> or <I>warn()</I>, as appropriate.
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DL>
<DT><A HREF="#lbAE">Forcing a Stack Trace</A><DD>
</DL>
<DT><A HREF="#lbAF">GLOBAL VARIABLES</A><DD>
<DL>
<DT><A HREF="#lbAG">$Carp::MaxEvalLen</A><DD>
<DT><A HREF="#lbAH">$Carp::MaxArgLen</A><DD>
<DT><A HREF="#lbAI">$Carp::MaxArgNums</A><DD>
<DT><A HREF="#lbAJ">$Carp::Verbose</A><DD>
<DT><A HREF="#lbAK">%Carp::Internal</A><DD>
<DT><A HREF="#lbAL">%Carp::CarpInternal</A><DD>
<DT><A HREF="#lbAM">$Carp::CarpLevel</A><DD>
</DL>
<DT><A HREF="#lbAN">BUGS</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/manpages/index.html">man2html</A>,
using the manual pages.<BR>
Time: 05:33:15 GMT, December 24, 2015
</div></body>
</HTML>
