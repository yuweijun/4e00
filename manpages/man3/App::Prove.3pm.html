<!DOCTYPE html>

<HTML><head><TITLE>Manpage of App::Prove</TITLE>
<meta charset="utf-8">
<link rel="stylesheet" href="/css/main.css" type="text/css">
</head>
<body>
 <header class="site-header">
 <div class="wrap"> <div class="site-title"><a href="/manpages/index.html">linux manpages</a></div>
 <div class="site-description">{"type":"documentation"}</div>
 </div>
 </header>
 <div class="page-content"><div class="wrap">
<H1>App::Prove</H1>
Section: Perl Programmers Reference Guide (3pm)<BR>Updated: 2009-06-12<BR><A HREF="#index">Index</A>
<A HREF="/manpages/index.html">Return to Main Contents</A><HR>






<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

App::Prove - Implements the <TT>&quot;prove&quot;</TT> command.
<A NAME="lbAC">&nbsp;</A>
<H2>VERSION</H2>

<A NAME="ixAAC"></A>
Version 3.17
<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

<A NAME="ixAAD"></A>
Test::Harness provides a command, <TT>&quot;prove&quot;</TT>, which runs a <FONT SIZE="-1">TAP</FONT> based
test suite and prints a report. The <TT>&quot;prove&quot;</TT> command is a minimal
wrapper around an instance of this module.
<A NAME="lbAE">&nbsp;</A>
<H2>SYNOPSIS</H2>

<A NAME="ixAAE"></A>


<PRE>
    use App::Prove;

    my $app = App::Prove-&gt;new;
    $app-&gt;process_args(@ARGV);
    $app-&gt;run;

</PRE>


<A NAME="lbAF">&nbsp;</A>
<H2>METHODS</H2>

<A NAME="ixAAF"></A>
<A NAME="lbAG">&nbsp;</A>
<H3>Class Methods</H3>

<A NAME="ixAAG"></A>
<I></I>&quot;new&quot;<I></I>
<A NAME="ixAAH"></A>
<P>

Create a new <TT>&quot;App::Prove&quot;</TT>. Optionally a hash ref of attribute
initializers may be passed.
<P>

<I></I>&quot;state_class&quot;<I></I>
<A NAME="ixAAI"></A>
<P>

Getter/setter for the name of the class used for maintaining state.  This
class should either subclass from <TT>&quot;App::Prove::State&quot;</TT> or provide an identical
interface.
<P>

<I></I>&quot;state_manager&quot;<I></I>
<A NAME="ixAAJ"></A>
<P>

Getter/setter for the instance of the <TT>&quot;state_class&quot;</TT>.
<P>

<I></I>&quot;add_rc_file&quot;<I></I>
<A NAME="ixAAK"></A>
<P>



<PRE>
    $prove-&gt;add_rc_file('myproj/.proverc');

</PRE>


<P>

Called before <TT>&quot;process_args&quot;</TT> to prepend the contents of an rc file to
the options.
<P>

<I></I>&quot;process_args&quot;<I></I>
<A NAME="ixAAL"></A>
<P>



<PRE>
    $prove-&gt;process_args(@args);

</PRE>


<P>

Processes the command-line arguments. Attributes will be set
appropriately. Any filenames may be found in the <TT>&quot;argv&quot;</TT> attribute.
<P>

Dies on invalid arguments.
<P>

<I></I>&quot;run&quot;<I></I>
<A NAME="ixAAM"></A>
<P>

Perform whatever actions the command line args specified. The <TT>&quot;prove&quot;</TT>
command line tool consists of the following code:
<P>



<PRE>
    use App::Prove;

    my $app = App::Prove-&gt;new;
    $app-&gt;process_args(@ARGV);
    exit( $app-&gt;run ? 0 : 1 );  # if you need the exit code

</PRE>


<P>

<I></I>&quot;require_harness&quot;<I></I>
<A NAME="ixAAN"></A>
<P>

Load a harness replacement class.
<P>



<PRE>
  $prove-&gt;require_harness($for =&gt; $class_name);

</PRE>


<P>

<I></I>&quot;print_version&quot;<I></I>
<A NAME="ixAAO"></A>
<P>

Display the version numbers of the loaded TAP::Harness and the
current Perl.
<A NAME="lbAH">&nbsp;</A>
<H3>Attributes</H3>

<A NAME="ixAAP"></A>
After command line parsing the following attributes reflect the values
of the corresponding command line switches. They may be altered before
calling <TT>&quot;run&quot;</TT>.
<DL COMPACT>
<DT>archive<DD>


<A NAME="ixAAQ"></A>

<DT>argv<DD>


<A NAME="ixAAR"></A>
<DT>backwards<DD>


<A NAME="ixAAS"></A>
<DT>blib<DD>


<A NAME="ixAAT"></A>
<DT>color<DD>


<A NAME="ixAAU"></A>
<DT>directives<DD>


<A NAME="ixAAV"></A>
<DT>dry<DD>


<A NAME="ixAAW"></A>
<DT>exec<DD>


<A NAME="ixAAX"></A>
<DT>extension<DD>


<A NAME="ixAAY"></A>
<DT>failures<DD>


<A NAME="ixAAZ"></A>
<DT>comments<DD>


<A NAME="ixABA"></A>
<DT>formatter<DD>


<A NAME="ixABB"></A>
<DT>harness<DD>


<A NAME="ixABC"></A>
<DT>ignore_exit<DD>


<A NAME="ixABD"></A>
<DT>includes<DD>


<A NAME="ixABE"></A>
<DT>jobs<DD>


<A NAME="ixABF"></A>
<DT>lib<DD>


<A NAME="ixABG"></A>
<DT>merge<DD>


<A NAME="ixABH"></A>
<DT>modules<DD>


<A NAME="ixABI"></A>
<DT>parse<DD>


<A NAME="ixABJ"></A>
<DT>plugins<DD>


<A NAME="ixABK"></A>
<DT>quiet<DD>


<A NAME="ixABL"></A>
<DT>really_quiet<DD>


<A NAME="ixABM"></A>
<DT>recurse<DD>


<A NAME="ixABN"></A>
<DT>rules<DD>


<A NAME="ixABO"></A>
<DT>show_count<DD>


<A NAME="ixABP"></A>
<DT>show_help<DD>


<A NAME="ixABQ"></A>
<DT>show_man<DD>


<A NAME="ixABR"></A>
<DT>show_version<DD>


<A NAME="ixABS"></A>
<DT>shuffle<DD>


<A NAME="ixABT"></A>
<DT>state<DD>


<A NAME="ixABU"></A>
<DT>state_class<DD>


<A NAME="ixABV"></A>
<DT>taint_fail<DD>


<A NAME="ixABW"></A>
<DT>taint_warn<DD>


<A NAME="ixABX"></A>
<DT>test_args<DD>


<A NAME="ixABY"></A>
<DT>timer<DD>


<A NAME="ixABZ"></A>
<DT>verbose<DD>


<A NAME="ixACA"></A>
<DT>warnings_fail<DD>


<A NAME="ixACB"></A>
<DT>warnings_warn<DD>


<A NAME="ixACC"></A>

</DL>
<A NAME="lbAI">&nbsp;</A>
<H2>PLUGINS</H2>

<A NAME="ixACD"></A>
<TT>&quot;App::Prove&quot;</TT> provides support for 3rd-party plugins.  These are currently
loaded at run-time, <I>after</I> arguments have been parsed (so you can not
change the way arguments are processed, sorry), typically with the
<TT>&quot;-PI&lt;plugin&gt;&quot;</TT> switch, eg:
<P>



<PRE>
  prove -PMyPlugin

</PRE>


<P>

This will search for a module named <TT>&quot;App::Prove::Plugin::MyPlugin&quot;</TT>, or failing
that, <TT>&quot;MyPlugin&quot;</TT>.  If the plugin can't be found, <TT>&quot;prove&quot;</TT> will complain &amp; exit.
<P>

You can pass an argument to your plugin by appending an <TT>&quot;=&quot;</TT> after the plugin
name, eg <TT>&quot;-PMyPlugin=foo&quot;</TT>.  You can pass multiple arguments using commas:
<P>



<PRE>
  prove -PMyPlugin=foo,bar,baz

</PRE>


<P>

These are passed in to your plugin's <TT>&quot;load()&quot;</TT> class method (if it has one),
along with a reference to the <TT>&quot;App::Prove&quot;</TT> object that is invoking your plugin:
<P>



<PRE>
  sub load {
      my ($class, $p) = @_;

      my @args = @{ $p-&gt;{args} };
      # @args will contain ( 'foo', 'bar', 'baz' )
      $p-&gt;{app_prove}-&gt;do_something;
      ...
  }

</PRE>


<P>

Note that the user's arguments are also passed to your plugin's <TT>&quot;import()&quot;</TT>
function as a list, eg:
<P>



<PRE>
  sub import {
      my ($class, @args) = @_;
      # @args will contain ( 'foo', 'bar', 'baz' )
      ...
  }

</PRE>


<P>

This is for backwards compatibility, and may be deprecated in the future.
<A NAME="lbAJ">&nbsp;</A>
<H3>Sample Plugin</H3>

<A NAME="ixACE"></A>
Here's a sample plugin, for your reference:
<P>



<PRE>
  package App::Prove::Plugin::Foo;

  # Sample plugin, try running with:
  # prove -PFoo=bar -r -j3
  # prove -PFoo -Q
  # prove -PFoo=bar,My::Formatter

  use strict;
  use warnings;

  sub load {
      my ($class, $p) = @_;
      my @args = @{ $p-&gt;{args} };
      my $app  = $p-&gt;{app_prove};

      print &quot;loading plugin: $class, args: &quot;, join(', ', @args ), &quot;\n&quot;;

      # turn on verbosity
      $app-&gt;verbose( 1 );

      # set the formatter?
      $app-&gt;formatter( $args[1] ) if @args &gt; 1;

      # print some of App::Prove's state:
      for my $attr (qw( jobs quiet really_quiet recurse verbose )) {
          my $val = $app-&gt;$attr;
          $val    = 'undef' unless defined( $val );
          print &quot;$attr: $val\n&quot;;
      }

      return 1;
  }

  1;

</PRE>


<A NAME="lbAK">&nbsp;</A>
<H2>SEE ALSO</H2>

<A NAME="ixACF"></A>
prove, TAP::Harness
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">VERSION</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">SYNOPSIS</A><DD>
<DT><A HREF="#lbAF">METHODS</A><DD>
<DL>
<DT><A HREF="#lbAG">Class Methods</A><DD>
<DT><A HREF="#lbAH">Attributes</A><DD>
</DL>
<DT><A HREF="#lbAI">PLUGINS</A><DD>
<DL>
<DT><A HREF="#lbAJ">Sample Plugin</A><DD>
</DL>
<DT><A HREF="#lbAK">SEE ALSO</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/manpages/index.html">man2html</A>,
using the manual pages.<BR>
Time: 05:33:11 GMT, December 24, 2015
</div></div>
</body>
</HTML>
