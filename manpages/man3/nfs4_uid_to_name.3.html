<!DOCTYPE html>

<HTML><head><TITLE>Manpage of nfs4_uid_to_name</TITLE>
<meta charset="utf-8">
<link rel="stylesheet" href="/css/main.css" type="text/css">
</head>
<body>
 <header class="site-header">
 <div class="wrap"> <div class="site-title"><a href="/manpages/index.html">linux man pages</a></div>
 <div class="site-description">{"type":"programming"}</div>
 </div>
 </header>
 <div class="page-content">
<H1>nfs4_uid_to_name</H1>
Section: C Library Functions (3)<BR>Updated: 2004-08-05<BR><A HREF="#index">Index</A>
<A HREF="/manpages/index.html">Return to Main Contents</A><HR>

<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

nfs4_uid_to_name, nfs4_gid_to_name, nfs4_name_to_uid, nfs4_name_to_gid,
nfs4_init_name_mapping, nfs4_get_default_domain,
nfs4_gss_princ_to_ids, nfs4_gss_princ_to_grouplist,
nfs4_gss_princ_to_ids_ex,
nfs4_gss_princ_to_grouplist_ex,
nfs4_set_debug - ID mapping routines used for NFSv4
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<B>#include &lt;<A HREF="file:/usr/include/nfs4_idmap.h">nfs4_idmap.h</A>&gt;</B>

<P>
<B>int nfs4_init_name_mapping(char *conffile);</B>

<P>
<B>int nfs4_get_default_domain(char *server, char *domain, size_t len);</B>

<P>
<B>int nfs4_uid_to_name(uid_t uid, char *domain, char *name, size_t len);</B>

<P>
<B>int nfs4_uid_to_owner(uid_t uid, char *domain, char *name, size_t len);</B>

<P>
<B>int nfs4_gid_to_name(gid_t gid, char *domain, char *name, size_t len);</B>

<P>
<B>int nfs4_gid_to_owner(gid_t gid, char *domain, char *name, size_t len);</B>

<P>
<B>int nfs4_name_to_uid(char *name, uid_t *uid);</B>

<P>
<B>int nfs4_name_to_gid(char *name, gid_t *gid);</B>

<P>
<B>int nfs4_owner_to_uid(char *name, uid_t *uid);</B>

<P>
<B>int nfs4_owner_to_gid(char *name, gid_t *gid);</B>

<P>
<B>int nfs4_gss_princ_to_ids(char *secname, char *princ, uid_t *uid, gid_t *gid);</B>

<P>
<B>int nfs4_gss_princ_to_grouplist(char *secname, char *princ, gid_t *groups, int *ngroups);</B>

<P>
<B>int nfs4_gss_princ_to_ids_ex(char *secname, char *princ, uid_t *uid, gid_t *gid, extra_mapping_params **ex);</B>

<P>
<B>int nfs4_gss_princ_to_grouplist_ex(char *secname, char *princ, gid_t *groups, int *ngroups, extra_mapping_params **ex);</B>

<P>
<B>void nfs4_set_debug(int dbg_level, void (*logger)(const char *, ...));</B>

<P>

<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

NFSv4 uses names of the form
<I><A HREF="mailto:user@domain">user@domain</A></I>.

To write code that helps the kernel map uid's (as
rpc.idmapd
does) or that processes NFSv4 ACLs, you need to be able to convert between
NFSv4 names and local uids and gids.
<P>

The
<B>nfs4_uid_to_name()</B>

and
<B>nfs4_gid_to_name()</B>

functions, given
<I>uid </I>

or
<I>gid</I>

and 
<I>domain</I>

(as a null-terminated string),
write the corresponding nfsv4 name into the buffer provided in
<I>name</I>,

which must be of length at least
<I>len</I>.

<P>

The
<B>nfs4_uid_to_owner()</B>

and
<B>nfs4_gid_to_group_owner()</B>

functions, given
<I>uid</I>

or
<I>gid</I>

and
<I>domain</I>

(as a null-terminated string),
write the corresponding nfsv4 name into the buffer provided in
<I>name</I>,

which must be of length at least
<I>len</I>.

If there is no valid mapping from
<I>uid</I>

or
<I>gid</I>

to
<I>name</I>,

then the numerical string representing uid or gid is returned instead.
<P>

The 
<B>nfs4_name_to_uid()</B>

and
<B>nfs4_name_to_gid()</B>

functions, given
<I>name</I>

(as a null-terminated string), return the corresponding uid or gid in
the second parameter.
<P>

The 
<B>nfs4_owner_to_uid()</B>

and
<B>nfs4_group_owner_to_gid()</B>

functions, given
<I>name</I>

(as a null-terminated string), return the corresponding uid or gid in
the second parameter.
If there is no valid mapping from
<I>name</I>

to
<I>uid</I>

or
<I>gid</I>

the value for the user or group &quot;nobody&quot; will be returned instead.
<P>

The
<B>nfs4_init_name_mapping()</B>

function must be called before using any of these functions.  It reads
defaults from the configuration file at the provided path, usually
&quot;etc/idmapd.conf&quot;.
<P>

The
<I>domain</I>

argument to the id-to-name functions is there to provide a hint to the name
mapper in the case where an id might be mapped to names in multiple domains.
In most cases, this argument should just be the name returned in the
<I>domain</I>

argument to
<B>nfs4_get_default_domain()</B>

which should be called with
<I>server</I>

set to NULL.  The
<I>domain</I>

should be a buffer of length
<I>len</I>.

The constant NFS4_MAX_DOMAIN_LEN may be used to determine a reasonable
value for that length.
<P>

The function
<B>nfs4_get_grouplist()</B>,

given a
<I>name</I>,

fills the provided array
<I>groups</I>

with up to 
<I>*ngroups</I>

group IDs corresponding to which the user
<I>name</I>

belongs to, setting
<I>*ngroups</I>

to the actual number of such groups.  If the user belongs to more than
<I>*ngroups</I>

groups, then an error is returned and the actual number of groups is stored in
*ngroups.
<P>

Functions
<B>nfs4_gss_princ_to_ids()</B>,

<B>nfs4_gss_princ_to_grouplist()</B>,

<B>nfs4_gss_princ_to_ids_ex()</B>,

and
<B>nfs4_gss_princ_to_grouplist_ex()</B>

are used to convert from a gss principal name (as returned by
<B>gss_display_name()</B>)

to a uid and gid, or list of gids.
<P>

Finally,
<B>nfs4_set_debug()</B>

allows the application to set a debugging level to produce extra
debugging information from within the library.  The optional
<I>logger</I>

function specifies an alternative logging function to call for
the debug messages rather than the default internal function
within the library.
<A NAME="lbAE">&nbsp;</A>
<H2>RETURN VALUE</H2>

All functions return 0 or, in the case of error, -ERRNO.
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">RETURN VALUE</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/manpages/index.html">man2html</A>,
using the manual pages.<BR>
Time: 05:33:35 GMT, December 24, 2015
</div></body>
</HTML>
