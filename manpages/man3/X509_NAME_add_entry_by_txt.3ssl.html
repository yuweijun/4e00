<!DOCTYPE html>

<HTML><head><TITLE>Manpage of X509_NAME_add_entry_by_txt</TITLE>
<meta charset="utf-8">
<link rel="stylesheet" href="/css/main.css" type="text/css">
</head>
<body>
 <header class="site-header">
 <div class="wrap"> <div class="site-title"><a href="/manpages/index.html">linux manpages</a></div>
 <div class="site-description">{"type":"documentation"}</div>
 </div>
 </header>
 <div class="page-content"><div class="wrap">
<H1>X509_NAME_add_entry_by_txt</H1>
Section: OpenSSL (3)<BR>Updated: 2006-05-14<BR><A HREF="#index">Index</A>
<A HREF="/manpages/index.html">Return to Main Contents</A><HR>






<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

X509_NAME_add_entry_by_txt, X509_NAME_add_entry_by_OBJ, X509_NAME_add_entry_by_NID,
X509_NAME_add_entry, X509_NAME_delete_entry - X509_NAME modification functions
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<A NAME="ixAAC"></A>


<PRE>
 #include &lt;<A HREF="file:/usr/include/openssl/x509.h">openssl/x509.h</A>&gt;

 int X509_NAME_add_entry_by_txt(X509_NAME *name, const char *field, int type, const unsigned char *bytes, int len, int loc, int set);

 int X509_NAME_add_entry_by_OBJ(X509_NAME *name, ASN1_OBJECT *obj, int type, unsigned char *bytes, int len, int loc, int set);

 int X509_NAME_add_entry_by_NID(X509_NAME *name, int nid, int type, unsigned char *bytes, int len, int loc, int set);

 int X509_NAME_add_entry(X509_NAME *name,X509_NAME_ENTRY *ne, int loc, int set);

 X509_NAME_ENTRY *X509_NAME_delete_entry(X509_NAME *name, int loc);

</PRE>


<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

<A NAME="ixAAD"></A>
<I>X509_NAME_add_entry_by_txt()</I>, <I>X509_NAME_add_entry_by_OBJ()</I> and
<I>X509_NAME_add_entry_by_NID()</I> add a field whose name is defined
by a string <B>field</B>, an object <B>obj</B> or a <FONT SIZE="-1">NID</FONT> <B>nid</B> respectively.
The field value to be added is in <B>bytes</B> of length <B>len</B>. If
<B>len</B> is -1 then the field length is calculated internally using
strlen(bytes).
<P>

The type of field is determined by <B>type</B> which can either be a
definition of the type of <B>bytes</B> (such as <B></B><FONT SIZE="-1"><B>MBSTRING_ASC</B></FONT><B></B>) or a
standard <FONT SIZE="-1">ASN1</FONT> type (such as <B>V_ASN1_IA5STRING</B>). The new entry is
added to a position determined by <B>loc</B> and <B>set</B>.
<P>

<I>X509_NAME_add_entry()</I> adds a copy of <B>X509_NAME_ENTRY</B> structure <B>ne</B>
to <B>name</B>. The new entry is added to a position determined by <B>loc</B>
and <B>set</B>. Since a copy of <B>ne</B> is added <B>ne</B> must be freed up after
the call.
<P>

<I>X509_NAME_delete_entry()</I> deletes an entry from <B>name</B> at position
<B>loc</B>. The deleted entry is returned and must be freed up.
<A NAME="lbAE">&nbsp;</A>
<H2>NOTES</H2>

<A NAME="ixAAE"></A>
The use of string types such as <B></B><FONT SIZE="-1"><B>MBSTRING_ASC</B></FONT><B></B> or <B></B><FONT SIZE="-1"><B>MBSTRING_UTF8</B></FONT><B></B>
is strongly recommened for the <B>type</B> parameter. This allows the
internal code to correctly determine the type of the field and to
apply length checks according to the relevant standards. This is
done using <I>ASN1_STRING_set_by_NID()</I>.
<P>

If instead an <FONT SIZE="-1">ASN1</FONT> type is used no checks are performed and the
supplied data in <B>bytes</B> is used directly.
<P>

In <I>X509_NAME_add_entry_by_txt()</I> the <B>field</B> string represents
the field name using OBJ_txt2obj(field, 0).
<P>

The <B>loc</B> and <B>set</B> parameters determine where a new entry should
be added. For almost all applications <B>loc</B> can be set to -1 and <B>set</B>
to 0. This adds a new entry to the end of <B>name</B> as a single valued
RelativeDistinguishedName (<FONT SIZE="-1">RDN</FONT>).
<P>

<B>loc</B> actually determines the index where the new entry is inserted:
if it is -1 it is appended.
<P>

<B>set</B> determines how the new type is added. If it is zero a
new <FONT SIZE="-1">RDN</FONT> is created.
<P>

If <B>set</B> is -1 or 1 it is added to the previous or next <FONT SIZE="-1">RDN</FONT>
structure respectively. This will then be a multivalued <FONT SIZE="-1">RDN:</FONT>
since multivalues RDNs are very seldom used <B>set</B> is almost
always set to zero.
<A NAME="lbAF">&nbsp;</A>
<H2>EXAMPLES</H2>

<A NAME="ixAAF"></A>
Create an <B>X509_NAME</B> structure:
<P>

``C=UK, O=Disorganized Organization, CN=Joe Bloggs''
<P>



<PRE>
 X509_NAME *nm;
 nm = X509_NAME_new();
 if (nm == NULL)
        /* Some error */
 if (!X509_NAME_add_entry_by_txt(nm, MBSTRING_ASC,
                        &quot;C&quot;, &quot;UK&quot;, -1, -1, 0))
        /* Error */
 if (!X509_NAME_add_entry_by_txt(nm, MBSTRING_ASC,
                        &quot;O&quot;, &quot;Disorganized Organization&quot;, -1, -1, 0))
        /* Error */
 if (!X509_NAME_add_entry_by_txt(nm, MBSTRING_ASC,
                        &quot;CN&quot;, &quot;Joe Bloggs&quot;, -1, -1, 0))
        /* Error */

</PRE>


<A NAME="lbAG">&nbsp;</A>
<H2>RETURN VALUES</H2>

<A NAME="ixAAG"></A>
<I>X509_NAME_add_entry_by_txt()</I>, <I>X509_NAME_add_entry_by_OBJ()</I>,
<I>X509_NAME_add_entry_by_NID()</I> and <I>X509_NAME_add_entry()</I> return 1 for
success of 0 if an error occurred.
<P>

<I>X509_NAME_delete_entry()</I> returns either the deleted <B>X509_NAME_ENTRY</B>
structure of <B></B><FONT SIZE="-1"><B>NULL</B></FONT><B></B> if an error occurred.
<A NAME="lbAH">&nbsp;</A>
<H2>BUGS</H2>

<A NAME="ixAAH"></A>
<B>type</B> can still be set to <B>V_ASN1_APP_CHOOSE</B> to use a
different algorithm to determine field types. Since this form does
not understand multicharacter types, performs no length checks and
can result in invalid field types its use is strongly discouraged.
<A NAME="lbAI">&nbsp;</A>
<H2>SEE ALSO</H2>

<A NAME="ixAAI"></A>
<I><A HREF="/manpages/index.html?3+ERR_get_error">ERR_get_error</A></I>(3), <I><A HREF="http://localhost/cgi-bin/man/man2html?3+d2i_X509_NAME">d2i_X509_NAME</A></I>(3)
<A NAME="lbAJ">&nbsp;</A>
<H2>HISTORY</H2>

<A NAME="ixAAJ"></A>
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">NOTES</A><DD>
<DT><A HREF="#lbAF">EXAMPLES</A><DD>
<DT><A HREF="#lbAG">RETURN VALUES</A><DD>
<DT><A HREF="#lbAH">BUGS</A><DD>
<DT><A HREF="#lbAI">SEE ALSO</A><DD>
<DT><A HREF="#lbAJ">HISTORY</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/manpages/index.html">man2html</A>,
using the manual pages.<BR>
Time: 05:33:45 GMT, December 24, 2015
</div></div>
</body>
</HTML>
