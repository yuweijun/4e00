<!DOCTYPE html>

<HTML><head><TITLE>Manpage of KEYCTL_READ</TITLE>
<meta charset="utf-8">
<link rel="stylesheet" href="/css/main.css" type="text/css">
</head>
<body>
 <header class="site-header">
 <div class="wrap"> <div class="site-title"><a href="/manpages/index.html">linux manpages</a></div>
 <div class="site-description">{"type":"programming"}</div>
 </div>
 </header>
 <div class="page-content">
<H1>KEYCTL_READ</H1>
Section: Linux Key Management Calls (3)<BR>Updated: 4 May 2006<BR><A HREF="#index">Index</A>
<A HREF="/manpages/index.html">Return to Main Contents</A><HR>


<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

keyctl_read - Read a key

<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<PRE>
<B>#include &lt;<A HREF="file:/usr/include/keyutils.h">keyutils.h</A>&gt;</B>

<B>long keyctl_read(key_serial_t </B><I>key</I><B>, char *</B><I>buffer</I><B>,</B>
<B>size_t</B><I>buflen</I><B>);</B>

<B>long keyctl_read_alloc(key_serial_t </B><I>key</I><B>, char **</B><I>_buffer</I><B>);</B>
</PRE><A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

<B>keyctl_read</B>()

reads the payload of a key if the key type supports it.

The caller must have
<B>read</B>

permission on a key to be able to read it.

<I>buffer</I>

and
<I>buflen</I>

specify the buffer into which the payload data will be placed.  If the buffer
is too small, the full size of the payload will be returned, and no copy will
take place.

<B>keyctl_read_alloc</B>()

is similar to
<B>keyctl_read</B>()

except that it allocates a buffer big enough to hold the payload data and
places the data in it.  If successful, A pointer to the buffer is placed in
<I>*_buffer</I>.

The caller must free the buffer.

<A NAME="lbAE">&nbsp;</A>
<H2>READING KEYRINGS</H2>

This call can be used to list the contents of a keyring.  The data is
presented to the user as an array of
<B>key_serial_t</B>

values, each of which corresponds to a key to which the keyring holds a link.

The size of the keyring will be sizeof(key_serial_t) multiplied by the number
of keys.  The size of key_serial_t is invariant across different word sizes,
though the byte-ordering is as appropriate for the kernel.

<A NAME="lbAF">&nbsp;</A>
<H2>RETURN VALUE</H2>

On success
<B>keyctl_read</B>()

returns the amount of data placed into the buffer.  If the buffer was too
small, then the size of buffer required will be returned, but no data will be
transferred.  On error, the value
<B>-1</B>

will be returned and errno will have been set to an appropriate error.

On success
<B>keyctl_read_alloc</B>()

returns the amount of data in the buffer.  On error, the value
<B>-1</B>

will be returned and errno will have been set to an appropriate error.

<A NAME="lbAG">&nbsp;</A>
<H2>ERRORS</H2>

<DL COMPACT>
<DT><B>ENOKEY</B>

<DD>
The key specified is invalid.
<DT><B>EKEYEXPIRED</B>

<DD>
The key specified has expired.
<DT><B>EKEYREVOKED</B>

<DD>
The key specified had been revoked.
<DT><B>EACCES</B>

<DD>
The key exists, but is not
<B>readable</B>

by the calling process.
<DT><B>EOPNOTSUPP</B>

<DD>
The key type does not support reading of the payload data.

</DL>
<A NAME="lbAH">&nbsp;</A>
<H2>LINKING</H2>

This is a library function that can be found in
<I>libkeyutils</I>.

When linking,
<B>-lkeyutils</B>

should be specified to the linker.

<A NAME="lbAI">&nbsp;</A>
<H2>SEE ALSO</H2>

<B><A HREF="/manpages/index.html?1+keyctl">keyctl</A></B>(1),

<BR>

<B><A HREF="/manpages/index.html?2+add_key">add_key</A></B>(2),

<BR>

<B><A HREF="/manpages/index.html?2+keyctl">keyctl</A></B>(2),

<BR>

<B><A HREF="/manpages/index.html?2+request_key">request_key</A></B>(2),

<BR>

<B><A HREF="/manpages/index.html?3+keyctl">keyctl</A></B>(3),

<BR>

<B><A HREF="/manpages/index.html?8+request-key">request-key</A></B>(8)

<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">READING KEYRINGS</A><DD>
<DT><A HREF="#lbAF">RETURN VALUE</A><DD>
<DT><A HREF="#lbAG">ERRORS</A><DD>
<DT><A HREF="#lbAH">LINKING</A><DD>
<DT><A HREF="#lbAI">SEE ALSO</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/manpages/index.html">man2html</A>,
using the manual pages.<BR>
Time: 05:33:30 GMT, December 24, 2015
</div></body>
</HTML>
