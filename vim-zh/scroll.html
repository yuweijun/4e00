<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>vim中文手册</title>
    <meta name="description" content="vim7.4中文帮助文档">
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="vim.css" type="text/css">
</head>
<body>
    <header class="site-header">
        <div class="wrap">
            <div class="site-title"><a href="/vim-zh/usr_toc.html">Vim中文手册</a></div>
            <div class="site-description">{"type":"programming"}</div>
        </div>
    </header>
    <div class="page-content"><div class="wrap">
        <h2 class="vim-chapter">Vim documentation: scroll</h2>
        <div class="vim-document">
            <div class="pre">
*<span id="scroll.txt" class="anchor">scroll.txt</span>*    For Vim version 7.4.  最近更新: 2010年7月

                     Vim 参考手册    作者: Bram Moolenaar
           译者: iCrazy &lt;icrazy@ustc.edu&gt;，tocer  http://vimcdoc.sf.net

滚屏                                            *<span id="scrolling" class="anchor">scrolling</span>*

这些命令是用来移动窗口中的内容的。如果光标的位置移出了窗口，那么它会带动窗口的
内容移动几行 (行数由 'scrolloff' 选项指定)，使光标回到窗口里。这里，我们定义一
页为窗口的行数减 2。下面这些命令的助记符甚易混淆。请记住这些命令所指的是视窗
(缓冲区中您可以看到的那一部分) 在缓冲区里向上移动还是向下移动。当窗口在缓冲区
里向上移动的时候，窗口中的文字朝您屏幕的下方移动。

请参阅用户手册的第 |<a href="usr_03.html#03.7">03.7</a>| 节，那里有一些介绍。

1. 向下滚屏                     |<a href="scroll.html#scroll-down">scroll-down</a>|
2. 向上滚屏                     |<a href="scroll.html#scroll-up">scroll-up</a>|
3. 相对于光标滚屏               |<a href="scroll.html#scroll-cursor">scroll-cursor</a>|
4. 水平滚动                     |<a href="scroll.html#scroll-horizontal">scroll-horizontal</a>|
5. 同步滚屏                     |<a href="scroll.html#scroll-binding">scroll-binding</a>|
6. 用鼠标滚轮滚屏               |<a href="scroll.html#scroll-mouse-wheel">scroll-mouse-wheel</a>|

</div>

<hr class="doubleline" />
<div class="pre">
1. 向下滚屏                                     *<span id="scroll-down" class="anchor">scroll-down</span>*

下面的这些命令使编辑视窗 (缓冲区中您可以看到的那一部分) 向下移动 (这样您就可以
看到缓冲区更多下方的文本行):

                                                        *<span id="CTRL-E" class="anchor">CTRL-E</span>*
CTRL-E                  使窗口在缓冲区中向下滚动 [count] 行。
                        助记: 额外 (Extra) 的行。

                                                        *<span id="CTRL-D" class="anchor">CTRL-D</span>*
CTRL-D                  使窗口在缓冲区中向下滚动。滚动的行数由 'scroll' 选项指
                        定 (默认设置为半个屏幕)。如果指定了 [count]，则会先把
                        'scroll' 选项设为 [count]。同时，光标试图在文件中向下
                        移动相同的行数 (有行回绕或者碰到文件结束时行数会有差
                        异) 。当光标处于缓冲区最后一行时，这个命令无效，并且系
                        统会发出一声蜂鸣。
                        参看 'startofline' 选项。
                        助记: Downwards。
                        {Vi: Vim 滚动 'scroll' 屏幕行，而不是文件行；有行回绕
                        时两者会有差异}

&lt;S-Down&gt;        或                              *&lt;S-Down&gt;* *&lt;kPageDown&gt;*
&lt;PageDown&gt;      或                              *&lt;PageDown&gt;* *<span id="CTRL-F" class="anchor">CTRL-F</span>*
CTRL-F                  使窗口在缓冲区中向下滚动 [count] 页。
                        参看 'startofline' 选项。
                        如果只有一个窗口，可能使用 'window' 选项的值。
                        助记: Forwards。

                                                        *z+*
z+                      不指定 [count]: 重绘，在窗口中显示下一页的内容 (使当前
                        窗口之下的一行显示在窗口最上方)。同时把光标放在那一行
                        第一个非空白字符上。
                        指定 [count]: 和 "z&lt;CR&gt;" 一样。

</div>

<hr class="doubleline" />
<div class="pre">
2. 向上滚屏                                     *<span id="scroll-up" class="anchor">scroll-up</span>*

下面的这些命令使编辑视窗 (缓冲区中您可以看到的那一部分) 向上移动 (这样您就可以
看到缓冲区更多上方的文本行):

                                                        *<span id="CTRL-Y" class="anchor">CTRL-Y</span>*
CTRL-Y                  使窗口在缓冲区中向上滚动 [count] 行。
                        备注: 如果您使用 MS-Windows，组合键 CTRL-Y 会被重新映
                        射为重做功能。

                                                        *<span id="CTRL-U" class="anchor">CTRL-U</span>*
CTRL-U                  使窗口在缓冲区中向上滚动。滚动的行数由 'scroll' 选项指
                        定 (默认设置为半个屏幕)。如果指定了 [count]，则会先把
                        'scroll' 选项设为 [count]。同时，光标试图在文件中向上
                        移动相同的行数 (有行回绕或者碰到文件结束时 (译者注: 当
                        为文件开始之误) 行数会有差异) 。当光标处于缓冲区第一行
                        时，这个命令无效，并且系统会发出一声蜂鸣。
                        参看 'startofline' 选项。
                        助记: Upwards。
                        {Vi: Vim 滚动 'scroll' 屏幕行，而不是文件行；有行回绕
                        时两者会有差异}

&lt;S-Up&gt;          或                                      *&lt;S-Up&gt;* *&lt;kPageUp&gt;*
&lt;PageUp&gt;        或                                      *&lt;PageUp&gt;* *<span id="CTRL-B" class="anchor">CTRL-B</span>*
CTRL-B                  使窗口在缓冲区中向上滚动 [count] 页。
                        参看 'startofline' 选项。
                        如果只有一个窗口，可能使用 'window' 选项的值。
                        助记: Backwards。

                                                        *z^*
z^                      不指定 [count]: 重绘，在窗口中显示上一页的内容 (使当前
                        窗口之上的一行显示在窗口最下方)。同时把光标放在那一行
                        第一个非空白字符上。
                        指定 [count]: 先滚动文本，使得缓冲区第 [count] 行显示
                        在窗口底部，然后重绘，使得当时处于窗口顶端的文本显示在
                        窗口的底部。同时把光标放在那一行第一个非空白字符上。

</div>

<hr class="doubleline" />
<div class="pre">
3. 相对于光标滚屏                               *<span id="scroll-cursor" class="anchor">scroll-cursor</span>*

以下的命令重新定位编辑视窗 (缓冲区中您可以看到的那一部分)，但仍维持光标留在当
前行。

                                                        *z&lt;CR&gt;*
z&lt;CR&gt;                   重绘，使第 [count] 行显示在窗口顶端 (默认为光标所在的
                        行)。光标停留在那一行第一个非空白字符上。

                                                        *<span id="zt" class="anchor">zt</span>*
zt                      类似 "z&lt;CR&gt;"，不过光标停留在相同的列上。{Vi 无此功能}

                                                        *zN&lt;CR&gt;*
z{height}&lt;CR&gt;           重绘，使得窗口有 {height} 行高。当屏幕刷新速度很慢的时
                        候，这对减少行数很有用。不能使窗口的高度超过屏幕的实际
                        高度。

                                                        *<span id="z." class="anchor">z.</span>*
z.                      重绘，使第 [count] 行显示在窗口中部 (默认为光标所在的
                        行)。光标停留在那一行第一个非空白字符上。

                                                        *<span id="zz" class="anchor">zz</span>*
zz                      类似 "z."，不过光标停留在相同的列上。注意: 如果打开了
                        caps-lock，这个命令就变成了 "ZZ": 写缓冲区并退出！
                        {Vi 无此功能}

                                                        *<span id="z-" class="anchor">z-</span>*
z-                      重绘，使第 [count] 行显示在窗口底部 (默认为光标所在的
                        行)。光标停留在那一行第一个非空白字符上。

                                                        *<span id="zb" class="anchor">zb</span>*
zb                      类似 "z-"，不过光标停留在相同的列上。{Vi 无此功能}

</div>

<hr class="doubleline" />
<div class="pre">
4. 水平滚动                             *<span id="scroll-horizontal" class="anchor">scroll-horizontal</span>*

使用以下四个命令时，鼠标会跟随屏幕而移动。如果光标移出了屏幕，它就会落在屏幕中
距它最近的那个字符上。忽略 'sidescroll' 选项的值。

z&lt;Right&gt;    或                                          *<span id="zl" class="anchor">zl</span>* *z&lt;Right&gt;*
zl                      使文本视图向右移动 [count] 个字符，也就是使文本向左滚
                        动 [count] 个字符。仅当 'wrap' 为关时有效。
                        {Vi 无此功能}

z&lt;Left&gt;      或                                         *<span id="zh" class="anchor">zh</span>* *z&lt;Left&gt;*
zh                      使文本视图向左移动 [count] 个字符，也就是使文本向右滚
                        动 [count] 个字符。仅当 'wrap' 为关时有效。
                        {Vi 无此功能}

                                                        *<span id="zL" class="anchor">zL</span>*
zL                      使文本视图向右移动半个屏幕宽度，也就是使文本向左滚动半
                        个屏幕宽度。仅当 'wrap' 为关时有效。{Vi 无此功能}

                                                        *<span id="zH" class="anchor">zH</span>*
zH                      使文本视图向左移动半个屏幕宽度，也就是使文本向右滚动半
                        个屏幕宽度。仅当 'wrap' 为关时有效。{Vi 无此功能}

以下两个命令仅仅在屏幕上滚动文本，光标不会移动。

                                                        *<span id="zs" class="anchor">zs</span>*
zs                      水平滚动文本，使光标置于屏幕的开始处 (最左侧)。仅当
                        'wrap' 为关时有效。{Vi 无此功能}

                                                        *<span id="ze" class="anchor">ze</span>*
ze                      水平滚动文本，使光标置于屏幕的结束处 (最右侧)。仅当
                        'wrap' 为关时有效。{Vi 无此功能}

</div>

<hr class="doubleline" />
<div class="pre">
5. 同步滚屏                             *<span id="scroll-binding" class="anchor">scroll-binding</span>*

有时候，我们希望将两个或多个窗口绑在一起，这样，在一个窗口滚屏时，其他的窗口都
会跟着一起滚屏。在 Vim 中，可以通过设置针对不同窗口的 'scrollbind' 选项来达到
这个目的。当一个置位 'scrollbind' 选项的窗口滚屏时，其它置位 'scrollbind' 选项
的窗口会同步滚屏 (如果可能的话)。选项 'scrollbind' 的行为通过 'scrollopt' 选项
可以修改。

使用滚动条时进行滚动时，只有带焦点的窗口 (光标所在的窗口) 才会执行绑定。因而，
不用复位选项，您也可以在一段时间内避免滚动绑定的发生。

如果一个窗口还置位了 'diff' 选项，则滚屏绑定利用 2 个缓冲区中的差异来精确同步
它们的位置。否则，将会使用下面的方式:

                                                        *<span id="scrollbind-relative" class="anchor">scrollbind-relative</span>*
每一个置位了 'scrollbind' 的窗口都会记录它的 "相对偏移"，可以把它看作当前窗口
和另一个窗口垂直滚屏位置上的差异。当一个置位了 'scrollbind' 的窗口被要求进行超
越其文本的开始和结束极限的滚屏时，这个窗口不再继续滚屏，但是它会记住超过极限的
数量。窗口记住了这些信息是为了将来能维持同样的相对偏移，不管是否曾经被要求过进
行超过其极限的滚屏。

但是，当一个置位了 'scrollbind' 且具有一个超过其缓冲区极限的相对偏移的窗口获得
了光标焦点的时候，其他置位了 'scrollbind' 的窗口就必须根据当前窗口的相对偏移，
跳转到相应的位置。这种行为可以通过清除 'scrollopt' 选项中的 'jump' 标志位来改
变。

                                                *<span id="syncbind" class="anchor">syncbind</span>* *:syncbind* *:sync*<code class="help">
:syncbind</code>               强制所有 'scrollbind' 窗口具有相同的相对偏移。即: 当
                        一个窗口滚屏到了它缓冲区的顶部时，所有的 'scrollbind'
                        窗口都会滚屏到它们缓冲区的顶部。

                                                        *<span id="scrollbind-quickadj" class="anchor">scrollbind-quickadj</span>*
当使用键盘命令来垂直的滚动一个窗口，或用垂直滚动条来滚动一个具有光标焦点的窗口
时， 'scrollbind' 标志是起作用的。但是，当用垂直滚动条来滚动一个不具有光标焦点
的窗口时，'scrollbind' 标志被忽略。这样就可以对 'scrollbind' 窗口的相对偏移量
进行快速的调整。

</div>

<hr class="doubleline" />
<div class="pre">
6. 用鼠标滚轮滚屏                               *<span id="scroll-mouse-wheel" class="anchor">scroll-mouse-wheel</span>*

当您的鼠标有一个滚轮时，它在 GUI 方式下的 Vim 中应该可以正常工作。它怎么工作取
决于您的系统。它在 xterm 中也可能可以工作，参见: |<a href="scroll.html#xterm-mouse-wheel">xterm-mouse-wheel</a>|。缺省只支
持垂直滚轮，但有些 GUI 也支持横向滚轮。

Win32 GUI 的滚动功能是通过硬编码实现的。它的效果就像在拖曳当前窗口的滚动条。具
体滚多少行取决于您的鼠标驱动程序。如果滚屏功能造成了输入焦点的问题，请看:
|<a href="gui_w32.html#intellimouse-wheel-problems">intellimouse-wheel-problems</a>|。

而对 X11 GUI (Motif、Athena 和 GTK) 而言，滚动滚轮产生 &lt;ScrollWheelDown&gt;、
&lt;ScrollWheelUp&gt;、&lt;ScrollWheelLeft&gt; 和 &lt;ScrollWheelRight&gt; 的按键动作。这些键的
默认行为如下:
    &lt;ScrollWheelUp&gt;         向上滚动三行        *&lt;ScrollWheelUp&gt;*
    &lt;S-ScrollWheelUp&gt;       向上滚动一页        *&lt;S-ScrollWheelUp&gt;*
    &lt;C-ScrollWheelUp&gt;       向上滚动一页        *&lt;C-ScrollWheelUp&gt;*
    &lt;ScrollWheelDown&gt;       向下滚动三行        *&lt;ScrollWheelDown&gt;*
    &lt;S-ScrollWheelDown&gt;     向下滚动一页        *&lt;S-ScrollWheelDown&gt;*
    &lt;C-ScrollWheelDown&gt;     向下滚动一页        *&lt;C-ScrollWheelDown&gt;*
    &lt;ScrollWheelLeft&gt;       向左滚动六列        *&lt;ScrollWheelLeft&gt;*
    &lt;S-ScrollWheelLeft&gt;     向左滚动一页        *&lt;S-ScrollWheelLeft&gt;*
    &lt;C-ScrollWheelLeft&gt;     向左滚动一页        *&lt;C-ScrollWheelLeft&gt;*
    &lt;ScrollWheelRight&gt;      向右滚动六列        *&lt;ScrollWheelRight&gt;*
    &lt;S-ScrollWheelRight&gt;    向右滚动一页        *&lt;S-ScrollWheelRight&gt;*
    &lt;C-ScrollWheelRight&gt;    向右滚动一页        *&lt;C-ScrollWheelRight&gt;*
它们应该适用于所有模式，编辑命令行时除外。

注意 仅当 'nowrap' 置位时横向滚动可用。此外，除非 'guioptions' 设置了 "h" 标志
位，如果光标行将要滚动到屏幕之外，移动光标到最长的可见行 (和横向滚动条的工作方
式类似)。

您可以通过键盘映射来改变缺省行为。例如，要使得普通模式下滚轮一次滚动一行或半
页:<code class="help">

   :map</code> &lt;ScrollWheelUp&gt; &lt;C-Y&gt;<code class="help">
   :map</code> &lt;S-ScrollWheelUp&gt; &lt;C-U&gt;<code class="help">
   :map</code> &lt;ScrollWheelDown&gt; &lt;C-E&gt;<code class="help">
   :map</code> &lt;S-ScrollWheelDown&gt; &lt;C-D&gt;
您也可以使用 Alt 和 Ctrl 修饰符。

自然，这些功能仅在 Vim 可以获取滚动事件时才可以使用。您可以使用 "xev" 程序来确
定这些是否功能有效。

当您使用 XFree86 时，文件 /etc/XF86Config 中必须有匹配您使用的鼠标的正确条目。
就 FreeBSD 来说，这个条目适用于一款罗技滚轮鼠标:

    Protocol     "MouseMan"
    Device       "/dev/psm0"
    ZAxisMapping 4 5
欲了解更多的信息，请看 XFree86 的文档。

                                                *&lt;MouseDown&gt;* *&lt;MouseUp&gt;*
&lt;MouseDown&gt; 和 &lt;MouseUp&gt; 键已废弃。用 &lt;ScrollWheelUp&gt; 来代替 &lt;MouseDown&gt;，
&lt;ScrollWheelDown&gt; 来代替 &lt;MouseUp&gt;。

                                                        *<span id="xterm-mouse-wheel" class="anchor">xterm-mouse-wheel</span>*
如前所述，您仅需要使滚轮鼠标在您的 Xserver 上工作正常，它就可以在一个新的
xterm 中工作。

为了在一个老的 xterm 中使用您的滚轮，您需要做以下工作:
1. 如前所述，使它在您的 Xserver 上工作正常。
2. 给 xterm 添加转换，使得 xterm 可以用转义序列 (escape sequence) 来传递一个滚
   屏事件。
3. 给 Vim 添加映射，来把这些转义序列解释为 &lt;ScrollWheelDown&gt;、&lt;ScrollWheelUp&gt;
   键。

把以下代码添加到您的 ~.Xdefaults 文件 (或者其他保存您 X 资源的文件) 中来进行转
换:

  XTerm*VT100.Translations:             #override \n\
                s&lt;Btn4Down&gt;: string("0x9b") string("[64~") \n\
                s&lt;Btn5Down&gt;: string("0x9b") string("[65~") \n\
                &lt;Btn4Down&gt;: string("0x9b") string("[62~") \n\
                &lt;Btn5Down&gt;: string("0x9b") string("[63~") \n\
                &lt;Btn4Up&gt;: \n\
                &lt;Btn5Up&gt;:

把这些映射加到您的<code class="vim"> vimrc </code>文件:<code class="help">

        :map</code> &lt;M-Esc&gt;[62~ &lt;ScrollWheelUp&gt;<code class="help">
        :map!</code> &lt;M-Esc&gt;[62~ &lt;ScrollWheelUp&gt;<code class="help">
        :map</code> &lt;M-Esc&gt;[63~ &lt;ScrollWheelDown&gt;<code class="help">
        :map!</code> &lt;M-Esc&gt;[63~ &lt;ScrollWheelDown&gt;<code class="help">
        :map</code> &lt;M-Esc&gt;[64~ &lt;S-ScrollWheelUp&gt;<code class="help">
        :map!</code> &lt;M-Esc&gt;[64~ &lt;S-ScrollWheelUp&gt;<code class="help">
        :map</code> &lt;M-Esc&gt;[65~ &lt;S-ScrollWheelDown&gt;<code class="help">
        :map!</code> &lt;M-Esc&gt;[65~ &lt;S-ScrollWheelDown&gt;

 vim:tw=78:ts=8:ft=help:norl:

            </div>
        </div>
    </div>
    </div>
<footer class="site-footer">
        <div class="wrap">
            <div class="footer-content">
              <i>Generated by vim2html.rb on </i>
              <a href="http://www.4e00.com/vim-zh/usr_toc.html">www.4e00.com</a>
            </div>
        </div>
    </footer>
</body>
</html>
