<!DOCTYPE html>

<HTML><head><TITLE>Manpage of RAND_egd</TITLE>
<meta charset="utf-8">
<link rel="stylesheet" href="/css/main.css" type="text/css">
</head>
<body>
 <header class="site-header">
 <div class="wrap"> <div class="site-title"><a href="/man/index.html">linux man pages</a></div>
 <div class="site-description">{"type":"programming"}</div>
 </div>
 </header>
 <div class="page-content">
<H1>RAND_egd</H1>
Section: OpenSSL (3)<BR>Updated: 2008-11-10<BR><A HREF="#index">Index</A>
<A HREF="/man/index.html">Return to Main Contents</A><HR>






<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

RAND_egd - query entropy gathering daemon
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<A NAME="ixAAC"></A>


<PRE>
 #include &lt;<A HREF="file:/usr/include/openssl/rand.h">openssl/rand.h</A>&gt;

 int RAND_egd(const char *path);
 int RAND_egd_bytes(const char *path, int bytes);

 int RAND_query_egd_bytes(const char *path, unsigned char *buf, int bytes);

</PRE>


<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

<A NAME="ixAAD"></A>
<I>RAND_egd()</I> queries the entropy gathering daemon <FONT SIZE="-1">EGD</FONT> on socket <B>path</B>.
It queries 255 bytes and uses <I><A HREF="/man/index.html?3+RAND_add">RAND_add</A></I>(3) to seed the
OpenSSL built-in <FONT SIZE="-1">PRNG</FONT>. RAND_egd(path) is a wrapper for
RAND_egd_bytes(path, 255);
<P>

<I>RAND_egd_bytes()</I> queries the entropy gathering daemon <FONT SIZE="-1">EGD</FONT> on socket <B>path</B>.
It queries <B>bytes</B> bytes and uses <I><A HREF="/man/index.html?3+RAND_add">RAND_add</A></I>(3) to seed the
OpenSSL built-in <FONT SIZE="-1">PRNG</FONT>.
This function is more flexible than <I>RAND_egd()</I>.
When only one secret key must
be generated, it is not necessary to request the full amount 255 bytes from
the <FONT SIZE="-1">EGD</FONT> socket. This can be advantageous, since the amount of entropy
that can be retrieved from <FONT SIZE="-1">EGD</FONT> over time is limited.
<P>

<I>RAND_query_egd_bytes()</I> performs the actual query of the <FONT SIZE="-1">EGD</FONT> daemon on socket
<B>path</B>. If <B>buf</B> is given, <B>bytes</B> bytes are queried and written into
<B>buf</B>. If <B>buf</B> is <FONT SIZE="-1">NULL</FONT>, <B>bytes</B> bytes are queried and used to seed the
OpenSSL built-in <FONT SIZE="-1">PRNG</FONT> using <I><A HREF="/man/index.html?3+RAND_add">RAND_add</A></I>(3).
<A NAME="lbAE">&nbsp;</A>
<H2>NOTES</H2>

<A NAME="ixAAE"></A>
On systems without /dev/*random devices providing entropy from the kernel,
the <FONT SIZE="-1">EGD</FONT> entropy gathering daemon can be used to collect entropy. It provides
a socket interface through which entropy can be gathered in chunks up to
255 bytes. Several chunks can be queried during one connection.
<P>

<FONT SIZE="-1">EGD</FONT> is available from <A HREF="http://www.lothar.com/tech/crypto/">http://www.lothar.com/tech/crypto/</A> (<TT>&quot;perl
Makefile.PL; make; make install&quot;</TT> to install). It is run as <B>egd</B>
<I>path</I>, where <I>path</I> is an absolute path designating a socket. When
<I>RAND_egd()</I> is called with that path as an argument, it tries to read
random bytes that <FONT SIZE="-1">EGD</FONT> has collected. <I>RAND_egd()</I> retrieves entropy from the
daemon using the daemon's ``non-blocking read'' command which shall
be answered immediately by the daemon without waiting for additional
entropy to be collected. The write and read socket operations in the
communication are blocking.
<P>

Alternatively, the EGD-interface compatible daemon <FONT SIZE="-1">PRNGD</FONT> can be used. It is
available from
<A HREF="http://prngd.sourceforge.net/">http://prngd.sourceforge.net/</A> .
<FONT SIZE="-1">PRNGD</FONT> does employ an internal <FONT SIZE="-1">PRNG</FONT> itself and can therefore never run
out of entropy.
<P>

OpenSSL automatically queries <FONT SIZE="-1">EGD</FONT> when entropy is requested via <I>RAND_bytes()</I>
or the status is checked via <I>RAND_status()</I> for the first time, if the socket
is located at /var/run/egd-pool, /dev/egd-pool or /etc/egd-pool.
<A NAME="lbAF">&nbsp;</A>
<H2>RETURN VALUE</H2>

<A NAME="ixAAF"></A>
<I>RAND_egd()</I> and <I>RAND_egd_bytes()</I> return the number of bytes read from the
daemon on success, and -1 if the connection failed or the daemon did not
return enough data to fully seed the <FONT SIZE="-1">PRNG</FONT>.
<P>

<I>RAND_query_egd_bytes()</I> returns the number of bytes read from the daemon on
success, and -1 if the connection failed. The <FONT SIZE="-1">PRNG</FONT> state is not considered.
<A NAME="lbAG">&nbsp;</A>
<H2>SEE ALSO</H2>

<A NAME="ixAAG"></A>
<I><A HREF="/man/index.html?3+rand">rand</A></I>(3), <I><A HREF="http://localhost/cgi-bin/man/man2html?3+RAND_add">RAND_add</A></I>(3),
<I><A HREF="/man/index.html?3+RAND_cleanup">RAND_cleanup</A></I>(3)
<A NAME="lbAH">&nbsp;</A>
<H2>HISTORY</H2>

<A NAME="ixAAH"></A>
<I>RAND_egd()</I> is available since OpenSSL 0.9.5.
<P>

<I>RAND_egd_bytes()</I> is available since OpenSSL 0.9.6.
<P>

<I>RAND_query_egd_bytes()</I> is available since OpenSSL 0.9.7.
<P>

The automatic query of /var/run/egd-pool et al was added in OpenSSL 0.9.7.
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">NOTES</A><DD>
<DT><A HREF="#lbAF">RETURN VALUE</A><DD>
<DT><A HREF="#lbAG">SEE ALSO</A><DD>
<DT><A HREF="#lbAH">HISTORY</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/man/index.html">man2html</A>,
using the manual pages.<BR>
Time: 05:33:37 GMT, December 24, 2015
</div></body>
</HTML>
