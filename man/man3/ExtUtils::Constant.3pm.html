<!DOCTYPE html>

<HTML><head><TITLE>Manpage of ExtUtils::Constant</TITLE>
<meta charset="utf-8">
<link rel="stylesheet" href="/css/main.css" type="text/css">
</head>
<body>
 <header class="site-header">
 <div class="wrap"> <div class="site-title"><a href="/man/index.html">linux man pages</a></div>
 <div class="site-description">{"type":"programming"}</div>
 </div>
 </header>
 <div class="page-content">
<H1>ExtUtils::Constant</H1>
Section: Perl Programmers Reference Guide (3pm)<BR>Updated: 2009-06-12<BR><A HREF="#index">Index</A>
<A HREF="/man/index.html">Return to Main Contents</A><HR>






<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

ExtUtils::Constant - generate XS code to import C header constants
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<A NAME="ixAAC"></A>


<PRE>
    use ExtUtils::Constant qw (WriteConstants);
    WriteConstants(
        NAME =&gt; 'Foo',
        NAMES =&gt; [qw(FOO BAR BAZ)],
    );
    # Generates wrapper code to make the values of the constants FOO BAR BAZ
    #  available to perl

</PRE>


<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

<A NAME="ixAAD"></A>
ExtUtils::Constant facilitates generating C and <FONT SIZE="-1">XS</FONT> wrapper code to allow
perl modules to <FONT SIZE="-1">AUTOLOAD</FONT> constants defined in C library header files.
It is principally used by the <TT>&quot;h2xs&quot;</TT> utility, on which this code is based.
It doesn't contain the routines to scan header files to extract these
constants.
<A NAME="lbAE">&nbsp;</A>
<H2>USAGE</H2>

<A NAME="ixAAE"></A>
Generally one only needs to call the <TT>&quot;WriteConstants&quot;</TT> function, and then
<P>



<PRE>
    #include &quot;const-c.inc&quot;

</PRE>


<P>

in the C section of <TT>&quot;Foo.xs&quot;</TT>
<P>



<PRE>
    INCLUDE: const-xs.inc

</PRE>


<P>

in the <FONT SIZE="-1">XS</FONT> section of <TT>&quot;Foo.xs&quot;</TT>.
<P>

For greater flexibility use <TT>&quot;constant_types()&quot;</TT>, <TT>&quot;C_constant&quot;</TT> and
<TT>&quot;XS_constant&quot;</TT>, with which <TT>&quot;WriteConstants&quot;</TT> is implemented.
<P>

Currently this module understands the following types. h2xs may only know
a subset. The sizes of the numeric types are chosen by the <TT>&quot;Configure&quot;</TT>
script at compile time.
<DL COMPACT>
<DT><FONT SIZE="-1">IV</FONT><DD>
<A NAME="ixAAF"></A>
signed integer, at least 32 bits.
<DT><FONT SIZE="-1">UV</FONT><DD>
<A NAME="ixAAG"></A>
unsigned integer, the same size as <I></I><FONT SIZE="-1"><I>IV</I></FONT><I></I>
<DT><FONT SIZE="-1">NV</FONT><DD>
<A NAME="ixAAH"></A>
floating point type, probably <TT>&quot;double&quot;</TT>, possibly <TT>&quot;long double&quot;</TT>
<DT><FONT SIZE="-1">PV</FONT><DD>
<A NAME="ixAAI"></A>
<FONT SIZE="-1">NUL</FONT> terminated string, length will be determined with <TT>&quot;strlen&quot;</TT>
<DT><FONT SIZE="-1">PVN</FONT><DD>
<A NAME="ixAAJ"></A>
A fixed length thing, given as a [pointer, length] pair. If you know the
length of a string at compile time you may use this instead of <I></I><FONT SIZE="-1"><I>PV</I></FONT><I></I>
<DT><FONT SIZE="-1">SV</FONT><DD>
<A NAME="ixAAK"></A>
A <B>mortal</B> <FONT SIZE="-1">SV</FONT>.
<DT><FONT SIZE="-1">YES</FONT><DD>
<A NAME="ixAAL"></A>
Truth.  (<TT>&quot;PL_sv_yes&quot;</TT>)  The value is not needed (and ignored).
<DT><FONT SIZE="-1">NO</FONT><DD>
<A NAME="ixAAM"></A>
Defined Falsehood.  (<TT>&quot;PL_sv_no&quot;</TT>)  The value is not needed (and ignored).
<DT><FONT SIZE="-1">UNDEF</FONT><DD>
<A NAME="ixAAN"></A>
<TT>&quot;undef&quot;</TT>.  The value of the macro is not needed.
</DL>
<A NAME="lbAF">&nbsp;</A>
<H2>FUNCTIONS</H2>

<A NAME="ixAAO"></A>
<DL COMPACT>
<DT>constant_types<DD>
<A NAME="ixAAP"></A>
A function returning a single scalar with <TT>&quot;#define&quot;</TT> definitions for the
constants used internally between the generated C and <FONT SIZE="-1">XS</FONT> functions.
<DT>XS_constant <FONT SIZE="-1">PACKAGE</FONT>, <FONT SIZE="-1">TYPES</FONT>, <FONT SIZE="-1">XS_SUBNAME</FONT>, C_SUBNAME<DD>
<A NAME="ixAAQ"></A>
A function to generate the <FONT SIZE="-1">XS</FONT> code to implement the perl subroutine
<I></I><FONT SIZE="-1"><I>PACKAGE</I></FONT><I></I>::constant used by <I></I><FONT SIZE="-1"><I>PACKAGE</I></FONT><I></I>::AUTOLOAD to load constants.
This <FONT SIZE="-1">XS</FONT> code is a wrapper around a C subroutine usually generated by
<TT>&quot;C_constant&quot;</TT>, and usually named <TT>&quot;constant&quot;</TT>.


<P>


<I></I><FONT SIZE="-1"><I>TYPES</I></FONT><I></I> should be given either as a comma separated list of types that the
C subroutine <TT>&quot;constant&quot;</TT> will generate or as a reference to a hash. It should
be the same list of types as <TT>&quot;C_constant&quot;</TT> was given.
[Otherwise <TT>&quot;XS_constant&quot;</TT> and <TT>&quot;C_constant&quot;</TT> may have different ideas about
the number of parameters passed to the C function <TT>&quot;constant&quot;</TT>]


<P>


You can call the perl visible subroutine something other than <TT>&quot;constant&quot;</TT> if
you give the parameter <I></I><FONT SIZE="-1"><I>XS_SUBNAME</I></FONT><I></I>. The C subroutine it calls defaults to
the name of the perl visible subroutine, unless you give the parameter
<I>C_SUBNAME</I>.
<DT>autoload <FONT SIZE="-1">PACKAGE</FONT>, <FONT SIZE="-1">VERSION</FONT>, <FONT SIZE="-1">AUTOLOADER</FONT><DD>
<A NAME="ixAAR"></A>
A function to generate the <FONT SIZE="-1">AUTOLOAD</FONT> subroutine for the module <I></I><FONT SIZE="-1"><I>PACKAGE</I></FONT><I></I>
<I></I><FONT SIZE="-1"><I>VERSION</I></FONT><I></I> is the perl version the code should be backwards compatible with.
It defaults to the version of perl running the subroutine.  If <I></I><FONT SIZE="-1"><I>AUTOLOADER</I></FONT><I></I>
is true, the <FONT SIZE="-1">AUTOLOAD</FONT> subroutine falls back on AutoLoader::AUTOLOAD for all
names that the <I>constant()</I> routine doesn't recognise.
<DT>WriteMakefileSnippet<DD>
<A NAME="ixAAS"></A>
WriteMakefileSnippet <FONT SIZE="-1">ATTRIBUTE</FONT> =&gt; <FONT SIZE="-1">VALUE</FONT> [, ...]


<P>


A function to generate perl code for Makefile.PL that will regenerate
the constant subroutines.  Parameters are named as passed to <TT>&quot;WriteConstants&quot;</TT>,
with the addition of <TT>&quot;INDENT&quot;</TT> to specify the number of leading spaces
(default 2).


<P>


Currently only <TT>&quot;INDENT&quot;</TT>, <TT>&quot;NAME&quot;</TT>, <TT>&quot;DEFAULT_TYPE&quot;</TT>, <TT>&quot;NAMES&quot;</TT>, <TT>&quot;C_FILE&quot;</TT> and
<TT>&quot;XS_FILE&quot;</TT> are recognised.
<DT>WriteConstants <FONT SIZE="-1">ATTRIBUTE</FONT> =&gt; <FONT SIZE="-1">VALUE</FONT> [, ...]<DD>
<A NAME="ixAAT"></A>
Writes a file of C code and a file of <FONT SIZE="-1">XS</FONT> code which you should <TT>&quot;#include&quot;</TT>
and <TT>&quot;INCLUDE&quot;</TT> in the C and <FONT SIZE="-1">XS</FONT> sections respectively of your module's <FONT SIZE="-1">XS</FONT>
code.  You probably want to do this in your <TT>&quot;Makefile.PL&quot;</TT>, so that you can
easily edit the list of constants without touching the rest of your module.
The attributes supported are
<DL COMPACT><DT><DD>
<DL COMPACT>
<DT><FONT SIZE="-1">NAME</FONT><DD>
<A NAME="ixAAU"></A>
Name of the module.  This must be specified
<DT><FONT SIZE="-1">DEFAULT_TYPE</FONT><DD>
<A NAME="ixAAV"></A>
The default type for the constants.  If not specified <TT>&quot;IV&quot;</TT> is assumed.
<DT><FONT SIZE="-1">BREAKOUT_AT</FONT><DD>
<A NAME="ixAAW"></A>
The names of the constants are grouped by length.  Generate child subroutines
for each group with this number or more names in.
<DT><FONT SIZE="-1">NAMES</FONT><DD>
<A NAME="ixAAX"></A>
An array of constants' names, either scalars containing names, or hashrefs
as detailed in ``C_constant''.
<DT><FONT SIZE="-1">PROXYSUBS</FONT><DD>
<A NAME="ixAAY"></A>
If true, uses proxy subs. See ExtUtils::Constant::ProxySubs.
<DT>C_FH<DD>
<A NAME="ixAAZ"></A>
A filehandle to write the C code to.  If not given, then <I>C_FILE</I> is opened
for writing.
<DT>C_FILE<DD>
<A NAME="ixABA"></A>
The name of the file to write containing the C code.  The default is
<TT>&quot;const-c.inc&quot;</TT>.  The <TT>&quot;-&quot;</TT> in the name ensures that the file can't be
mistaken for anything related to a legitimate perl package name, and
not naming the file <TT>&quot;.c&quot;</TT> avoids having to override Makefile.PL's
<TT>&quot;.xs&quot;</TT> to <TT>&quot;.c&quot;</TT> rules.
<DT><FONT SIZE="-1">XS_FH</FONT><DD>
<A NAME="ixABB"></A>
A filehandle to write the <FONT SIZE="-1">XS</FONT> code to.  If not given, then <I></I><FONT SIZE="-1"><I>XS_FILE</I></FONT><I></I> is opened
for writing.
<DT><FONT SIZE="-1">XS_FILE</FONT><DD>
<A NAME="ixABC"></A>
The name of the file to write containing the <FONT SIZE="-1">XS</FONT> code.  The default is
<TT>&quot;const-xs.inc&quot;</TT>.
<DT><FONT SIZE="-1">XS_SUBNAME</FONT><DD>
<A NAME="ixABD"></A>
The perl visible name of the <FONT SIZE="-1">XS</FONT> subroutine generated which will return the
constants. The default is <TT>&quot;constant&quot;</TT>.
<DT>C_SUBNAME<DD>
<A NAME="ixABE"></A>
The name of the C subroutine generated which will return the constants.
The default is <I></I><FONT SIZE="-1"><I>XS_SUBNAME</I></FONT><I></I>.  Child subroutines have <TT>&quot;_&quot;</TT> and the name
length appended, so constants with 10 character names would be in
<TT>&quot;constant_10&quot;</TT> with the default <I></I><FONT SIZE="-1"><I>XS_SUBNAME</I></FONT><I></I>.
</DL>
</DL>

<DL COMPACT><DT><DD>
</DL>

</DL>
<A NAME="lbAG">&nbsp;</A>
<H2>AUTHOR</H2>

<A NAME="ixABF"></A>
Nicholas Clark &lt;<A HREF="mailto:nick@ccl4.org">nick@ccl4.org</A>&gt; based on the code in <TT>&quot;h2xs&quot;</TT> by Larry Wall and
others
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">USAGE</A><DD>
<DT><A HREF="#lbAF">FUNCTIONS</A><DD>
<DT><A HREF="#lbAG">AUTHOR</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/man/index.html">man2html</A>,
using the manual pages.<BR>
Time: 05:33:26 GMT, December 24, 2015
</div></body>
</HTML>
