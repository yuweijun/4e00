<!DOCTYPE html>

<HTML><head><TITLE>Manpage of ExtUtils::Embed</TITLE>
<meta charset="utf-8">
<link rel="stylesheet" href="/css/main.css" type="text/css">
</head>
<body>
 <header class="site-header">
 <div class="wrap"> <div class="site-title"><a href="/man/index.html">linux man pages</a></div>
 <div class="site-description">{"type":"programming"}</div>
 </div>
 </header>
 <div class="page-content">
<H1>ExtUtils::Embed</H1>
Section: Perl Programmers Reference Guide (3pm)<BR>Updated: 2009-02-12<BR><A HREF="#index">Index</A>
<A HREF="/man/index.html">Return to Main Contents</A><HR>






<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

ExtUtils::Embed - Utilities for embedding Perl in C/C++ applications
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<A NAME="ixAAC"></A>


<PRE>
 perl -MExtUtils::Embed -e xsinit 
 perl -MExtUtils::Embed -e ccopts 
 perl -MExtUtils::Embed -e ldopts

</PRE>


<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

<A NAME="ixAAD"></A>
ExtUtils::Embed provides utility functions for embedding a Perl interpreter
and extensions in your C/C<FONT SIZE="-2">++</FONT> applications.  
Typically, an application <B>Makefile</B> will invoke ExtUtils::Embed
functions while building your application.
<A NAME="lbAE">&nbsp;</A>
<H2>@EXPORT</H2>



<A NAME="ixAAE"></A>
ExtUtils::Embed exports the following functions:
<P>

<I>xsinit()</I>, <I>ldopts()</I>, <I>ccopts()</I>, <I>perl_inc()</I>, <I>ccflags()</I>, 
<I>ccdlflags()</I>, <I>xsi_header()</I>, <I>xsi_protos()</I>, <I>xsi_body()</I>
<A NAME="lbAF">&nbsp;</A>
<H2>FUNCTIONS</H2>

<A NAME="ixAAF"></A>
<DL COMPACT>
<DT><I>xsinit()</I><DD>
<A NAME="ixAAG"></A>
Generate C/C<FONT SIZE="-2">++</FONT> code for the <FONT SIZE="-1">XS</FONT> initializer function.


<P>


When invoked as <TT>&quot;`perl -MExtUtils::Embed -e xsinit --`&quot;</TT>
the following options are recognized:


<P>


<B>-o</B> &lt;output filename&gt; (Defaults to <B>perlxsi.c</B>)


<P>


<B>-o </B><FONT SIZE="-1"><B>STDOUT</B></FONT><B></B> will print to <FONT SIZE="-1">STDOUT</FONT>.


<P>


<B>-std</B> (Write code for extensions that are linked with the current Perl.)


<P>


Any additional arguments are expected to be names of modules
to generate code for.


<P>


When invoked with parameters the following are accepted and optional:


<P>


<TT>&quot;xsinit($filename,$std,[@modules])&quot;</TT>


<P>


Where,


<P>


<B></B>$filename<B></B> is equivalent to the <B>-o</B> option.


<P>


<B></B>$std<B></B> is boolean, equivalent to the <B>-std</B> option.


<P>


<B>[@modules]</B> is an array ref, same as additional arguments mentioned above.
<DT>Examples<DD>
<A NAME="ixAAH"></A>


<PRE>
 perl -MExtUtils::Embed -e xsinit -- -o xsinit.c Socket

</PRE>




<P>


This will generate code with an <B>xs_init</B> function that glues the perl <B>Socket::bootstrap</B> function 
to the C <B>boot_Socket</B> function and writes it to a file named <I>xsinit.c</I>.


<P>


Note that <B>DynaLoader</B> is a special case where it must call <B>boot_DynaLoader</B> directly.


<P>




<PRE>
 perl -MExtUtils::Embed -e xsinit

</PRE>




<P>


This will generate code for linking with <B>DynaLoader</B> and 
each static extension found in <B></B>$Config<B>{static_ext}</B>.
The code is written to the default file name <B>perlxsi.c</B>.


<P>




<PRE>
 perl -MExtUtils::Embed -e xsinit -- -o xsinit.c -std DBI DBD::Oracle

</PRE>




<P>


Here, code is written for all the currently linked extensions along with code
for <B></B><FONT SIZE="-1"><B>DBI</B></FONT><B></B> and <B>DBD::Oracle</B>.


<P>


If you have a working <B>DynaLoader</B> then there is rarely any need to statically link in any 
other extensions.
<DT><I>ldopts()</I><DD>
<A NAME="ixAAI"></A>
Output arguments for linking the Perl library and extensions to your
application.


<P>


When invoked as <TT>&quot;`perl -MExtUtils::Embed -e ldopts --`&quot;</TT>
the following options are recognized:


<P>


<B>-std</B>


<P>


Output arguments for linking the Perl library and any extensions linked
with the current Perl.


<P>


<B>-I</B> &lt;path1:path2&gt;


<P>


Search path for ModuleName.a archives.  
Default path is <B></B>@INC<B></B>.
Library archives are expected to be found as 
<B>/some/path/auto/ModuleName/ModuleName.a</B>
For example, when looking for <B>Socket.a</B> relative to a search path, 
we should find <B>auto/Socket/Socket.a</B>


<P>


When looking for <B>DBD::Oracle</B> relative to a search path,
we should find <B>auto/DBD/Oracle/Oracle.a</B>


<P>


Keep in mind that you can always supply <B>/my/own/path/ModuleName.a</B>
as an additional linker argument.


<P>


<B>--</B>  &lt;list of linker args&gt;


<P>


Additional linker arguments to be considered.


<P>


Any additional arguments found before the <B>--</B> token 
are expected to be names of modules to generate code for.


<P>


When invoked with parameters the following are accepted and optional:


<P>


<TT>&quot;ldopts($std,[@modules],[@link_args],$path)&quot;</TT>


<P>


Where:


<P>


<B></B>$std<B></B> is boolean, equivalent to the <B>-std</B> option.


<P>


<B>[@modules]</B> is equivalent to additional arguments found before the <B>--</B> token.


<P>


<B>[@link_args]</B> is equivalent to arguments found after the <B>--</B> token.


<P>


<B></B>$path<B></B> is equivalent to the <B>-I</B> option.


<P>


In addition, when ldopts is called with parameters, it will return the argument string
rather than print it to <FONT SIZE="-1">STDOUT</FONT>.
<DT>Examples<DD>
<A NAME="ixAAJ"></A>


<PRE>
 perl -MExtUtils::Embed -e ldopts

</PRE>




<P>


This will print arguments for linking with <B>libperl</B> and
extensions found in <B></B>$Config<B>{static_ext}</B>.  This includes libraries
found in <B></B>$Config<B>{libs}</B> and the first ModuleName.a library
for each extension that is found by searching <B></B>@INC<B></B> or the path 
specified by the <B>-I</B> option.  
In addition, when ModuleName.a is found, additional linker arguments
are picked up from the <B>extralibs.ld</B> file in the same directory.


<P>




<PRE>
 perl -MExtUtils::Embed -e ldopts -- -std Socket

</PRE>




<P>


This will do the same as the above example, along with printing additional arguments for linking with the <B>Socket</B> extension.


<P>




<PRE>
 perl -MExtUtils::Embed -e ldopts -- -std Msql -- -L/usr/msql/lib -lmsql

</PRE>




<P>


Any arguments after the second '--' token are additional linker
arguments that will be examined for potential conflict.  If there is no
conflict, the additional arguments will be part of the output.
<DT><I>perl_inc()</I><DD>
<A NAME="ixAAK"></A>
For including perl header files this function simply prints:


<P>




<PRE>
 -I$Config{archlibexp}/CORE

</PRE>




<P>


So, rather than having to say:


<P>




<PRE>
 perl -MConfig -e 'print &quot;-I$Config{archlibexp}/CORE&quot;'

</PRE>




<P>


Just say:


<P>




<PRE>
 perl -MExtUtils::Embed -e perl_inc

</PRE>


<DT><I>ccflags()</I>, <I>ccdlflags()</I><DD>
<A NAME="ixAAL"></A>
These functions simply print <TT>$Config</TT>{ccflags} and <TT>$Config</TT>{ccdlflags}
<DT><I>ccopts()</I><DD>
<A NAME="ixAAM"></A>
This function combines <I>perl_inc()</I>, <I>ccflags()</I> and <I>ccdlflags()</I> into one.
<DT><I>xsi_header()</I><DD>
<A NAME="ixAAN"></A>
This function simply returns a string defining the same <B></B><FONT SIZE="-1"><B>EXTERN_C</B></FONT><B></B> macro as
<B>perlmain.c</B> along with #including <B>perl.h</B> and <B></B><FONT SIZE="-1"><B>EXTERN</B></FONT><B>.h</B>.
<DT>xsi_protos(@modules)<DD>
<A NAME="ixAAO"></A>
This function returns a string of <B>boot_$ModuleName</B> prototypes for each <TT>@modules</TT>.
<DT>xsi_body(@modules)<DD>
<A NAME="ixAAP"></A>
This function returns a string of calls to <B></B>newXS()<B></B> that glue the module <B>bootstrap</B>
function to <B>boot_ModuleName</B> for each <TT>@modules</TT>.


<P>


<B></B>xsinit()<B></B> uses the xsi_* functions to generate most of its code.
</DL>
<A NAME="lbAG">&nbsp;</A>
<H2>EXAMPLES</H2>

<A NAME="ixAAQ"></A>
For examples on how to use <B>ExtUtils::Embed</B> for building C/C<FONT SIZE="-2">++</FONT> applications
with embedded perl, see perlembed.
<A NAME="lbAH">&nbsp;</A>
<H2>SEE ALSO</H2>

<A NAME="ixAAR"></A>
perlembed
<A NAME="lbAI">&nbsp;</A>
<H2>AUTHOR</H2>

<A NAME="ixAAS"></A>
Doug MacEachern &lt;<I><A HREF="mailto:dougm@osf.org">dougm@osf.org</A></I>&gt;
<P>

Based on ideas from Tim Bunce &lt;<I><A HREF="mailto:Tim.Bunce@ig.co.uk">Tim.Bunce@ig.co.uk</A></I>&gt; and
<B>minimod.pl</B> by Andreas Koenig &lt;<I>k@anna.in-berlin.de</I>&gt; and Tim Bunce.
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">@EXPORT</A><DD>
<DT><A HREF="#lbAF">FUNCTIONS</A><DD>
<DT><A HREF="#lbAG">EXAMPLES</A><DD>
<DT><A HREF="#lbAH">SEE ALSO</A><DD>
<DT><A HREF="#lbAI">AUTHOR</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/man/index.html">man2html</A>,
using the manual pages.<BR>
Time: 05:33:26 GMT, December 24, 2015
</div></body>
</HTML>
