<!DOCTYPE html>

<HTML><head><TITLE>Manpage of Apache::TestMB</TITLE>
<meta charset="utf-8">
<link rel="stylesheet" href="/css/main.css" type="text/css">
</head>
<body>
 <header class="site-header">
 <div class="wrap"> <div class="site-title"><a href="/man/index.html">linux man pages</a></div>
 <div class="site-description">{"type":"programming"}</div>
 </div>
 </header>
 <div class="page-content">
<H1>Apache::TestMB</H1>
Section: User Contributed Perl Documentation (3)<BR>Updated: 2007-12-31<BR><A HREF="#index">Index</A>
<A HREF="/man/index.html">Return to Main Contents</A><HR>






<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

Apache::TestMB - Subclass of Module::Build to support Apache::Test
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<A NAME="ixAAC"></A>
Standard process for building &amp; installing modules:
<P>



<PRE>
  perl Build.PL
  ./Build
  ./Build test
  ./Build install

</PRE>


<P>

Or, if you're on a platform (like <FONT SIZE="-1">DOS</FONT> or Windows) that doesn't like the ``./''
notation, you can do this:
<P>



<PRE>
  perl Build.PL
  perl Build
  perl Build test
  perl Build install

</PRE>


<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

<A NAME="ixAAD"></A>
This class subclasses <TT>&quot;Module::Build&quot;</TT> to add support for testing
Apache integration with Apache::Test. It is broadly based on
<TT>&quot;Apache::TestMM&quot;</TT>, and as such adds a number of build actions to a the
<I>Build</I> script, while simplifying the process of creating <I>Build.PL</I>
scripts.
<P>

Here's how to use <TT>&quot;Apache::TestMB&quot;</TT> in a <I>Build.PL</I> script:
<P>



<PRE>
  use Module::Build;

  my $build_pkg = eval { require Apache::TestMB }
      ? 'Apache::TestMB' : 'Module::Build';

  my $build = $build_pkg-&gt;new(
      module_name =&gt; 'My::Module',
  );
  $build-&gt;create_build_script;

</PRE>


<P>

This is identical to how <TT>&quot;Module::Build&quot;</TT> is used. Not all target
systems may have <TT>&quot;Apache::Test&quot;</TT> (and therefore <TT>&quot;Apache::TestMB&quot;</TT>
installed, so we test for it to be installed, first. But otherwise,
its use can be exactly the same. Consult the
Module::Build documentation for more information on
how to use it; Module::Build::Cookbook may
be especially useful for those looking to migrate from
<TT>&quot;ExtUtils::MakeMaker&quot;</TT>.
<A NAME="lbAE">&nbsp;</A>
<H2>INTERFACE</H2>

<A NAME="ixAAE"></A>
<A NAME="lbAF">&nbsp;</A>
<H3>Build</H3>

<A NAME="ixAAF"></A>
With the above script, users can build your module in the usual
<TT>&quot;Module::Build&quot;</TT> way:
<P>



<PRE>
  perl Build.PL
  ./Build
  ./Build test
  ./Build install

</PRE>


<P>

If <TT>&quot;Apache::TestMB&quot;</TT> is installed, then Apache will be started before
tests are run by the <TT>&quot;test&quot;</TT> action, and shut down when the tests
complete. Note that <TT>&quot;Build.PL&quot;</TT> can be called <TT>&quot;Apache::Test&quot;</TT>-specific
options in addition to the usual <TT>&quot;Module::Build&quot;</TT> options. For
example:
<P>



<PRE>
  perl Build.PL -apxs /usr/local/apache/bin/apxs

</PRE>


<P>

Consult the Apache::Test documentation for a complete
list of options.
<P>

In addition to the actions provided by <TT>&quot;Module::Build&quot;</TT> (<TT>&quot;build&quot;</TT>,
<TT>&quot;clean&quot;</TT>, <TT>&quot;code&quot;</TT>, <TT>&quot;test&quot;</TT>, etc.), <TT>&quot;Apache::TestMB&quot;</TT> adds a few extra
actions:
<DL COMPACT>
<DT>test_clean<DD>
<A NAME="ixAAG"></A>
This action cleans out the files generated by the test script,
<I>t/TEST</I>. It is also executed by the <TT>&quot;clean&quot;</TT> action.
<DT>run_tests<DD>
<A NAME="ixAAH"></A>
This action actually the tests by executing the test script,
<I>t/TEST</I>. It is executed by the <TT>&quot;test&quot;</TT> action, so most of the time
it won't be executed directly.
<DT>testcover<DD>
<A NAME="ixAAI"></A>
<TT>&quot;Apache::TestMB&quot;</TT> overrides this action from <TT>&quot;Module::Build&quot;</TT> in order to
prevent the <TT>&quot;Apache::Test&quot;</TT> preference files from being included in the test
coverage.
</DL>
<A NAME="lbAG">&nbsp;</A>
<H3>Constructor</H3>

<A NAME="ixAAJ"></A>
<I>new</I>
<A NAME="ixAAK"></A>
<P>

The <TT>&quot;new()&quot;</TT> constructor takes all the same arguments as its parent in
<TT>&quot;Module::Build&quot;</TT>, but can optionally accept one other parameter:
<DL COMPACT>
<DT>apache_test_script<DD>
<A NAME="ixAAL"></A>
The name of the <TT>&quot;Apache::Test&quot;</TT> test script. The default value is
<I>t/TEST</I>, which will work in the vast majority of cases. If you wish
to specify your own file name, do so with a relative file name using
Unix-style paths; the file name will automatically be converted for
the local platform.
</DL>
<P>

When <TT>&quot;new()&quot;</TT> is called it does the following:
<DL COMPACT>
<DT>*<DD>
Processes the <TT>&quot;Apache::Test&quot;</TT>-specific options in <TT>@ARGV</TT>. See the
Apache::Test documentation for a complete list of
options.
<DT>*<DD>
Sets the name of the <TT>&quot;Apache::Test&quot;</TT> test script to <I>t/TEST</I>, unless
it was explicitly specified by the <TT>&quot;apache_test_script&quot;</TT> parameter.
<DT>*<DD>
Calls <TT>&quot;generate_script()&quot;</TT> to generate <TT>&quot;Apache::Test&quot;</TT> test script,
usually <I>t/TEST</I>.
</DL>
<A NAME="lbAH">&nbsp;</A>
<H3>Instance Methods</H3>

<A NAME="ixAAM"></A>
<I>apache_test_args</I>
<A NAME="ixAAN"></A>
<P>

Returns a hash reference containing all of the settings specified by
options passed to <I>Build.PL</I>, or explicitly added to <TT>@ARGV</TT> in
<I>Build.PL</I>. Consult the Apache::Test documentation
for a complete list of options.
<P>

<I>apache_test_script</I>
<A NAME="ixAAO"></A>
<P>

Gets or sets the file name of the <TT>&quot;Apache::Test&quot;</TT> test script.
<P>

<I>generate_script</I>
<A NAME="ixAAP"></A>
<P>



<PRE>
  $build-&gt;generate_script;
  $build-&gt;generate_script('t/FOO');
  $build-&gt;generate_script(undef, 'Apache::TestRun');

</PRE>


<P>

This method is called by <TT>&quot;new()&quot;</TT>, so in most cases it can be
ignored. If you'd like it to use other than the default arguments, you
can call it explicitly in <I>Build.PL</I> and pass it the arguments you
desire. It takes two optional arguments:
<DL COMPACT>
<DT>*<DD>
The name of the <TT>&quot;Apache::Test&quot;</TT> test script. Defaults to the value
returned by <TT>&quot;apache_test_script()&quot;</TT>.
<DT>*<DD>
The name of an <TT>&quot;Apache::Test&quot;</TT> test running class. Defaults to
<TT>&quot;Apache::TestRunPerl&quot;</TT>.
</DL>
<P>

If there is an existing <I>t/TEST.PL</I> (or a script with the same name
as specified by the <TT>&quot;apache_test_script&quot;</TT> parameter but with <I>.PL</I>
appended to it), then that script will be used as the template for the
test script.  Otherwise, a simple test script will be written similar
to what would be written by <TT>&quot;Apache::TestRun::generate_script()&quot;</TT>
(although that function is not aware of the arguments passed to
<I>Build.PL</I>, so use this one instead!).
<A NAME="lbAI">&nbsp;</A>
<H2>SEE ALSO</H2>

<A NAME="ixAAQ"></A>
<DL COMPACT>
<DT>Apache::TestRequest<DD>
<A NAME="ixAAR"></A>
Demonstrates how to write tests to send requests to the Apache server
run by <TT>&quot;./Build test&quot;</TT>.
<DT>Module::Build<DD>
<A NAME="ixAAS"></A>
The parent class for <TT>&quot;Apache::TestMB&quot;</TT>; consult it's documentation for
more on its interface.
<DT>&lt;<A HREF="http://www.perl.com/pub/a/2003/05/22/testing.html">http://www.perl.com/pub/a/2003/05/22/testing.html</A>&gt;<DD>
<A NAME="ixAAT"></A>
This article by Geoffrey Young explains how to configure Apache and
write tests for your module using Apache::Test. Just use
<TT>&quot;Apache::TestMB&quot;</TT> instead of <TT>&quot;Apache::TestMM&quot;</TT> to update it for use
with <TT>&quot;Module::Build&quot;</TT>.
</DL>
<A NAME="lbAJ">&nbsp;</A>
<H2>AUTHOR</H2>

<A NAME="ixAAU"></A>
David Wheeler
<P>

Questions can be asked at the test-dev &lt;at&gt; httpd.apache.org list. For
more information see: <I><A HREF="http://httpd.apache.org/test/">http://httpd.apache.org/test/</A></I> and
<I><A HREF="http://perl.apache.org/docs/general/testing/testing.html">http://perl.apache.org/docs/general/testing/testing.html</A></I>.
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">INTERFACE</A><DD>
<DL>
<DT><A HREF="#lbAF">Build</A><DD>
<DT><A HREF="#lbAG">Constructor</A><DD>
<DT><A HREF="#lbAH">Instance Methods</A><DD>
</DL>
<DT><A HREF="#lbAI">SEE ALSO</A><DD>
<DT><A HREF="#lbAJ">AUTHOR</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/man/index.html">man2html</A>,
using the manual pages.<BR>
Time: 05:33:11 GMT, December 24, 2015
</div></body>
</HTML>
