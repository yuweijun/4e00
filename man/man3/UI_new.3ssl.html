<!DOCTYPE html>

<HTML><head><TITLE>Manpage of ui</TITLE>
<meta charset="utf-8">
<link rel="stylesheet" href="/css/main.css" type="text/css">
</head>
<body>
 <header class="site-header">
 <div class="wrap"> <div class="site-title"><a href="/man/index.html">linux man pages</a></div>
 <div class="site-description">{"type":"programming"}</div>
 </div>
 </header>
 <div class="page-content">
<H1>ui</H1>
Section: OpenSSL (3)<BR>Updated: 2003-09-30<BR><A HREF="#index">Index</A>
<A HREF="/man/index.html">Return to Main Contents</A><HR>






<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

UI_new, UI_new_method, UI_free, UI_add_input_string, UI_dup_input_string,
UI_add_verify_string, UI_dup_verify_string, UI_add_input_boolean,
UI_dup_input_boolean, UI_add_info_string, UI_dup_info_string,
UI_add_error_string, UI_dup_error_string, UI_construct_prompt,
UI_add_user_data, UI_get0_user_data, UI_get0_result, UI_process,
UI_ctrl, UI_set_default_method, UI_get_default_method, UI_get_method,
UI_set_method, UI_OpenSSL, ERR_load_UI_strings - New User Interface
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<A NAME="ixAAC"></A>


<PRE>
 #include &lt;<A HREF="file:/usr/include/openssl/ui.h">openssl/ui.h</A>&gt;

 typedef struct ui_st UI;
 typedef struct ui_method_st UI_METHOD;

 UI *UI_new(void);
 UI *UI_new_method(const UI_METHOD *method);
 void UI_free(UI *ui);

 int UI_add_input_string(UI *ui, const char *prompt, int flags,
        char *result_buf, int minsize, int maxsize);
 int UI_dup_input_string(UI *ui, const char *prompt, int flags,
        char *result_buf, int minsize, int maxsize);
 int UI_add_verify_string(UI *ui, const char *prompt, int flags,
        char *result_buf, int minsize, int maxsize, const char *test_buf);
 int UI_dup_verify_string(UI *ui, const char *prompt, int flags,
        char *result_buf, int minsize, int maxsize, const char *test_buf);
 int UI_add_input_boolean(UI *ui, const char *prompt, const char *action_desc,
        const char *ok_chars, const char *cancel_chars,
        int flags, char *result_buf);
 int UI_dup_input_boolean(UI *ui, const char *prompt, const char *action_desc,
        const char *ok_chars, const char *cancel_chars,
        int flags, char *result_buf);
 int UI_add_info_string(UI *ui, const char *text);
 int UI_dup_info_string(UI *ui, const char *text);
 int UI_add_error_string(UI *ui, const char *text);
 int UI_dup_error_string(UI *ui, const char *text);

 /* These are the possible flags.  They can be or'ed together. */
 #define UI_INPUT_FLAG_ECHO             0x01
 #define UI_INPUT_FLAG_DEFAULT_PWD      0x02

 char *UI_construct_prompt(UI *ui_method,
        const char *object_desc, const char *object_name);

 void *UI_add_user_data(UI *ui, void *user_data);
 void *UI_get0_user_data(UI *ui);

 const char *UI_get0_result(UI *ui, int i);

 int UI_process(UI *ui);

 int UI_ctrl(UI *ui, int cmd, long i, void *p, void (*f)());
 #define UI_CTRL_PRINT_ERRORS           1
 #define UI_CTRL_IS_REDOABLE            2

 void UI_set_default_method(const UI_METHOD *meth);
 const UI_METHOD *UI_get_default_method(void);
 const UI_METHOD *UI_get_method(UI *ui);
 const UI_METHOD *UI_set_method(UI *ui, const UI_METHOD *meth);

 UI_METHOD *UI_OpenSSL(void);

</PRE>


<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

<A NAME="ixAAD"></A>
<FONT SIZE="-1">UI</FONT> stands for User Interface, and is general purpose set of routines to
prompt the user for text-based information.  Through user-written methods
(see <I><A HREF="/man/index.html?3+ui_create">ui_create</A></I>(3)), prompting can be done in any way
imaginable, be it plain text prompting, through dialog boxes or from a
cell phone.
<P>

All the functions work through a context of the type <FONT SIZE="-1">UI</FONT>.  This context
contains all the information needed to prompt correctly as well as a
reference to a <FONT SIZE="-1">UI_METHOD</FONT>, which is an ordered vector of functions that
carry out the actual prompting.
<P>

The first thing to do is to create a <FONT SIZE="-1">UI</FONT> with <I>UI_new()</I> or <I>UI_new_method()</I>,
then add information to it with the UI_add or UI_dup functions.  Also,
user-defined random data can be passed down to the underlying method
through calls to UI_add_user_data.  The default <FONT SIZE="-1">UI</FONT> method doesn't care
about these data, but other methods might.  Finally, use <I>UI_process()</I>
to actually perform the prompting and <I>UI_get0_result()</I> to find the result
to the prompt.
<P>

A <FONT SIZE="-1">UI</FONT> can contain more than one prompt, which are performed in the given
sequence.  Each prompt gets an index number which is returned by the
UI_add and UI_dup functions, and has to be used to get the corresponding
result with <I>UI_get0_result()</I>.
<P>

The functions are as follows:
<P>

<I>UI_new()</I> creates a new <FONT SIZE="-1">UI</FONT> using the default <FONT SIZE="-1">UI</FONT> method.  When done with
this <FONT SIZE="-1">UI</FONT>, it should be freed using <I>UI_free()</I>.
<P>

<I>UI_new_method()</I> creates a new <FONT SIZE="-1">UI</FONT> using the given <FONT SIZE="-1">UI</FONT> method.  When done with
this <FONT SIZE="-1">UI</FONT>, it should be freed using <I>UI_free()</I>.
<P>

<I>UI_OpenSSL()</I> returns the built-in <FONT SIZE="-1">UI</FONT> method (note: not the default one,
since the default can be changed.  See further on).  This method is the
most machine/OS dependent part of OpenSSL and normally generates the
most problems when porting.
<P>

<I>UI_free()</I> removes a <FONT SIZE="-1">UI</FONT> from memory, along with all other pieces of memory
that's connected to it, like duplicated input strings, results and others.
<P>

<I>UI_add_input_string()</I> and <I>UI_add_verify_string()</I> add a prompt to the <FONT SIZE="-1">UI</FONT>,
as well as flags and a result buffer and the desired minimum and maximum
sizes of the result.  The given information is used to prompt for
information, for example a password, and to verify a password (i.e. having
the user enter it twice and check that the same string was entered twice).
<I>UI_add_verify_string()</I> takes and extra argument that should be a pointer
to the result buffer of the input string that it's supposed to verify, or
verification will fail.
<P>

<I>UI_add_input_boolean()</I> adds a prompt to the <FONT SIZE="-1">UI</FONT> that's supposed to be answered
in a boolean way, with a single character for yes and a different character
for no.  A set of characters that can be used to cancel the prompt is given
as well.  The prompt itself is really divided in two, one part being the
descriptive text (given through the <I>prompt</I> argument) and one describing
the possible answers (given through the <I>action_desc</I> argument).
<P>

<I>UI_add_info_string()</I> and <I>UI_add_error_string()</I> add strings that are shown at
the same time as the prompt for extra information or to show an error string.
The difference between the two is only conceptual.  With the builtin method,
there's no technical difference between them.  Other methods may make a
difference between them, however.
<P>

The flags currently supported are <FONT SIZE="-1">UI_INPUT_FLAG_ECHO</FONT>, which is relevant for
<I>UI_add_input_string()</I> and will have the users response be echoed (when
prompting for a password, this flag should obviously not be used, and
<FONT SIZE="-1">UI_INPUT_FLAG_DEFAULT_PWD</FONT>, which means that a default password of some
sort will be used (completely depending on the application and the <FONT SIZE="-1">UI</FONT>
method).
<P>

<I>UI_dup_input_string()</I>, <I>UI_dup_verify_string()</I>, <I>UI_dup_input_boolean()</I>,
<I>UI_dup_info_string()</I> and <I>UI_dup_error_string()</I> are basically the same
as their UI_add counterparts, except that they make their own copies
of all strings.
<P>

<I>UI_construct_prompt()</I> is a helper function that can be used to create
a prompt from two pieces of information: an description and a name.
The default constructor (if there is none provided by the method used)
creates a string &quot;Enter <I>description</I> for <I>name</I>:``.  With the
description ''pass phrase`` and the file name ''foo.key``, that becomes
''Enter pass phrase for foo.key:&quot;.  Other methods may create whatever
string and may include encodings that will be processed by the other
method functions.
<P>

<I>UI_add_user_data()</I> adds a piece of memory for the method to use at any
time.  The builtin <FONT SIZE="-1">UI</FONT> method doesn't care about this info.  Note that several
calls to this function doesn't add data, it replaces the previous blob
with the one given as argument.
<P>

<I>UI_get0_user_data()</I> retrieves the data that has last been given to the
<FONT SIZE="-1">UI</FONT> with <I>UI_add_user_data()</I>.
<P>

<I>UI_get0_result()</I> returns a pointer to the result buffer associated with
the information indexed by <I>i</I>.
<P>

<I>UI_process()</I> goes through the information given so far, does all the printing
and prompting and returns.
<P>

<I>UI_ctrl()</I> adds extra control for the application author.  For now, it
understands two commands: <FONT SIZE="-1">UI_CTRL_PRINT_ERRORS</FONT>, which makes <I>UI_process()</I>
print the OpenSSL error stack as part of processing the <FONT SIZE="-1">UI</FONT>, and
<FONT SIZE="-1">UI_CTRL_IS_REDOABLE</FONT>, which returns a flag saying if the used <FONT SIZE="-1">UI</FONT> can
be used again or not.
<P>

<I>UI_set_default_method()</I> changes the default <FONT SIZE="-1">UI</FONT> method to the one given.
<P>

<I>UI_get_default_method()</I> returns a pointer to the current default <FONT SIZE="-1">UI</FONT> method.
<P>

<I>UI_get_method()</I> returns the <FONT SIZE="-1">UI</FONT> method associated with a given <FONT SIZE="-1">UI</FONT>.
<P>

<I>UI_set_method()</I> changes the <FONT SIZE="-1">UI</FONT> method associated with a given <FONT SIZE="-1">UI</FONT>.
<A NAME="lbAE">&nbsp;</A>
<H2>SEE ALSO</H2>

<A NAME="ixAAE"></A>
<I><A HREF="/man/index.html?3+ui_create">ui_create</A></I>(3), <I><A HREF="http://localhost/cgi-bin/man/man2html?3+ui_compat">ui_compat</A></I>(3)
<A NAME="lbAF">&nbsp;</A>
<H2>HISTORY</H2>

<A NAME="ixAAF"></A>
The <FONT SIZE="-1">UI</FONT> section was first introduced in OpenSSL 0.9.7.
<A NAME="lbAG">&nbsp;</A>
<H2>AUTHOR</H2>

<A NAME="ixAAG"></A>
Richard Levitte (<A HREF="mailto:richard@levitte.org">richard@levitte.org</A>) for the OpenSSL project
(<A HREF="http://www.openssl.org).">http://www.openssl.org).</A>
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">SEE ALSO</A><DD>
<DT><A HREF="#lbAF">HISTORY</A><DD>
<DT><A HREF="#lbAG">AUTHOR</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/man/index.html">man2html</A>,
using the manual pages.<BR>
Time: 05:33:44 GMT, December 24, 2015
</div></body>
</HTML>
