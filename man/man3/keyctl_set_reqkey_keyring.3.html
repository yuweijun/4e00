<!DOCTYPE html>

<HTML><head><TITLE>Manpage of KEYCTL_SET_REQKEY_KEYRING</TITLE>
<meta charset="utf-8">
<link rel="stylesheet" href="/css/main.css" type="text/css">
</head>
<body>
 <header class="site-header">
 <div class="wrap"> <div class="site-title"><a href="/man/index.html">linux man pages</a></div>
 <div class="site-description">{"type":"programming"}</div>
 </div>
 </header>
 <div class="page-content">
<H1>KEYCTL_SET_REQKEY_KEYRING</H1>
Section: Linux Key Management Calls (3)<BR>Updated: 4 May 2006<BR><A HREF="#index">Index</A>
<A HREF="/man/index.html">Return to Main Contents</A><HR>


<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

keyctl_set_reqkey_keyring - Set the implicit destination keyring

<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<PRE>
<B>#include &lt;<A HREF="file:/usr/include/keyutils.h">keyutils.h</A>&gt;</B>

<B>long keyctl_set_reqkey_keyring(int </B><I>reqkey_defl</I><B>);</B>
</PRE><A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

<B>keyctl_set_reqkey_keyring</B>()

sets the default destination for implicit key requests for the current thread
and returns the old setting.

After this operation has been issued, keys acquired by implicit key requests,
such as might be performed by open() on an AFS or NFS filesystem, will be
linked by default to the specified keyring by this function.

The valid values of
<I>reqkey_defl</I>

are:
<DL COMPACT>
<DT><B>KEY_REQKEY_DEFL_NO_CHANGE</B>

<DD>
This makes no change to the current setting.
<DT><B>KEY_REQKEY_DEFL_THREAD_KEYRING</B>

<DD>
This makes the thread-specific keyring the default destination.
<DT><B>KEY_REQKEY_DEFL_PROCESS_KEYRING</B>

<DD>
This makes the process-specific keyring the default destination.
<DT><B>KEY_REQKEY_DEFL_SESSION_KEYRING</B>

<DD>
This makes the session keyring the default destination.
<DT><B>KEY_REQKEY_DEFL_USER_KEYRING</B>

<DD>
This makes the UID-specific keyring the default destination.
<DT><B>KEY_REQKEY_DEFL_USER_SESSION_KEYRING</B>

<DD>
This makes the UID-specific session keyring the default destination.
<DT><B>KEY_REQKEY_DEFL_DEFAULT</B>

<DD>
This selects the default behaviour which is to use the thread-specific keyring
if there is one, otherwise the process-specific keyring if there is one,
otherwise the session keyring if there is one, otherwise the UID-specific
session keyring.

This setting is inherited across
<B>fork</B>()

and
<B>exec</B>().

<P>

</DL>
<A NAME="lbAE">&nbsp;</A>
<H2>RETURN VALUE</H2>

On success
<B>keyctl_set_reqkey_keyring</B>()

returns
<B>0</B>.

On error, the value
<B>-1</B>

will be returned and errno will have been set to an appropriate error.

<A NAME="lbAF">&nbsp;</A>
<H2>ERRORS</H2>

<DL COMPACT>
<DT><B>EINVAL</B>

<DD>
The value of
<I>reqkey_defl</I>

is invalid.

</DL>
<A NAME="lbAG">&nbsp;</A>
<H2>LINKING</H2>

This is a library function that can be found in
<I>libkeyutils</I>.

When linking,
<B>-lkeyutils</B>

should be specified to the linker.

<A NAME="lbAH">&nbsp;</A>
<H2>SEE ALSO</H2>

<B><A HREF="/man/index.html?1+keyctl">keyctl</A></B>(1),

<BR>

<B><A HREF="/man/index.html?2+add_key">add_key</A></B>(2),

<BR>

<B><A HREF="/man/index.html?2+keyctl">keyctl</A></B>(2),

<BR>

<B><A HREF="/man/index.html?2+request_key">request_key</A></B>(2),

<BR>

<B><A HREF="/man/index.html?3+keyctl">keyctl</A></B>(3),

<BR>

<B><A HREF="/man/index.html?8+request-key">request-key</A></B>(8)

<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">RETURN VALUE</A><DD>
<DT><A HREF="#lbAF">ERRORS</A><DD>
<DT><A HREF="#lbAG">LINKING</A><DD>
<DT><A HREF="#lbAH">SEE ALSO</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/man/index.html">man2html</A>,
using the manual pages.<BR>
Time: 05:33:30 GMT, December 24, 2015
</div></body>
</HTML>
